{"version":3,"sources":["components/app/app.module.css","components/main/main.module.css","components/modal-overlay/modal-overlay.module.css","components/header/header.tsx","images/check.svg","components/order-details/order-details.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","utils/types.ts","components/ingredient-card-link/ingredient-card-link.tsx","components/ingredient-card/ingredient-card.tsx","components/ingredient-card-draggable/ingredient-card-draggable.tsx","components/ingredients-section/ingredients-section.tsx","components/burger-ingredients/burger-ingredients.tsx","utils/api.ts","utils/utils.ts","services/actions.ts","components/burger-constructor-item/burger-constructor-item.tsx","components/burger-constructor-item-draggable-droppable/burger-constructor-item-draggable-droppable.tsx","components/burger-constructor/burger-constructor.tsx","components/burger-constructor-droppable/burger-constructor-droppable.tsx","components/main/main.tsx","pages/constructor.tsx","pages/register.tsx","pages/login.tsx","pages/forgot-password.tsx","pages/reset-password.tsx","pages/profile.tsx","components/protected-route/protected-route.tsx","components/ingredient-details/ingredient-details.tsx","components/ingredient-details/ingredient-details-page.tsx","components/ingredient-details-modal/ingredient-details-modal.tsx","components/public-route/public-route.tsx","components/app-routes/app-routes.tsx","components/app/app.tsx","reportWebVitals.ts","redux-devtools.ts","services/reducers.ts","services/root-reducer.ts","utils/store.ts","index.tsx","components/header/header.module.css","pages/profile.module.css","components/burger-constructor/burger-constructor.module.css","components/burger-ingredients/burger-ingredients.module.css","components/ingredient-details/ingredient-details.module.css","components/order-details/order-details.module.css","components/modal/modal.module.css","components/ingredients-section/ingredients-section.module.css","components/burger-constructor-item/burger-constructor-item.module.css","components/ingredient-card/ingredient-card.module.css","pages/pages.module.css"],"names":["module","exports","Header","className","header","nav","exact","to","navLink","activeClassName","active_link","type","auth","OrderDetails","order","orderDetailsStyles","details","digits","number","checkmark","src","checkIcon","alt","ModalOverlay","onClick","modalOverlayStyles","overlay","Modal","children","title","onClose","isVisible","useEffect","listener","event","key","document","addEventListener","removeEventListener","createPortal","modalStyles","modal","close","querySelector","useAppDispatch","useDispatch","useAppSelector","useSelector","IngredientCardLink","ingredient","innerRef","location","useLocation","pathname","_id","state","background","IngredientCard","forwardRef","ref","onIngredientClick","count","handleSectionClick","useCallback","ingredientCard","ingredient_card","size","image","name","price","IngredientCardDraggable","useDrag","item","dragRef","IngredientsSection","ingredients","counts","ingredientsSectionStyles","ingredients_list","ingredients_list_title","cards_box","filter","map","BurgerIngredients","handleIngredientDetailsOpen","burgerConstructor","selectedIngredients","selectedBun","useMemo","reduce","acc","selectedIngredient","length","useState","current","setCurrent","bunRef","useRef","sauceRef","mainRef","handleBunTabClick","handleSauceTabClick","handleMainTabClick","handleScroll","evt","scrollPosition","target","scrollTop","saucePosition","offsetTop","mainPosition","burgerIngredientsStyles","ingredients_section","ingredients_tabs","value","active","scrollbox","scrollbar","onScroll","API_URL","checkResponse","res","ok","json","then","data","Promise","reject","message","status","refreshToken","fetch","method","headers","body","JSON","stringify","token","getCookie","matches","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","props","exp","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_FAILED","SELECT_INGREDIENT","DELETE_SELECTED_INGREDIENT_DATA","GET_ORDER_NUMBER_REQUEST","GET_ORDER_NUMBER_SUCCESS","GET_ORDER_NUMBER_FAILED","DELETE_ORDER_DATA","DROP_INGREDIENT","DELETE_IGREDIENT","REORDER_CONSTRUCTOR_ITEM","USER_REGISTER","USER_LOGIN","USER_SET_DATA","USER_LOGOUT","GET_USER_INFO","SET_USER_INFO","FORGOT_PASSWORD_SET_EMAIL","RESET_PASSWORD","getIngredientsApi","dispatch","success","payload","catch","err","console","log","getOrderNumber","ingredientIds","sendOrder","registerUser","email","password","history","register","push","loginUser","login","accessToken","authToken","split","localStorage","setItem","logoutUser","logout","removeItem","getUserInfo","Authorization","getUserInfoApi","user","refreshingToken","getItem","setUserInfo","setUserInfoApi","forgotPassword","forgotPasswordApi","resetPassword","resetToken","resetPasswordApi","BurgerConstructorItem","index","handleDelete","handleClose","BurgerConstructorItemStyles","constructor_item","ingredient_button","drag_button","text","thumbnail","BurgerConstructorItemDraggableDroppable","dragIndex","useDrop","accept","drop","itemIndex","dropTarget","BurgerConstructor","onSubmit","orderSum","sum","handleSubmit","concat","deleteIndex","burgerConstructorStyles","constructor_section","constructor_list","isLocked","constructor_items","uid","order_price","BurgerConstructorDroppable","v4","Main","useHistory","loggedIn","handleOrderDetailsOpen","handleOrderDetailsClose","mainSectionStyles","main","Constructor","Register","handleChange","preventDefault","styles","form__block","form","placeholder","onChange","e","error","errorText","Login","link","forgot_password","ForgotPassword","ResetPassword","resetPasswordValues","setResetPasswordValues","Profile","username","useremail","userpassword","formvalue","setFormvalue","prevstate","isFormChanged","navlink","nav_text","icon","ProtectedRoute","Component","component","path","IngredientDetails","image_large","calories","proteins","fat","carbohydrates","ingredientDetailsStyles","content","list","IngredientDetailsPage","id","useParams","find","IngredientDetailsModal","handleIngredientDetailsClose","goBack","PublicRoute","AppRoutes","appstyles","page","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","composeEnhancers","composeWithDevToolsDevelopmentOnly","ingredientsInitialState","ingredientsRequest","ingredientsFailed","burgerConstructorInitialState","orderInitialState","orderNumberRequest","orderNumberFailed","userInitialState","resetPasswordInitialState","rootReducer","combineReducers","action","constructorItems","draggingItemIndex","enhancer","applyMiddleware","thunk","store","createStore","ReactDOM","render","StrictMode","DndProvider","backend","HTML5Backend","getElementById"],"mappings":"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","file":"static/js/main.ef04aa7f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"app_page__1NvGu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"main_main__OFmn0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__3PHOs\"};","import {\r\n  BurgerIcon,\r\n  ListIcon,\r\n  Logo,\r\n  ProfileIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport header from \"./header.module.css\";\r\n\r\nfunction Header() {\r\n  return (\r\n    <header className={`${header.header} p-4`}>\r\n      <nav className={header.nav}>\r\n        <NavLink\r\n          exact\r\n          to=\"/\"\r\n          className={`${header.navLink} pr-5 pt-4 pb-4 mr-2`}\r\n          activeClassName={header.active_link}\r\n        >\r\n          <BurgerIcon type=\"primary\" />\r\n          <span className={`text text_type_main-default ml-2`}>\r\n            Конструктор\r\n          </span>\r\n        </NavLink>\r\n        <button className={`${header.navLink} pl-5 pr-5 pt-4 pb-4`}>\r\n          <ListIcon type=\"primary\" />\r\n          <span className={`text text_type_main-default ml-2`}>\r\n            Лента заказов\r\n          </span>\r\n        </button>\r\n      </nav>\r\n      <Logo />\r\n      <div className={header.auth}>\r\n        <NavLink\r\n          exact\r\n          to=\"/profile\"\r\n          className={`${header.navLink} pl-5 pr-5 pt-4 pb-4`}\r\n          activeClassName={header.active_link}\r\n        >\r\n          <ProfileIcon type=\"primary\" />\r\n          <span className={`text text_type_main-default ml-2`}>\r\n            Личный кабинет\r\n          </span>\r\n        </NavLink>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","export default __webpack_public_path__ + \"static/media/check.2022ce2b.svg\";","import orderDetailsStyles from \"./order-details.module.css\";\r\nimport checkIcon from \"../../images/check.svg\";\r\nimport { TOrder } from \"../../utils/types\";\r\n\r\ninterface OrderDetailsProps {\r\n  order: TOrder;\r\n}\r\n\r\nexport function OrderDetails({ order }: OrderDetailsProps) {\r\n  if (!order) {\r\n    return null;\r\n  }\r\n  return (\r\n    <div className={`${orderDetailsStyles.details} pb-30`}>\r\n      <p\r\n        className={`${orderDetailsStyles.digits} text text_type_digits-large mb-8`}\r\n      >\r\n        {order.number}\r\n      </p>\r\n      <p className=\"text text_type_main-medium\">идентификатор заказа</p>\r\n      <img\r\n        className={`${orderDetailsStyles.checkmark} mt-15 mb-15`}\r\n        src={checkIcon}\r\n        alt=\"order-details\"\r\n      />\r\n      <p className=\"text text_type_main-default mb-2\">\r\n        Ваш заказ начали готовить\r\n      </p>\r\n      <p className=\"text text_type_main-default text_color_inactive\">\r\n        Дождитесь готовности на орбитальной станции\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n","import modalOverlayStyles from \"./modal-overlay.module.css\";\r\n\r\ninterface IModalOverlayProps {\r\n  onClick: () => void;\r\n}\r\n\r\nexport function ModalOverlay({ onClick }: IModalOverlayProps) {\r\n  return <div className={modalOverlayStyles.overlay} onClick={onClick} />;\r\n}\r\n","import { FunctionComponent, useEffect } from \"react\";\r\nimport modalStyles from \"./modal.module.css\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { ModalOverlay } from \"../modal-overlay/modal-overlay\";\r\nimport { CloseIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\ninterface IModalProps {\r\n  title?: string;\r\n  onClose: () => void;\r\n  isVisible: boolean;\r\n}\r\n\r\nexport const Modal: FunctionComponent<IModalProps> = ({\r\n  children,\r\n  title,\r\n  onClose,\r\n  isVisible,\r\n}) => {\r\n  useEffect(() => {\r\n    if (!isVisible) {\r\n      return;\r\n    }\r\n    const listener = (event: KeyboardEvent) => {\r\n      if (event.key === \"Escape\") {\r\n        onClose();\r\n      }\r\n    };\r\n    document.addEventListener(\"keydown\", listener);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", listener);\r\n    };\r\n  }, [onClose, isVisible]);\r\n\r\n  if (!isVisible) {\r\n    return null;\r\n  }\r\n\r\n  return createPortal(\r\n    <>\r\n      <ModalOverlay onClick={onClose} />\r\n      <div className={`${modalStyles.modal} pr-10 pl-10 pt-10`}>\r\n        <div className={modalStyles.header}>\r\n          <h2 className=\"text text_type_main-large\">{title}</h2>\r\n          <button className={modalStyles.close} onClick={onClose}>\r\n            <CloseIcon type=\"primary\" />\r\n          </button>\r\n        </div>\r\n        {children}\r\n      </div>\r\n    </>,\r\n    document.querySelector(\"#modals\") as HTMLElement\r\n  );\r\n};\r\n","import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\r\nimport { ThunkAction, ThunkDispatch } from \"redux-thunk\";\r\nimport { TActions } from \"../services/actions\";\r\nimport { store } from \"./store\";\r\n\r\nexport type TIngredient = {\r\n  calories: number;\r\n  carbohydrates: number;\r\n  fat: number;\r\n  image: string;\r\n  image_large: string;\r\n  image_mobile: string;\r\n  name: string;\r\n  price: number;\r\n  proteins: number;\r\n  type: string;\r\n  _id: string;\r\n  count: number;\r\n};\r\n\r\nexport type TSelectedIngredient = TIngredient & { uid: string };\r\n\r\nexport type TOrder = {\r\n  number: number;\r\n};\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch &\r\n  ThunkDispatch<RootState, unknown, TActions>;\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n\r\nexport type AppThunk<ReturnType = void> = ThunkAction<\r\n  ReturnType,\r\n  RootState,\r\n  unknown,\r\n  TActions\r\n>;\r\n","import { PropsWithChildren } from \"react\";\r\nimport { useLocation, Link, LinkProps } from \"react-router-dom\";\r\nimport { TIngredient } from \"../../utils/types\";\r\n\r\ninterface IIngredientCardLinkProps extends PropsWithChildren<{}> {\r\n  ingredient: TIngredient;\r\n  innerRef: LinkProps[\"innerRef\"];\r\n  className: LinkProps[\"className\"];\r\n  onClick: LinkProps[\"onClick\"];\r\n}\r\n\r\nexport function IngredientCardLink({\r\n  children,\r\n  ingredient,\r\n  innerRef,\r\n  className,\r\n  onClick,\r\n}: IIngredientCardLinkProps) {\r\n  let location = useLocation();\r\n  return (\r\n    <Link\r\n      key={ingredient._id}\r\n      to={{\r\n        pathname: `/ingredients/${ingredient._id}`,\r\n        // This is the trick! This link sets\r\n        // the `background` in location state.\r\n        state: { background: location },\r\n      }}\r\n      innerRef={innerRef}\r\n      className={className}\r\n      onClick={onClick}\r\n    >\r\n      {children}\r\n    </Link>\r\n  );\r\n}\r\n","import {\r\n  Counter,\r\n  CurrencyIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback, forwardRef } from \"react\";\r\nimport ingredientCard from \"./ingredient-card.module.css\";\r\nimport { TIngredient } from \"../../utils/types\";\r\nimport { IngredientCardLink } from \"../ingredient-card-link/ingredient-card-link\";\r\n\r\nconst IngredientCard = forwardRef<HTMLAnchorElement, IIngredientCardProps>(\r\n  ({ ingredient, onIngredientClick, count }, ref) => {\r\n    const handleSectionClick = useCallback(() => {\r\n      onIngredientClick(ingredient);\r\n    }, [onIngredientClick, ingredient]);\r\n    return (\r\n      <IngredientCardLink\r\n        ingredient={ingredient}\r\n        className={ingredientCard.ingredient_card}\r\n        innerRef={ref}\r\n        onClick={handleSectionClick}\r\n      >\r\n        <>\r\n          <Counter count={count} size=\"small\" />\r\n          <img src={ingredient.image} alt={ingredient.name} />\r\n          <div className={`${ingredientCard.price} mt-1 mb-1`}>\r\n            <span className=\"text text_type_main-default mr-2\">\r\n              {ingredient.price}\r\n            </span>{\" \"}\r\n            <CurrencyIcon type=\"primary\" />\r\n          </div>\r\n          <p>{ingredient.name}</p>\r\n        </>\r\n      </IngredientCardLink>\r\n    );\r\n  }\r\n);\r\n\r\ninterface IIngredientCardProps {\r\n  ingredient: TIngredient;\r\n  onIngredientClick: (ingredient: TIngredient) => void;\r\n  count: number;\r\n}\r\n\r\nexport default IngredientCard;\r\n","import { useDrag } from \"react-dnd\";\r\nimport IngredientCard from \"../ingredient-card/ingredient-card\";\r\nimport { TIngredient } from \"../../utils/types\";\r\n\r\ninterface IIngredientCardDraggableProps {\r\n  ingredient: TIngredient;\r\n  onIngredientClick: (ingredient: TIngredient) => void;\r\n  count: number;\r\n}\r\n\r\nfunction IngredientCardDraggable({\r\n  ingredient,\r\n  onIngredientClick,\r\n  count,\r\n}: IIngredientCardDraggableProps) {\r\n  const [, dragRef] = useDrag({\r\n    type: \"ingredient\",\r\n    item: { ingredient },\r\n  });\r\n  return (\r\n    <IngredientCard\r\n      ingredient={ingredient}\r\n      onIngredientClick={onIngredientClick}\r\n      count={count}\r\n      ref={dragRef}\r\n    />\r\n  );\r\n}\r\n\r\nexport default IngredientCardDraggable;\r\n","import IngredientCardDraggable from \"../ingredient-card-draggable/ingredient-card-draggable\";\r\nimport ingredientsSectionStyles from \"./ingredients-section.module.css\";\r\nimport { forwardRef } from \"react\";\r\nimport { TIngredient } from \"../../utils/types\";\r\n\r\nconst IngredientsSection = forwardRef<HTMLDivElement, IIngredientsSectionProps>(\r\n  ({ title, ingredients, type, onIngredientClick, counts }, ref) => {\r\n    return (\r\n      <section\r\n        ref={ref}\r\n        className={`${ingredientsSectionStyles.ingredients_list} pt-10`}\r\n      >\r\n        <h2\r\n          className={`${ingredientsSectionStyles.ingredients_list_title} mb-6 text text_type_main-medium`}\r\n        >\r\n          {title}\r\n        </h2>\r\n        <div className={`${ingredientsSectionStyles.cards_box} pl-4 pr-4`}>\r\n          {ingredients\r\n            .filter((ingredient) => {\r\n              return ingredient.type === type;\r\n            })\r\n            .map((ingredient) => {\r\n              return (\r\n                <IngredientCardDraggable\r\n                  key={ingredient._id}\r\n                  ingredient={ingredient}\r\n                  onIngredientClick={onIngredientClick}\r\n                  count={counts[ingredient._id]}\r\n                />\r\n              );\r\n            })}\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n);\r\n\r\ninterface IIngredientsSectionProps {\r\n  title: string;\r\n  ingredients: Array<TIngredient>;\r\n  type: string;\r\n  onIngredientClick: (ingredients: TIngredient) => void;\r\n  counts: { [key: string]: number };\r\n}\r\n\r\nexport default IngredientsSection;\r\n","import { Tab } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useRef, useState, useMemo, useCallback } from \"react\";\r\nimport { TIngredient, useAppSelector } from \"../../utils/types\";\r\nimport IngredientsSection from \"../ingredients-section/ingredients-section\";\r\nimport burgerIngredientsStyles from \"./burger-ingredients.module.css\";\r\n\r\nconst HEIGHT_FROM_TOP = 200;\r\n\r\nfunction BurgerIngredients({\r\n  handleIngredientDetailsOpen,\r\n}: {\r\n  handleIngredientDetailsOpen: (ingredient: TIngredient) => void;\r\n}) {\r\n  const { selectedIngredients, selectedBun } = useAppSelector(\r\n    ({\r\n      burgerConstructor: { selectedIngredients, selectedBun },\r\n    }: {\r\n      burgerConstructor: {\r\n        selectedIngredients: Array<TIngredient>;\r\n        selectedBun: TIngredient | null;\r\n      };\r\n    }) => {\r\n      return {\r\n        selectedIngredients,\r\n        selectedBun,\r\n      };\r\n    }\r\n  );\r\n\r\n  const { ingredients } = useAppSelector(({ ingredients: { ingredients } }) => {\r\n    return {\r\n      ingredients,\r\n    };\r\n  });\r\n\r\n  const counts = useMemo(() => {\r\n    return ingredients.reduce((acc, ingredient) => {\r\n      if (ingredient.type === \"bun\") {\r\n        return {\r\n          ...acc,\r\n          [ingredient._id]:\r\n            selectedBun && ingredient._id === selectedBun._id ? 1 : 0,\r\n        };\r\n      }\r\n      return {\r\n        ...acc,\r\n        [ingredient._id]: selectedIngredients.filter(\r\n          (selectedIngredient) => selectedIngredient._id === ingredient._id\r\n        ).length,\r\n      };\r\n    }, {});\r\n  }, [ingredients, selectedIngredients, selectedBun]);\r\n\r\n  const [current, setCurrent] = useState(\"bun\");\r\n\r\n  const bunRef = useRef<HTMLDivElement | null>(null);\r\n  const sauceRef = useRef<HTMLDivElement | null>(null);\r\n  const mainRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  const handleBunTabClick = useCallback(() => {\r\n    setCurrent(\"bun\");\r\n  }, [setCurrent]);\r\n  const handleSauceTabClick = useCallback(() => {\r\n    setCurrent(\"sauce\");\r\n  }, [setCurrent]);\r\n  const handleMainTabClick = useCallback(() => {\r\n    setCurrent(\"main\");\r\n  }, [setCurrent]);\r\n\r\n  const handleScroll = useCallback(\r\n    (evt) => {\r\n      if (sauceRef.current == null || mainRef.current == null) {\r\n        return;\r\n      }\r\n      const container = evt.target;\r\n      const scrollPosition = container.scrollTop;\r\n      const saucePosition = sauceRef.current.offsetTop;\r\n      const mainPosition = mainRef.current.offsetTop;\r\n      if (scrollPosition + HEIGHT_FROM_TOP <= saucePosition) {\r\n        handleBunTabClick();\r\n      } else if (scrollPosition + HEIGHT_FROM_TOP <= mainPosition) {\r\n        handleSauceTabClick();\r\n      } else {\r\n        handleMainTabClick();\r\n      }\r\n    },\r\n    [handleBunTabClick, handleMainTabClick, handleSauceTabClick]\r\n  );\r\n\r\n  return (\r\n    <section\r\n      className={`${burgerIngredientsStyles.ingredients_section} pt-10 mr-10`}\r\n    >\r\n      <h1 className=\"text text_type_main-large\">Соберите бургер</h1>\r\n      <div className={`${burgerIngredientsStyles.ingredients_tabs} pt-5`}>\r\n        <Tab value=\"bun\" active={current === \"bun\"} onClick={handleBunTabClick}>\r\n          Булки\r\n        </Tab>\r\n        <Tab\r\n          value=\"sauce\"\r\n          active={current === \"sauce\"}\r\n          onClick={handleSauceTabClick}\r\n        >\r\n          Соусы\r\n        </Tab>\r\n        <Tab\r\n          value=\"main\"\r\n          active={current === \"main\"}\r\n          onClick={handleMainTabClick}\r\n        >\r\n          Начинки\r\n        </Tab>\r\n      </div>\r\n      <div\r\n        className={`${burgerIngredientsStyles.scrollbox} ${burgerIngredientsStyles.scrollbar}`}\r\n        onScroll={handleScroll}\r\n      >\r\n        <IngredientsSection\r\n          ref={bunRef}\r\n          key=\"bun\"\r\n          title=\"Булки\"\r\n          type=\"bun\"\r\n          ingredients={ingredients}\r\n          counts={counts}\r\n          onIngredientClick={handleIngredientDetailsOpen}\r\n        />\r\n        <IngredientsSection\r\n          ref={sauceRef}\r\n          key=\"sauce\"\r\n          title=\"Соусы\"\r\n          type=\"sauce\"\r\n          ingredients={ingredients}\r\n          counts={counts}\r\n          onIngredientClick={handleIngredientDetailsOpen}\r\n        />\r\n        <IngredientsSection\r\n          ref={mainRef}\r\n          key=\"main\"\r\n          title=\"Начинки\"\r\n          type=\"main\"\r\n          ingredients={ingredients}\r\n          counts={counts}\r\n          onIngredientClick={handleIngredientDetailsOpen}\r\n        />\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default BurgerIngredients;\r\n","const API_URL = \"https://norma.nomoreparties.space/api\";\r\nconst checkResponse: <T = {}>(res: Response) => Promise<T> = (res) => {\r\n  if (res && res.ok) {\r\n    return res.json();\r\n  }\r\n  return res\r\n    .json()\r\n    .then((data) => Promise.reject({ message: `Ошибка ${res.status}`, data }));\r\n};\r\n\r\nexport function getIngredients() {\r\n  return fetch(`${API_URL}/ingredients`).then((res) =>\r\n    checkResponse<{ success: boolean; data: [] }>(res)\r\n  );\r\n}\r\n\r\nexport function sendOrder(ingredientIds: number[]) {\r\n  return fetch(`${API_URL}/orders`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({\r\n      ingredients: ingredientIds,\r\n    }),\r\n  }).then((res) => checkResponse<{ order: {}; success: boolean }>(res));\r\n}\r\n\r\nexport function register({\r\n  email,\r\n  password,\r\n  name,\r\n}: {\r\n  email: string;\r\n  password: string;\r\n  name: string;\r\n}) {\r\n  return fetch(`${API_URL}/auth/register`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ email, password, name }),\r\n  }).then((res) => checkResponse<{ accessToken: string }>(res));\r\n}\r\n\r\nexport function login({\r\n  email,\r\n  password,\r\n}: {\r\n  email: string;\r\n  password: string;\r\n}) {\r\n  return fetch(`${API_URL}/auth/login`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ email, password }),\r\n  }).then((res) =>\r\n    checkResponse<{\r\n      accessToken: string | null;\r\n      refreshToken: string | null;\r\n      success: boolean;\r\n    }>(res)\r\n  );\r\n}\r\n\r\nexport function logout(refreshToken: string) {\r\n  return fetch(`${API_URL}/auth/logout`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ token: refreshToken }),\r\n  }).then((res) =>\r\n    checkResponse<{ refreshToken: string | null; success: boolean }>(res)\r\n  );\r\n}\r\n\r\nexport function refreshToken(refreshToken: string) {\r\n  return fetch(`${API_URL}/auth/token`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ token: refreshToken }),\r\n  }).then((res) =>\r\n    checkResponse<{\r\n      accessToken: string;\r\n      refreshToken: string;\r\n    }>(res)\r\n  );\r\n}\r\n\r\nexport function getUserInfoApi(authToken: string) {\r\n  return fetch(`${API_URL}/auth/user`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${authToken}`,\r\n    },\r\n  }).then((res) =>\r\n    checkResponse<{ user: { name: string; email: string } }>(res)\r\n  );\r\n}\r\n\r\nexport function setUserInfoApi(\r\n  authToken: string,\r\n  { name, email, password }: { name: string; email: string; password: string }\r\n) {\r\n  return fetch(`${API_URL}/auth/user`, {\r\n    method: \"PATCH\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${authToken}`,\r\n    },\r\n    body: JSON.stringify({ name, email, password }),\r\n  }).then((res) =>\r\n    checkResponse<{\r\n      user: {\r\n        name: string;\r\n        email: string;\r\n        password: string;\r\n      };\r\n    }>(res)\r\n  );\r\n}\r\n\r\nexport function forgotPasswordApi(email: string) {\r\n  return fetch(`${API_URL}/password-reset`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ email }),\r\n  }).then((res) => checkResponse<{ success: boolean }>(res));\r\n}\r\n\r\nexport function resetPasswordApi(password: string, resetToken: string) {\r\n  return fetch(`${API_URL}/password-reset/reset`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ password, token: resetToken }),\r\n  }).then((res) => checkResponse<{ success: boolean }>(res));\r\n}\r\n","export function getCookie(name: string) {\r\n  const matches = document.cookie.match(\r\n    new RegExp(\r\n      \"(?:^|; )\" +\r\n        // eslint-disable-next-line no-useless-escape\r\n        name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, \"\\\\$1\") +\r\n        \"=([^;]*)\"\r\n    )\r\n  );\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n}\r\n\r\ntype TProps = {\r\n  [key: string]: string | Date | boolean | number | undefined;\r\n  expires?: string | number | Date;\r\n};\r\n\r\nexport function setCookie(name: string, value: string | null, props?: TProps) {\r\n  props = props || {};\r\n  let exp = props.expires;\r\n  if (typeof exp == \"number\" && exp) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + exp * 1000);\r\n    exp = props.expires = d;\r\n  }\r\n  if (exp && exp instanceof Date && exp.toUTCString) {\r\n    props.expires = exp.toUTCString();\r\n  }\r\n  if (value == null) {\r\n    return;\r\n  }\r\n  value = encodeURIComponent(value);\r\n  let updatedCookie = name + \"=\" + value;\r\n  for (const propName in props) {\r\n    updatedCookie += \"; \" + propName;\r\n    const propValue = props[propName];\r\n    if (propValue !== true) {\r\n      updatedCookie += \"=\" + propValue;\r\n    }\r\n  }\r\n  document.cookie = updatedCookie;\r\n}\r\n\r\nexport function deleteCookie(name: string) {\r\n  setCookie(name, null, { expires: -1 });\r\n}\r\n","import { History, LocationState } from \"history\";\r\nimport {\r\n  forgotPasswordApi,\r\n  getIngredients,\r\n  getUserInfoApi,\r\n  login,\r\n  logout,\r\n  refreshToken,\r\n  register,\r\n  resetPasswordApi,\r\n  sendOrder,\r\n  setUserInfoApi,\r\n} from \"../utils/api\";\r\nimport {\r\n  AppDispatch,\r\n  AppThunk,\r\n  TIngredient,\r\n  TOrder,\r\n  TSelectedIngredient,\r\n} from \"../utils/types\";\r\nimport { setCookie } from \"../utils/utils\";\r\n\r\nexport const GET_INGREDIENTS_REQUEST: \"GET_INGREDIENTS_REQUEST\" =\r\n  \"GET_INGREDIENTS_REQUEST\";\r\nexport const GET_INGREDIENTS_SUCCESS: \"GET_INGREDIENTS_SUCCESS\" =\r\n  \"GET_INGREDIENTS_SUCCESS\";\r\nexport const GET_INGREDIENTS_FAILED: \"GET_INGREDIENTS_FAILED\" =\r\n  \"GET_INGREDIENTS_FAILED\";\r\nexport const GET_CONSTRUCTOR_INGREDIENTS: \"GET_CONSTRUCTOR_INGREDIENTS\" =\r\n  \"GET_CONSTRUCTOR_INGREDIENTS\";\r\nexport const SELECT_INGREDIENT: \"SELECT_INGREDIENT\" = \"SELECT_INGREDIENT\";\r\nexport const DELETE_SELECTED_INGREDIENT_DATA: \"DELETE_SELECTED_INGREDIENT_DATA\" =\r\n  \"DELETE_SELECTED_INGREDIENT_DATA\";\r\nexport const GET_ORDER_NUMBER_REQUEST: \"GET_ORDER_NUMBER_REQUEST\" =\r\n  \"GET_ORDER_NUMBER_REQUEST\";\r\nexport const GET_ORDER_NUMBER_SUCCESS: \"GET_ORDER_NUMBER_SUCCESS\" =\r\n  \"GET_ORDER_NUMBER_SUCCESS\";\r\nexport const GET_ORDER_NUMBER_FAILED: \"GET_ORDER_NUMBER_FAILED\" =\r\n  \"GET_ORDER_NUMBER_FAILED\";\r\nexport const DELETE_ORDER_DATA: \"DELETE_ORDER_DATA\" = \"DELETE_ORDER_DATA\";\r\nexport const DROP_INGREDIENT: \"DROP_INGREDIENT\" = \"DROP_INGREDIENT\";\r\nexport const DELETE_IGREDIENT: \"DELETE_IGREDIENT\" = \"DELETE_IGREDIENT\";\r\nexport const REORDER_CONSTRUCTOR_ITEM: \"REORDER_CONSTRUCTOR_ITEM\" =\r\n  \"REORDER_CONSTRUCTOR_ITEM\";\r\nexport const USER_REGISTER: \"USER_REGISTER\" = \"USER_REGISTER\";\r\nexport const USER_LOGIN: \"USER_LOGIN\" = \"USER_LOGIN\";\r\nexport const USER_SET_DATA: \"USER_SET_DATA\" = \"USER_SET_DATA\";\r\nexport const REFRESH_TOKEN: \"REFRESH_TOKEN\" = \"REFRESH_TOKEN\";\r\nexport const USER_LOGOUT: \"USER_LOGOUT\" = \"USER_LOGOUT\";\r\nexport const GET_USER_INFO: \"GET_USER_INFO\" = \"GET_USER_INFO\";\r\nexport const SET_USER_INFO: \"SET_USER_INFO\" = \"SET_USER_INFO\";\r\nexport const FORGOT_PASSWORD_SET_EMAIL: \"FORGOT_PASSWORD_SET_EMAIL\" =\r\n  \"FORGOT_PASSWORD_SET_EMAIL\";\r\nexport const RESET_PASSWORD: \"RESET_PASSWORD\" = \"RESET_PASSWORD\";\r\n\r\nexport interface IGetIngredientsRequestAction {\r\n  readonly type: typeof GET_INGREDIENTS_REQUEST;\r\n}\r\n\r\nexport interface IGetIngredientsSuccessAction {\r\n  readonly type: typeof GET_INGREDIENTS_SUCCESS;\r\n  readonly payload: { ingredients: [] };\r\n}\r\n\r\nexport interface IGetIngredientsFailedAction {\r\n  readonly type: typeof GET_INGREDIENTS_FAILED;\r\n}\r\n\r\nexport interface IGetConstructorIngredientsAction {\r\n  readonly type: typeof GET_CONSTRUCTOR_INGREDIENTS;\r\n}\r\n\r\nexport interface ISelectIngredientAction {\r\n  readonly type: typeof SELECT_INGREDIENT;\r\n  payload: { ingredient: TIngredient };\r\n}\r\n\r\nexport interface IDeleteSelectedIngredientDataAction {\r\n  readonly type: typeof DELETE_SELECTED_INGREDIENT_DATA;\r\n  readonly selectedIngredient: TIngredient;\r\n}\r\n\r\nexport interface IGetOrderNumberRequestAction {\r\n  readonly type: typeof GET_ORDER_NUMBER_REQUEST;\r\n}\r\n\r\nexport interface IGetOrderNumberSuccessAction {\r\n  readonly type: typeof GET_ORDER_NUMBER_SUCCESS;\r\n  readonly payload: { order: TOrder };\r\n}\r\n\r\nexport interface IGetOrderNumberFailedAction {\r\n  readonly type: typeof GET_ORDER_NUMBER_FAILED;\r\n}\r\n\r\nexport interface IDeleteOrderDataAction {\r\n  readonly type: typeof DELETE_ORDER_DATA;\r\n  readonly order: TOrder;\r\n}\r\n\r\nexport interface IDropIngredientAction {\r\n  readonly type: typeof DROP_INGREDIENT;\r\n  readonly payload: { ingredient: TSelectedIngredient };\r\n}\r\n\r\nexport interface IDeleteIngredientAction {\r\n  readonly type: typeof DELETE_IGREDIENT;\r\n  readonly payload: { deleteIndex: number };\r\n}\r\n\r\nexport interface IReorderConstructorItemAction {\r\n  readonly type: typeof REORDER_CONSTRUCTOR_ITEM;\r\n  readonly payload: { dragIndex: number; itemIndex: number };\r\n}\r\n\r\nexport interface IUserRegister {\r\n  readonly type: typeof USER_REGISTER;\r\n}\r\n\r\nexport interface IUserSetData {\r\n  readonly type: typeof USER_SET_DATA;\r\n}\r\n\r\nexport interface IUserLogin {\r\n  readonly type: typeof USER_LOGIN;\r\n}\r\n\r\nexport interface IRefreshToken {\r\n  readonly type: typeof REFRESH_TOKEN;\r\n}\r\n\r\nexport interface IUserLogout {\r\n  readonly type: typeof USER_LOGOUT;\r\n}\r\n\r\nexport interface IGetUserInfo {\r\n  readonly type: typeof GET_USER_INFO;\r\n}\r\n\r\nexport interface ISetUserInfo {\r\n  readonly type: typeof SET_USER_INFO;\r\n}\r\n\r\nexport interface IForgotPasswordSetEmail {\r\n  readonly type: typeof FORGOT_PASSWORD_SET_EMAIL;\r\n}\r\n\r\nexport interface IResetPassword {\r\n  readonly type: typeof RESET_PASSWORD;\r\n}\r\n\r\nexport type TActions =\r\n  | IGetIngredientsRequestAction\r\n  | IGetIngredientsSuccessAction\r\n  | IGetIngredientsFailedAction\r\n  | IGetConstructorIngredientsAction\r\n  | ISelectIngredientAction\r\n  | IDeleteSelectedIngredientDataAction\r\n  | IGetOrderNumberRequestAction\r\n  | IGetOrderNumberSuccessAction\r\n  | IGetOrderNumberFailedAction\r\n  | IDeleteOrderDataAction\r\n  | IDropIngredientAction\r\n  | IDeleteIngredientAction\r\n  | IReorderConstructorItemAction\r\n  | IUserRegister\r\n  | IUserLogin\r\n  | IUserSetData\r\n  | IRefreshToken\r\n  | IUserLogout\r\n  | IGetUserInfo\r\n  | ISetUserInfo\r\n  | IForgotPasswordSetEmail\r\n  | IResetPassword;\r\n\r\nexport const getIngredientsApi: () => AppThunk = () => {\r\n  return (dispatch) => {\r\n    dispatch({\r\n      type: GET_INGREDIENTS_REQUEST,\r\n    });\r\n    getIngredients()\r\n      .then((res) => {\r\n        if (res && res.success) {\r\n          dispatch({\r\n            type: GET_INGREDIENTS_SUCCESS,\r\n            payload: {\r\n              ingredients: res.data,\r\n            },\r\n          });\r\n        } else {\r\n          dispatch({\r\n            type: GET_INGREDIENTS_FAILED,\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const getOrderNumber: (ingredientIds: number[]) => AppThunk = (\r\n  ingredientIds\r\n) => {\r\n  return (dispatch: AppDispatch) => {\r\n    dispatch({\r\n      type: GET_ORDER_NUMBER_REQUEST,\r\n    });\r\n    sendOrder(ingredientIds).then((res) => {\r\n      if (res && res.success) {\r\n        dispatch({\r\n          type: GET_ORDER_NUMBER_SUCCESS,\r\n          payload: {\r\n            order: res.order,\r\n          },\r\n        });\r\n      } else {\r\n        dispatch({\r\n          type: GET_ORDER_NUMBER_FAILED,\r\n        });\r\n      }\r\n    });\r\n  };\r\n};\r\n\r\nexport const registerUser: (\r\n  email: string,\r\n  password: string,\r\n  name: string,\r\n  history: History<LocationState>\r\n) => AppThunk = (email, password, name, history) => {\r\n  return () => {\r\n    register({ email, password, name }).then((res) => {\r\n      console.log(\"registerUser\", res);\r\n      history.push(\"/login\");\r\n    });\r\n  };\r\n};\r\n\r\nexport const loginUser: (\r\n  email: string,\r\n  password: string,\r\n  history: History<LocationState>\r\n) => AppThunk = (email, password, history) => {\r\n  return (dispatch: AppDispatch) => {\r\n    login({ email, password }).then((res) => {\r\n      console.log(\"loginUser\", res);\r\n      if (res.accessToken == null) {\r\n        return;\r\n      }\r\n      let authToken = res.accessToken.split(\"Bearer \")[1];\r\n      if (authToken && res.refreshToken) {\r\n        setCookie(\"authToken\", authToken);\r\n        localStorage.setItem(\"refreshToken\", res.refreshToken);\r\n      }\r\n      if (res.success) {\r\n        dispatch({ type: USER_LOGIN });\r\n        history.push(\"/\");\r\n      }\r\n    });\r\n  };\r\n};\r\n\r\nexport const logoutUser: (\r\n  refreshToken: string | null,\r\n  history: History<LocationState>\r\n) => AppThunk = (refreshToken, history) => {\r\n  return (dispatch: AppDispatch) => {\r\n    if (refreshToken == null) {\r\n      return;\r\n    }\r\n    logout(refreshToken)\r\n      .then((res) => {\r\n        console.log(\"logoutUser\", res);\r\n        if (res.success) {\r\n          localStorage.removeItem(\"refreshToken\");\r\n        }\r\n      })\r\n      .then((res) => {\r\n        dispatch({\r\n          type: USER_LOGOUT,\r\n        });\r\n        history.push(\"/login\");\r\n      });\r\n  };\r\n};\r\n\r\nexport const getUserInfo: (authToken: string | undefined) => AppThunk = (\r\n  authToken\r\n) => {\r\n  return (dispatch: AppDispatch) => {\r\n    if (authToken == null) {\r\n      return;\r\n    }\r\n    getUserInfoApi(authToken)\r\n      .then((res) => {\r\n        console.log(\"getUserInfoApi\", res);\r\n        dispatch({\r\n          type: GET_USER_INFO,\r\n          payload: {\r\n            name: res.user.name,\r\n            email: res.user.email,\r\n          },\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        if (err.data.message === \"jwt expired\") {\r\n          const refreshingToken = localStorage.getItem(\"refreshToken\");\r\n          if (refreshingToken == null) {\r\n            return;\r\n          }\r\n          refreshToken(refreshingToken)\r\n            .then((res) => {\r\n              console.log(\"refreshToken\", res);\r\n              let authToken = res.accessToken.split(\"Bearer \")[1];\r\n              if (authToken && res.refreshToken) {\r\n                setCookie(\"authToken\", authToken);\r\n                localStorage.setItem(\"refreshToken\", res.refreshToken);\r\n              }\r\n            })\r\n            .catch((err) => console.log(err));\r\n        }\r\n      });\r\n  };\r\n};\r\n\r\nexport const setUserInfo: (\r\n  authToken: string | undefined,\r\n  name: string,\r\n  email: string,\r\n  password: string\r\n) => AppThunk = (authToken, name, email, password) => {\r\n  return (dispatch: AppDispatch) => {\r\n    if (authToken == null) {\r\n      return;\r\n    }\r\n    setUserInfoApi(authToken, { name, email, password })\r\n      .then((res) => {\r\n        console.log(\"setUserInfoApi\", res);\r\n        dispatch({\r\n          type: SET_USER_INFO,\r\n          payload: {\r\n            name: res.user.name,\r\n            email: res.user.email,\r\n            password: res.user.password,\r\n          },\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        if (err.data.message === \"jwt expired\") {\r\n          const refreshingToken = localStorage.getItem(\"refreshToken\");\r\n          if (refreshingToken == null) {\r\n            return;\r\n          }\r\n          refreshToken(refreshingToken)\r\n            .then((res) => {\r\n              console.log(\"refreshToken\", res);\r\n              let authToken = res.accessToken.split(\"Bearer \")[1];\r\n              if (authToken && res.refreshToken) {\r\n                setCookie(\"authToken\", authToken);\r\n                localStorage.setItem(\"refreshToken\", res.refreshToken);\r\n              }\r\n            })\r\n            .catch((err) => console.log(err));\r\n        }\r\n      });\r\n  };\r\n};\r\n\r\nexport const forgotPassword = (\r\n  email: string,\r\n  history: History<LocationState>\r\n) => {\r\n  return () => {\r\n    forgotPasswordApi(email)\r\n      .then((res) => {\r\n        console.log(\"forgotPasswordApi\", res);\r\n        if (res.success) {\r\n          history.push(\"/reset-password\");\r\n          console.log(\"redir\", res);\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const resetPassword = (\r\n  password: string,\r\n  resetToken: string,\r\n  history: History<LocationState>\r\n) => {\r\n  return (dispatch: AppDispatch) => {\r\n    resetPasswordApi(password, resetToken).then((res) => {\r\n      console.log(res);\r\n      if (res.success) {\r\n        history.push(\"/\");\r\n        dispatch({ type: RESET_PASSWORD });\r\n      }\r\n    });\r\n  };\r\n};\r\n","import {\r\n  ConstructorElement,\r\n  DragIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { forwardRef, useCallback } from \"react\";\r\nimport { TIngredient } from \"../../utils/types\";\r\nimport BurgerConstructorItemStyles from \"./burger-constructor-item.module.css\";\r\n\r\nconst BurgerConstructorItem = forwardRef<\r\n  HTMLDivElement,\r\n  IBurgerConstructorItemProps\r\n>(({ ingredient, index, handleDelete }, ref) => {\r\n  const handleClose = useCallback(\r\n    () => handleDelete(index),\r\n    [handleDelete, index]\r\n  );\r\n  return (\r\n    <div\r\n      className={`${BurgerConstructorItemStyles.constructor_item} mb-4 pl-8`}\r\n      ref={ref}\r\n    >\r\n      <div className={BurgerConstructorItemStyles.ingredient_button}>\r\n        <button className={BurgerConstructorItemStyles.drag_button}>\r\n          <DragIcon type=\"primary\" />\r\n        </button>\r\n      </div>\r\n      <ConstructorElement\r\n        text={ingredient.name}\r\n        price={ingredient.price}\r\n        thumbnail={ingredient.image}\r\n        handleClose={handleClose}\r\n      />\r\n    </div>\r\n  );\r\n});\r\n\r\ninterface IBurgerConstructorItemProps {\r\n  ingredient: TIngredient;\r\n  index: number;\r\n  handleDelete: (deleteIndex: number) => void;\r\n}\r\n\r\nexport default BurgerConstructorItem;\r\n","import { useEffect, useRef } from \"react\";\r\nimport { useDrag, useDrop } from \"react-dnd\";\r\nimport { REORDER_CONSTRUCTOR_ITEM } from \"../../services/actions\";\r\nimport BurgerConstructorItem from \"../burger-constructor-item/burger-constructor-item\";\r\nimport { TIngredient, useAppDispatch } from \"../../utils/types\";\r\n\r\ninterface IBurgerConstructorItemDraggableDroppableProps {\r\n  ingredient: TIngredient;\r\n  index: number;\r\n  handleDelete: (deleteIndex: number) => void;\r\n}\r\n\r\nfunction BurgerConstructorItemDraggableDroppable({\r\n  ingredient,\r\n  index,\r\n  handleDelete,\r\n}: IBurgerConstructorItemDraggableDroppableProps) {\r\n  const ref = useRef(null);\r\n  const dispatch = useAppDispatch();\r\n\r\n  const [, dragRef] = useDrag({\r\n    type: \"constructor-item\",\r\n    item: { dragIndex: index },\r\n  });\r\n\r\n  const [, dropTarget] = useDrop({\r\n    accept: \"constructor-item\",\r\n    drop({ dragIndex }: { dragIndex: number }) {\r\n      dispatch({\r\n        type: REORDER_CONSTRUCTOR_ITEM,\r\n        payload: {\r\n          itemIndex: index,\r\n          dragIndex: dragIndex,\r\n        },\r\n      });\r\n    },\r\n  });\r\n\r\n  useEffect(\r\n    function () {\r\n      dragRef(dropTarget(ref));\r\n    },\r\n    [dragRef, dropTarget]\r\n  );\r\n\r\n  return (\r\n    <BurgerConstructorItem\r\n      ingredient={ingredient}\r\n      index={index}\r\n      handleDelete={handleDelete}\r\n      ref={ref}\r\n    />\r\n  );\r\n}\r\n\r\nexport default BurgerConstructorItemDraggableDroppable;\r\n","import {\r\n  Button,\r\n  ConstructorElement,\r\n  CurrencyIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback, useMemo, forwardRef } from \"react\";\r\nimport burgerConstructorStyles from \"./burger-constructor.module.css\";\r\nimport { TIngredient, useAppDispatch, useAppSelector } from \"../../utils/types\";\r\nimport { DELETE_IGREDIENT } from \"../../services/actions\";\r\nimport BurgerConstructorItemDraggableDroppable from \"../burger-constructor-item-draggable-droppable/burger-constructor-item-draggable-droppable\";\r\n\r\nconst BurgerConstructor = forwardRef<HTMLDivElement, IBurgerConstructorProps>(\r\n  ({ onSubmit, ingredients }, ref) => {\r\n    const dispatch = useAppDispatch();\r\n\r\n    const selectedIngredients = useAppSelector(\r\n      (state) => state.burgerConstructor.selectedIngredients\r\n    );\r\n\r\n    const selectedBun = useAppSelector(\r\n      (state) => state.burgerConstructor.selectedBun\r\n    );\r\n\r\n    const orderSum = useMemo(\r\n      () =>\r\n        selectedIngredients.reduce(\r\n          (sum, ingredient) => sum + ingredient.price,\r\n          selectedBun ? selectedBun.price : 0\r\n        ),\r\n      [selectedIngredients, selectedBun]\r\n    );\r\n\r\n    const handleSubmit = useCallback(() => {\r\n      if (!selectedBun) {\r\n        return;\r\n      }\r\n      onSubmit(selectedIngredients.concat(selectedBun));\r\n    }, [onSubmit, selectedIngredients, selectedBun]);\r\n\r\n    const handleDelete = useCallback(\r\n      (deleteIndex) => {\r\n        dispatch({ type: DELETE_IGREDIENT, payload: { deleteIndex } });\r\n      },\r\n      [dispatch]\r\n    );\r\n\r\n    if (ingredients.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <section\r\n        className={`${burgerConstructorStyles.constructor_section} pt-25`}\r\n        ref={ref}\r\n      >\r\n        <div className={burgerConstructorStyles.constructor_list}>\r\n          {selectedBun && (\r\n            <div className=\"pl-9 pr-4\">\r\n              <ConstructorElement\r\n                type=\"top\"\r\n                isLocked\r\n                text={`${selectedBun.name} (верх)`}\r\n                price={selectedBun.price}\r\n                thumbnail={selectedBun.image}\r\n              />\r\n            </div>\r\n          )}\r\n          <div\r\n            className={`${burgerConstructorStyles.constructor_items} ${burgerConstructorStyles.scrollbar}  mt-4 mb-4 pl-4 pr-4`}\r\n          >\r\n            {selectedIngredients.map((ingredient, index) => {\r\n              return (\r\n                <BurgerConstructorItemDraggableDroppable\r\n                  ingredient={ingredient}\r\n                  index={index}\r\n                  handleDelete={handleDelete}\r\n                  key={ingredient.uid}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n          {selectedBun ? (\r\n            <div className=\"pl-9 pr-4\">\r\n              <ConstructorElement\r\n                type=\"bottom\"\r\n                isLocked={true}\r\n                text={`${selectedBun.name} (низ)`}\r\n                price={selectedBun.price}\r\n                thumbnail={selectedBun.image}\r\n              />\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n        <div className={`${burgerConstructorStyles.order} pt-10`}>\r\n          <div className={`${burgerConstructorStyles.order_price} mr-10`}>\r\n            <span className=\"text text_type_digits-medium mr-2\">\r\n              {orderSum}\r\n            </span>\r\n            <CurrencyIcon type=\"primary\" />\r\n          </div>\r\n          <Button type=\"primary\" size=\"large\" onClick={handleSubmit}>\r\n            Оформить заказ\r\n          </Button>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n);\r\n\r\ninterface IBurgerConstructorProps {\r\n  onSubmit: (ingredients: Array<TIngredient>) => void;\r\n  ingredients: Array<TIngredient>;\r\n}\r\n\r\nexport default BurgerConstructor;\r\n","import { useDrop } from \"react-dnd\";\r\nimport BurgerConstructor from \"../burger-constructor/burger-constructor\";\r\nimport { TIngredient, useAppDispatch, useAppSelector } from \"../../utils/types\";\r\nimport { DROP_INGREDIENT } from \"../../services/actions\";\r\nimport { v4 } from \"uuid\";\r\n\r\ninterface IBurgerConstructorDroppableProps {\r\n  onSubmit: (ingredients: Array<TIngredient>) => void;\r\n}\r\n\r\nfunction BurgerConstructorDroppable({\r\n  onSubmit,\r\n}: IBurgerConstructorDroppableProps) {\r\n  const dispatch = useAppDispatch();\r\n  const [, dropTarget] = useDrop({\r\n    accept: \"ingredient\",\r\n    drop({ ingredient }: { ingredient: TIngredient }) {\r\n      dispatch({\r\n        type: DROP_INGREDIENT,\r\n        payload: { ingredient: { ...ingredient, uid: v4() } },\r\n      });\r\n    },\r\n  });\r\n\r\n  const { ingredients } = useAppSelector(({ ingredients: { ingredients } }) => {\r\n    return {\r\n      ingredients,\r\n    };\r\n  });\r\n\r\n  return (\r\n    <BurgerConstructor\r\n      onSubmit={onSubmit}\r\n      ingredients={ingredients}\r\n      ref={dropTarget}\r\n    />\r\n  );\r\n}\r\n\r\nexport default BurgerConstructorDroppable;\r\n","import { useCallback, useEffect } from \"react\";\r\nimport mainSectionStyles from \"./main.module.css\";\r\nimport { OrderDetails } from \"../order-details/order-details\";\r\nimport { Modal } from \"../modal/modal\";\r\nimport BurgerIngredients from \"../burger-ingredients/burger-ingredients\";\r\nimport BurgerConstructorDroppable from \"../burger-constructor-droppable/burger-constructor-droppable\";\r\nimport {\r\n  DELETE_ORDER_DATA,\r\n  getIngredientsApi,\r\n  getOrderNumber,\r\n  SELECT_INGREDIENT,\r\n} from \"../../services/actions\";\r\nimport { TIngredient, useAppDispatch, useAppSelector } from \"../../utils/types\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction Main() {\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  const { order, loggedIn } = useAppSelector(\r\n    ({\r\n      ingredients: { ingredients, selectedIngredient },\r\n      order: { order },\r\n      user: { loggedIn },\r\n    }) => {\r\n      return {\r\n        ingredients,\r\n        selectedIngredient,\r\n        order,\r\n        loggedIn,\r\n      };\r\n    }\r\n  );\r\n\r\n  const handleIngredientDetailsOpen = useCallback(\r\n    (ingredient) => {\r\n      dispatch({\r\n        type: SELECT_INGREDIENT,\r\n        payload: {\r\n          ingredient: ingredient,\r\n        },\r\n      });\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  useEffect(() => {\r\n    dispatch(getIngredientsApi());\r\n  }, [dispatch]);\r\n\r\n  const handleOrderDetailsOpen = useCallback(\r\n    (ingredients) => {\r\n      if (!loggedIn) {\r\n        history.push(\"/login\");\r\n      } else {\r\n        dispatch(\r\n          getOrderNumber(\r\n            ingredients.map((ingredient: TIngredient) => ingredient._id)\r\n          )\r\n        );\r\n      }\r\n    },\r\n    [dispatch, history, loggedIn]\r\n  );\r\n\r\n  const handleOrderDetailsClose = useCallback(() => {\r\n    dispatch({\r\n      type: DELETE_ORDER_DATA,\r\n    });\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <main className={`${mainSectionStyles.main} pb-10`}>\r\n      <BurgerIngredients\r\n        handleIngredientDetailsOpen={handleIngredientDetailsOpen}\r\n      />\r\n      <BurgerConstructorDroppable onSubmit={handleOrderDetailsOpen} />\r\n\r\n      <Modal isVisible={!!order} onClose={handleOrderDetailsClose}>\r\n        {order ? <OrderDetails order={order} /> : null}\r\n      </Modal>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import Header from \"../components/header/header\";\r\nimport Main from \"../components/main/main\";\r\n\r\nexport const Constructor = () => {\r\n  return (\r\n    <>\r\n      <Header />\r\n      <Main />\r\n    </>\r\n  );\r\n};\r\n","import {\r\n  Button,\r\n  Input,\r\n  PasswordInput,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport Header from \"../components/header/header\";\r\nimport { registerUser, USER_REGISTER } from \"../services/actions\";\r\nimport { useAppDispatch, useAppSelector } from \"../utils/types\";\r\nimport styles from \"./pages.module.css\";\r\n\r\nexport const Register = () => {\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  const { email, password, name } = useAppSelector((state) => {\r\n    return {\r\n      email: state.user.email,\r\n      password: state.user.password,\r\n      name: state.user.name,\r\n      loggedIn: state.user.loggedIn,\r\n    };\r\n  });\r\n\r\n  const handleChange = useCallback(\r\n    (evt) => {\r\n      const { name, value } = evt.target;\r\n      dispatch({ type: USER_REGISTER, payload: { [name]: value } });\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const handleSubmit = useCallback(\r\n    (evt) => {\r\n      evt.preventDefault();\r\n      dispatch(registerUser(email, password, name, history));\r\n    },\r\n    [dispatch, email, name, password, history]\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <div className={styles.main}>\r\n        <div className={`${styles.form__block} pt-20`}>\r\n          <h1 className=\"text text_type_main-medium mb-6\">Регистрация</h1>\r\n          <form className={styles.form} onSubmit={handleSubmit}>\r\n            <div className=\"mb-6\">\r\n              <Input\r\n                type={\"text\"}\r\n                placeholder={\"Имя\"}\r\n                onChange={(e) => handleChange(e)}\r\n                value={name}\r\n                name={\"name\"}\r\n                error={false}\r\n                errorText={\"Ошибка\"}\r\n                size={\"default\"}\r\n              />\r\n            </div>\r\n            <div className=\"mb-6\">\r\n              <Input\r\n                type={\"email\"}\r\n                placeholder={\"E-mail\"}\r\n                onChange={(e) => handleChange(e)}\r\n                value={email}\r\n                name={\"email\"}\r\n                error={false}\r\n                errorText={\"Ошибка\"}\r\n                size={\"default\"}\r\n              />\r\n            </div>\r\n            <div className=\"mb-6\">\r\n              <PasswordInput\r\n                onChange={(e) => handleChange(e)}\r\n                value={password}\r\n                name={\"password\"}\r\n              />\r\n            </div>\r\n            <Button type=\"primary\" size=\"medium\">\r\n              Зарегистрироваться\r\n            </Button>\r\n          </form>\r\n          <div>\r\n            <p className=\"text text_type_main-default text_color_inactive mt-20\">\r\n              Уже зарегистрированы?{\" \"}\r\n              <Link to=\"/login\" className={styles.login}>\r\n                Войти\r\n              </Link>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import {\r\n  Button,\r\n  Input,\r\n  PasswordInput,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport Header from \"../components/header/header\";\r\nimport { loginUser, USER_SET_DATA } from \"../services/actions\";\r\nimport { useAppDispatch, useAppSelector } from \"../utils/types\";\r\nimport styles from \"./pages.module.css\";\r\n\r\nexport const Login = () => {\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  const { email, password } = useAppSelector((state) => {\r\n    return {\r\n      email: state.user.email,\r\n      password: state.user.password,\r\n      loggedIn: state.user.loggedIn,\r\n    };\r\n  });\r\n\r\n  const handleChange = useCallback(\r\n    (evt) => {\r\n      const { name, value } = evt.target;\r\n      dispatch({ type: USER_SET_DATA, payload: { [name]: value } });\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const handleSubmit = useCallback(\r\n    (evt) => {\r\n      evt.preventDefault();\r\n      dispatch(loginUser(email, password, history));\r\n    },\r\n    [dispatch, email, password, history]\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <div className={styles.main}>\r\n        <div className={`${styles.form__block} pt-20`}>\r\n          <h1 className=\"text text_type_main-medium mb-6\">Вход</h1>\r\n          <form className={styles.form} onSubmit={handleSubmit}>\r\n            <div className=\"mb-6\">\r\n              <Input\r\n                type={\"email\"}\r\n                placeholder={\"E-mail\"}\r\n                onChange={(e) => handleChange(e)}\r\n                value={email}\r\n                name={\"email\"}\r\n                error={false}\r\n                errorText={\"Ошибка\"}\r\n                size={\"default\"}\r\n              />\r\n            </div>\r\n            <div className=\"mb-6\">\r\n              <PasswordInput\r\n                onChange={(e) => handleChange(e)}\r\n                value={password}\r\n                name={\"password\"}\r\n              />\r\n            </div>\r\n            <Button type=\"primary\" size=\"medium\">\r\n              Войти\r\n            </Button>\r\n          </form>\r\n          <div className={styles.register}>\r\n            <p className=\"text text_type_main-default text_color_inactive mt-20\">\r\n              Вы — новый пользователь?{\" \"}\r\n              <Link to=\"/register\" className={styles.link}>\r\n                Зарегистрироваться\r\n              </Link>\r\n            </p>\r\n          </div>\r\n          <div className={styles.forgot_password}>\r\n            <p className=\"text text_type_main-default text_color_inactive mt-4\">\r\n              Забыли пароль?{\" \"}\r\n              <Link to=\"/forgot-password\" className={styles.link}>\r\n                Восстановить пароль\r\n              </Link>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import {\r\n  Button,\r\n  Input,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport Header from \"../components/header/header\";\r\nimport { forgotPassword, FORGOT_PASSWORD_SET_EMAIL } from \"../services/actions\";\r\nimport { useAppDispatch, useAppSelector } from \"../utils/types\";\r\nimport styles from \"./pages.module.css\";\r\n\r\nexport const ForgotPassword = () => {\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  const { email } = useAppSelector((state) => {\r\n    return { email: state.resetPassword.email };\r\n  });\r\n\r\n  const handleChange = useCallback(\r\n    (evt) => {\r\n      const { name, value } = evt.target;\r\n      dispatch({ type: FORGOT_PASSWORD_SET_EMAIL, payload: { [name]: value } });\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const handleSubmit = useCallback(\r\n    (evt) => {\r\n      evt.preventDefault();\r\n      dispatch(forgotPassword(email, history));\r\n    },\r\n    [dispatch, email, history]\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <div className={styles.main}>\r\n        <div className={`${styles.form__block} pt-20`}>\r\n          <h1 className=\"text text_type_main-medium mb-6\">\r\n            Восстановление пароля\r\n          </h1>\r\n          <form className={styles.form} onSubmit={handleSubmit}>\r\n            <div className=\"mb-6\">\r\n              <Input\r\n                type={\"email\"}\r\n                placeholder={\"Укажите e-mail\"}\r\n                onChange={(evt) => {\r\n                  handleChange(evt);\r\n                }}\r\n                value={email}\r\n                name={\"email\"}\r\n                error={false}\r\n                errorText={\"Ошибка\"}\r\n                size={\"default\"}\r\n              />\r\n            </div>\r\n            <Button type=\"primary\" size=\"medium\">\r\n              Восстановить\r\n            </Button>\r\n          </form>\r\n          <div>\r\n            <p className=\"text text_type_main-default text_color_inactive mt-20\">\r\n              Вспомнили пароль?{\" \"}\r\n              <Link to=\"/login\" className={styles.link}>\r\n                Войти\r\n              </Link>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import {\r\n  Button,\r\n  Input,\r\n  PasswordInput,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport Header from \"../components/header/header\";\r\nimport { resetPassword } from \"../services/actions\";\r\nimport { useAppDispatch, useAppSelector } from \"../utils/types\";\r\nimport styles from \"./pages.module.css\";\r\n\r\nexport const ResetPassword = () => {\r\n  const [resetPasswordValues, setResetPasswordValues] = useState<{\r\n    [key: string]: string;\r\n  }>({\r\n    password: \"\",\r\n    resetToken: \"\",\r\n  });\r\n\r\n  const { email } = useAppSelector((state) => {\r\n    return { email: state.resetPassword.email };\r\n  });\r\n\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  const handleChange = useCallback((evt) => {\r\n    const { name, value } = evt.target;\r\n    setResetPasswordValues({ [name]: value });\r\n  }, []);\r\n\r\n  const handleSubmit = useCallback(\r\n    (evt) => {\r\n      evt.preventDefault();\r\n      dispatch(\r\n        resetPassword(\r\n          resetPasswordValues.password,\r\n          resetPasswordValues.resetToken,\r\n          history\r\n        )\r\n      );\r\n    },\r\n    [dispatch, history, resetPasswordValues]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!email) {\r\n      history.push(\"/forgot-password\");\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <div className={styles.main}>\r\n        <div className={`${styles.form__block} pt-20`}>\r\n          <h1 className=\"text text_type_main-medium mb-6\">\r\n            Восстановление пароля\r\n          </h1>\r\n          <form className={styles.form} onSubmit={handleSubmit}>\r\n            <div className=\"mb-6\">\r\n              <PasswordInput\r\n                onChange={(evt) => handleChange(evt)}\r\n                value={resetPasswordValues.password}\r\n                name={\"password\"}\r\n              />\r\n            </div>\r\n            <div className=\"mb-6\">\r\n              <Input\r\n                type={\"text\"}\r\n                placeholder={\"Введите код из письма\"}\r\n                onChange={(evt) => handleChange(evt)}\r\n                value={resetPasswordValues.resetToken}\r\n                name={\"code\"}\r\n                error={false}\r\n                errorText={\"Ошибка\"}\r\n                size={\"default\"}\r\n              />\r\n            </div>\r\n            <Button type=\"primary\" size=\"medium\">\r\n              Сохранить\r\n            </Button>\r\n          </form>\r\n          <p className=\"text text_type_main-default text_color_inactive mt-20\">\r\n            Вспомнили пароль?{\" \"}\r\n            <Link to=\"/login\" className={styles.link}>\r\n              Войти\r\n            </Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import {\r\n  Button,\r\n  Input,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { NavLink, useHistory } from \"react-router-dom\";\r\nimport Header from \"../components/header/header\";\r\nimport { getUserInfo, logoutUser, setUserInfo } from \"../services/actions\";\r\nimport { useAppDispatch, useAppSelector } from \"../utils/types\";\r\nimport { getCookie } from \"../utils/utils\";\r\nimport styles from \"./profile.module.css\";\r\n\r\nexport const Profile = () => {\r\n  const { name, email, password } = useAppSelector((state) => {\r\n    return {\r\n      name: state.user.name,\r\n      email: state.user.email,\r\n      password: state.user.password,\r\n    };\r\n  });\r\n  const [formvalue, setFormvalue] = useState({\r\n    username: name,\r\n    useremail: email,\r\n    userpassword: password,\r\n  });\r\n\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    dispatch(getUserInfo(getCookie(\"authToken\")));\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    setFormvalue((prevstate) => ({\r\n      ...prevstate,\r\n      username: name || \"\",\r\n      useremail: email || \"\",\r\n    }));\r\n  }, [email, name]);\r\n\r\n  const handleChange = useCallback((evt) => {\r\n    setFormvalue((prevstate) => ({\r\n      ...prevstate,\r\n      [evt.target.name]: evt.target.value,\r\n    }));\r\n  }, []);\r\n\r\n  const handleSubmit = useCallback(\r\n    (evt) => {\r\n      evt.preventDefault();\r\n      dispatch(\r\n        setUserInfo(\r\n          getCookie(\"authToken\"),\r\n          formvalue.username,\r\n          formvalue.useremail,\r\n          formvalue.userpassword\r\n        )\r\n      );\r\n    },\r\n    [dispatch, formvalue]\r\n  );\r\n\r\n  const handleCancel = () => {\r\n    setFormvalue({\r\n      username: name,\r\n      useremail: email,\r\n      userpassword: password,\r\n    });\r\n  };\r\n\r\n  const isFormChanged =\r\n    formvalue.username !== name ||\r\n    formvalue.useremail !== email ||\r\n    formvalue.userpassword !== password;\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <div className={`${styles.main} pt-20`}>\r\n        <nav className={`${styles.nav} mr-15`}>\r\n          <NavLink\r\n            to=\"/profile\"\r\n            activeClassName={styles.active_link}\r\n            className={`${styles.navlink} text text_type_main-medium text_color_inactive mb-6`}\r\n          >\r\n            Профиль\r\n          </NavLink>\r\n          <NavLink\r\n            to=\"/\"\r\n            className={`${styles.navlink} text text_type_main-medium text_color_inactive mb-6`}\r\n          >\r\n            История заказов\r\n          </NavLink>\r\n          <button\r\n            className={`${styles.logout} text text_type_main-medium text_color_inactive mb-6`}\r\n            onClick={() => {\r\n              if (localStorage.getItem(\"refreshToken\") == null) {\r\n                return;\r\n              }\r\n              dispatch(\r\n                logoutUser(localStorage.getItem(\"refreshToken\"), history)\r\n              );\r\n            }}\r\n          >\r\n            Выход\r\n          </button>\r\n          <p\r\n            className={`${styles.nav_text} text text_type_main-default text_color_inactive`}\r\n          >\r\n            В этом разделе вы можете изменить свои персональные данные\r\n          </p>\r\n        </nav>\r\n        <form className={styles.form} onSubmit={handleSubmit}>\r\n          <div className=\"mb-6\">\r\n            <Input\r\n              type={\"text\"}\r\n              placeholder={\"Имя\"}\r\n              onChange={(evt) => {\r\n                handleChange(evt);\r\n              }}\r\n              icon={\"EditIcon\"}\r\n              value={formvalue.username}\r\n              name={\"username\"}\r\n              error={false}\r\n              errorText={\"Ошибка\"}\r\n              size={\"default\"}\r\n            />\r\n          </div>\r\n          <div className=\"mb-6\">\r\n            <Input\r\n              type={\"text\"}\r\n              placeholder={\"Логин\"}\r\n              onChange={(evt) => {\r\n                handleChange(evt);\r\n              }}\r\n              icon={\"EditIcon\"}\r\n              value={formvalue.useremail}\r\n              name={\"useremail\"}\r\n              error={false}\r\n              errorText=\"Ошибка\"\r\n              size={\"default\"}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Input\r\n              type={\"password\"}\r\n              placeholder={\"Пароль\"}\r\n              onChange={(evt) => {\r\n                handleChange(evt);\r\n              }}\r\n              icon={\"EditIcon\"}\r\n              value={formvalue.userpassword}\r\n              name={\"userpassword\"}\r\n              error={false}\r\n              errorText={\"Ошибка\"}\r\n              size={\"default\"}\r\n            />\r\n          </div>\r\n          {isFormChanged && (\r\n            <div className=\"mt-6\">\r\n              <Button type=\"primary\" size=\"small\">\r\n                Сохранить\r\n              </Button>\r\n              <Button\r\n                type=\"secondary\"\r\n                size=\"small\"\r\n                onClick={() => {\r\n                  handleCancel();\r\n                }}\r\n              >\r\n                Отмена\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import { ComponentType } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nfunction ProtectedRoute({\r\n  component: Component,\r\n  path,\r\n  loggedIn,\r\n  ...props\r\n}: {\r\n  loggedIn: boolean;\r\n  path: string;\r\n  component: ComponentType;\r\n}) {\r\n  return (\r\n    <Route path={path}>\r\n      {() => {\r\n        return loggedIn ? <Component {...props} /> : <Redirect to=\"/login\" />;\r\n      }}\r\n    </Route>\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","import { TIngredient } from \"../../utils/types\";\r\nimport ingredientDetailsStyles from \"./ingredient-details.module.css\";\r\n\r\nexport function IngredientDetails({ ingredient }: { ingredient: TIngredient }) {\r\n  const {\r\n    image_large: image,\r\n    name,\r\n    calories,\r\n    proteins,\r\n    fat,\r\n    carbohydrates,\r\n  } = ingredient || {};\r\n  return (\r\n    <div className={`${ingredientDetailsStyles.details} pt-10 pb-15`}>\r\n      <div className={ingredientDetailsStyles.content}>\r\n        <img className={ingredientDetailsStyles.image} src={image} alt={name} />\r\n        <p className=\"text text_type_main-medium mt-4 mb-8\">{name}</p>\r\n        <ul className={ingredientDetailsStyles.list}>\r\n          <li>\r\n            <p className=\"text text_type_main-default text_color_inactive mb-2\">\r\n              Калории,ккал\r\n            </p>\r\n            <span className=\"text text_type_digits-default text_color_inactive\">\r\n              {calories}\r\n            </span>\r\n          </li>\r\n          <li>\r\n            <p className=\"text text_type_main-default text_color_inactive mb-2\">\r\n              Белки, г\r\n            </p>\r\n            <span className=\"text text_type_digits-default text_color_inactive\">\r\n              {proteins}\r\n            </span>\r\n          </li>\r\n          <li>\r\n            <p className=\"text text_type_main-default text_color_inactive mb-2\">\r\n              Жиры, г\r\n            </p>\r\n            <span className=\"text text_type_digits-default text_color_inactive\">\r\n              {fat}\r\n            </span>\r\n          </li>\r\n          <li>\r\n            <p className=\"text text_type_main-default text_color_inactive mb-2\">\r\n              Углеводы, г\r\n            </p>\r\n            <span className=\"text text_type_digits-default text_color_inactive\">\r\n              {carbohydrates}\r\n            </span>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useParams } from \"react-router-dom\";\r\nimport { useEffect } from \"react\";\r\nimport { getIngredientsApi } from \"../../services/actions\";\r\nimport { useAppDispatch, useAppSelector } from \"../../utils/types\";\r\nimport { IngredientDetails } from \"./ingredient-details\";\r\n\r\nexport function IngredientDetailsPage() {\r\n  const { id } = useParams<{ id: string }>();\r\n  const dispatch = useAppDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(getIngredientsApi());\r\n  }, [dispatch]);\r\n\r\n  const { ingredients } = useAppSelector((state) => {\r\n    return {\r\n      ingredients: state.ingredients.ingredients,\r\n    };\r\n  });\r\n\r\n  const ingredient = ingredients.find((ingredient) => {\r\n    return ingredient._id === id;\r\n  });\r\n\r\n  return ingredient ? <IngredientDetails ingredient={ingredient} /> : null;\r\n}\r\n","import { useCallback } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { DELETE_SELECTED_INGREDIENT_DATA } from \"../../services/actions\";\r\nimport { useAppDispatch, useAppSelector } from \"../../utils/types\";\r\nimport { IngredientDetails } from \"../ingredient-details/ingredient-details\";\r\nimport { Modal } from \"../modal/modal\";\r\n\r\nexport function IngredientDetailsModal() {\r\n  const history = useHistory();\r\n  const dispatch = useAppDispatch();\r\n  const { selectedIngredient } = useAppSelector(\r\n    ({ ingredients: { ingredients, selectedIngredient } }) => {\r\n      return {\r\n        ingredients,\r\n        selectedIngredient,\r\n      };\r\n    }\r\n  );\r\n  const handleIngredientDetailsClose = useCallback(() => {\r\n    dispatch({\r\n      type: DELETE_SELECTED_INGREDIENT_DATA,\r\n    });\r\n    history.goBack();\r\n  }, [dispatch, history]);\r\n  return (\r\n    <Modal\r\n      isVisible={!!selectedIngredient}\r\n      onClose={handleIngredientDetailsClose}\r\n      title=\"Детали ингредиента\"\r\n    >\r\n      {selectedIngredient && (\r\n        <IngredientDetails ingredient={selectedIngredient} />\r\n      )}\r\n    </Modal>\r\n  );\r\n}\r\n","import { ComponentType } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nfunction PublicRoute({\r\n  component: Component,\r\n  path,\r\n  loggedIn,\r\n  ...props\r\n}: {\r\n  loggedIn: boolean;\r\n  path: string;\r\n  component: ComponentType;\r\n}) {\r\n  return (\r\n    <Route path={path}>\r\n      {() => {\r\n        return !loggedIn ? <Component {...props} /> : <Redirect to=\"/\" />;\r\n      }}\r\n    </Route>\r\n  );\r\n}\r\n\r\nexport default PublicRoute;\r\n","import appstyles from \"../app/app.module.css\";\r\nimport { Route, Switch, useLocation } from \"react-router-dom\";\r\nimport { Location } from \"history\";\r\nimport { Constructor } from \"../../pages/constructor\";\r\nimport { Register } from \"../../pages/register\";\r\nimport { Login } from \"../../pages/login\";\r\nimport { ForgotPassword } from \"../../pages/forgot-password\";\r\nimport { ResetPassword } from \"../../pages/reset-password\";\r\nimport { Profile } from \"../../pages/profile\";\r\nimport { useAppSelector } from \"../../utils/types\";\r\nimport ProtectedRoute from \"../protected-route/protected-route\";\r\nimport { IngredientDetailsPage } from \"../ingredient-details/ingredient-details-page\";\r\nimport { IngredientDetailsModal } from \"../ingredient-details-modal/ingredient-details-modal\";\r\nimport PublicRoute from \"../public-route/public-route\";\r\n\r\nexport function AppRoutes() {\r\n  const { loggedIn } = useAppSelector((state) => {\r\n    return {\r\n      loggedIn: state.user.loggedIn,\r\n    };\r\n  });\r\n  let location = useLocation<{ background: Location }>();\r\n\r\n  // This piece of state is set when one of the\r\n  // gallery links is clicked. The `background` state\r\n  // is the location that we were at when one of\r\n  // the gallery links was clicked. If it's there,\r\n  // use it as the location for the <Switch> so\r\n  // we show the gallery in the background, behind\r\n  // the modal.\r\n  let background = location.state && location.state.background;\r\n  return (\r\n    <div className={appstyles.page}>\r\n      <Switch location={background || location}>\r\n        <Route exact path=\"/\">\r\n          <Constructor />\r\n        </Route>\r\n        <PublicRoute\r\n          path=\"/register\"\r\n          component={Register}\r\n          loggedIn={loggedIn}\r\n        />\r\n        <PublicRoute path=\"/login\" component={Login} loggedIn={loggedIn} />\r\n        <PublicRoute\r\n          path=\"/forgot-password\"\r\n          component={ForgotPassword}\r\n          loggedIn={loggedIn}\r\n        />\r\n        <PublicRoute\r\n          path=\"/reset-password\"\r\n          component={ResetPassword}\r\n          loggedIn={loggedIn}\r\n        />\r\n        <ProtectedRoute\r\n          path=\"/profile\"\r\n          loggedIn={loggedIn}\r\n          component={Profile}\r\n        />\r\n        <ProtectedRoute\r\n          loggedIn={loggedIn}\r\n          path=\"/ingredients/:id\"\r\n          component={IngredientDetailsPage}\r\n        />\r\n      </Switch>\r\n      {/* Show the modal when a background page is set */}\r\n      {background && (\r\n        <Route path=\"/ingredients/:id\" children={<IngredientDetailsModal />} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { BrowserRouter } from \"react-router-dom\";\r\nimport { AppRoutes } from \"../app-routes/app-routes\";\r\n\r\nfunction App() {\r\n  return (\r\n    <BrowserRouter>\r\n      <AppRoutes />\r\n    </BrowserRouter>\r\n  );\r\n}\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { composeWithDevToolsDevelopmentOnly } from \"@redux-devtools/extension\";\r\n\r\nexport const composeEnhancers = composeWithDevToolsDevelopmentOnly;\r\n","import { Reducer } from \"redux\";\r\nimport { TIngredient, TOrder, TSelectedIngredient } from \"../utils/types\";\r\nimport {\r\n  DELETE_ORDER_DATA,\r\n  DELETE_SELECTED_INGREDIENT_DATA,\r\n  GET_INGREDIENTS_FAILED,\r\n  GET_INGREDIENTS_REQUEST,\r\n  GET_INGREDIENTS_SUCCESS,\r\n  GET_ORDER_NUMBER_FAILED,\r\n  GET_ORDER_NUMBER_REQUEST,\r\n  GET_ORDER_NUMBER_SUCCESS,\r\n  SELECT_INGREDIENT,\r\n  DROP_INGREDIENT,\r\n  DELETE_IGREDIENT,\r\n  REORDER_CONSTRUCTOR_ITEM,\r\n  TActions,\r\n  USER_REGISTER,\r\n  USER_LOGOUT,\r\n  GET_USER_INFO,\r\n  SET_USER_INFO,\r\n  USER_SET_DATA,\r\n  USER_LOGIN,\r\n  FORGOT_PASSWORD_SET_EMAIL,\r\n  RESET_PASSWORD,\r\n} from \"./actions\";\r\n\r\n// ingredients reducer\r\n\r\ntype TIngredientsState = {\r\n  ingredients: TIngredient[];\r\n  ingredientsRequest: boolean;\r\n  ingredientsFailed: boolean;\r\n  selectedIngredient: TIngredient | null;\r\n};\r\n\r\nconst ingredientsInitialState: TIngredientsState = {\r\n  ingredients: [],\r\n  ingredientsRequest: false,\r\n  ingredientsFailed: false,\r\n  selectedIngredient: null,\r\n};\r\n\r\nexport const ingredientsReducer: Reducer<TIngredientsState, TActions> = (\r\n  state = ingredientsInitialState,\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case GET_INGREDIENTS_REQUEST: {\r\n      return {\r\n        ...state,\r\n        ingredientsFailed: false,\r\n        ingredientsRequest: true,\r\n      };\r\n    }\r\n    case GET_INGREDIENTS_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        ingredientsFailed: false,\r\n        ingredientsRequest: false,\r\n        ingredients: action.payload.ingredients,\r\n      };\r\n    }\r\n    case GET_INGREDIENTS_FAILED: {\r\n      return {\r\n        ...ingredientsInitialState,\r\n        ingredientsFailed: true,\r\n      };\r\n    }\r\n    case SELECT_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        selectedIngredient: action.payload.ingredient,\r\n      };\r\n    }\r\n    case DELETE_SELECTED_INGREDIENT_DATA: {\r\n      return {\r\n        ...state,\r\n        selectedIngredient: null,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n\r\n// burger constructor reducer\r\n\r\ntype TBurgerConstructorState = {\r\n  selectedIngredients: TSelectedIngredient[];\r\n  selectedBun: TSelectedIngredient | null;\r\n};\r\n\r\nconst burgerConstructorInitialState: TBurgerConstructorState = {\r\n  selectedIngredients: [],\r\n  selectedBun: null,\r\n};\r\n\r\nexport const burgerConstructorReducer: Reducer<\r\n  TBurgerConstructorState,\r\n  TActions\r\n> = (state = burgerConstructorInitialState, action) => {\r\n  switch (action.type) {\r\n    case GET_ORDER_NUMBER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        selectedIngredients: [],\r\n        selectedBun: null,\r\n      };\r\n    }\r\n    case DROP_INGREDIENT: {\r\n      const { ingredient } = action.payload;\r\n      if (ingredient.type === \"bun\") {\r\n        return {\r\n          ...state,\r\n          selectedBun: ingredient,\r\n        };\r\n      }\r\n      return {\r\n        ...state,\r\n        selectedIngredients: [...state.selectedIngredients, ingredient],\r\n      };\r\n    }\r\n    case DELETE_IGREDIENT: {\r\n      return {\r\n        ...state,\r\n        selectedIngredients: state.selectedIngredients.filter(\r\n          (item, index) => index !== action.payload.deleteIndex\r\n        ),\r\n      };\r\n    }\r\n    case REORDER_CONSTRUCTOR_ITEM: {\r\n      const { dragIndex, itemIndex } = action.payload;\r\n      const constructorItems = [...state.selectedIngredients];\r\n      let draggingItemIndex = constructorItems[dragIndex];\r\n      constructorItems[dragIndex] = constructorItems[itemIndex];\r\n      constructorItems[itemIndex] = draggingItemIndex;\r\n      return {\r\n        ...state,\r\n        selectedIngredients: constructorItems,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n\r\n// order reducer\r\n\r\ntype TOrderState = {\r\n  order: TOrder | null;\r\n  orderNumberRequest: boolean;\r\n  orderNumberFailed: boolean;\r\n};\r\n\r\nconst orderInitialState: TOrderState = {\r\n  order: null,\r\n  orderNumberRequest: false,\r\n  orderNumberFailed: false,\r\n};\r\n\r\nexport const orderReducer: Reducer<TOrderState> = (\r\n  state = orderInitialState,\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case GET_ORDER_NUMBER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        orderNumberRequest: true,\r\n      };\r\n    }\r\n    case GET_ORDER_NUMBER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        orderNumberRequest: false,\r\n        orderNumberFailed: false,\r\n        order: action.payload.order,\r\n      };\r\n    }\r\n    case GET_ORDER_NUMBER_FAILED: {\r\n      return {\r\n        ...orderInitialState,\r\n        orderNumberFailed: true,\r\n      };\r\n    }\r\n    case DELETE_ORDER_DATA: {\r\n      return {\r\n        ...state,\r\n        order: null,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\ntype TUserState = {\r\n  email: string;\r\n  password: string;\r\n  name: string;\r\n  loggedIn: boolean;\r\n};\r\n\r\nconst userInitialState: TUserState = {\r\n  email: \"\",\r\n  password: \"\",\r\n  name: \"\",\r\n  loggedIn: !!localStorage.getItem(\"refreshToken\"),\r\n};\r\n\r\nexport const userReducer: Reducer<TUserState> = (\r\n  state = userInitialState,\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case USER_REGISTER: {\r\n      return {\r\n        ...state,\r\n        email: action.payload.email ?? state.email,\r\n        password: action.payload.password ?? state.password,\r\n        name: action.payload.name ?? state.name,\r\n      };\r\n    }\r\n    case USER_SET_DATA: {\r\n      return {\r\n        ...state,\r\n        email: action.payload.email ?? state.email,\r\n        password: action.payload.password ?? state.password,\r\n      };\r\n    }\r\n    case USER_LOGIN: {\r\n      return {\r\n        ...state,\r\n        loggedIn: true,\r\n      };\r\n    }\r\n    case USER_LOGOUT: {\r\n      return {\r\n        ...state,\r\n        email: \"\",\r\n        password: \"\",\r\n        loggedIn: false,\r\n      };\r\n    }\r\n    case GET_USER_INFO: {\r\n      return {\r\n        ...state,\r\n        email: action.payload.email ?? state.email,\r\n        name: action.payload.name ?? state.name,\r\n      };\r\n    }\r\n    case SET_USER_INFO: {\r\n      return {\r\n        ...state,\r\n        email: action.payload.email ?? state.email,\r\n        name: action.payload.name ?? state.name,\r\n        password: action.payload.password ?? state.password,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\ntype TResetPasswordState = {\r\n  email: string;\r\n};\r\n\r\nconst resetPasswordInitialState: TResetPasswordState = {\r\n  email: \"\",\r\n};\r\n\r\nexport const resetPasswordReducer: Reducer<TResetPasswordState> = (\r\n  state = resetPasswordInitialState,\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case FORGOT_PASSWORD_SET_EMAIL: {\r\n      return {\r\n        ...state,\r\n        email: action.payload.email,\r\n      };\r\n    }\r\n    case RESET_PASSWORD: {\r\n      return {\r\n        ...state,\r\n        email: \"\",\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from \"redux\";\r\nimport {\r\n  orderReducer,\r\n  ingredientsReducer,\r\n  burgerConstructorReducer,\r\n  userReducer,\r\n  resetPasswordReducer,\r\n} from \"./reducers\";\r\n\r\nexport const rootReducer = combineReducers({\r\n  order: orderReducer,\r\n  ingredients: ingredientsReducer,\r\n  burgerConstructor: burgerConstructorReducer,\r\n  user: userReducer,\r\n  resetPassword: resetPasswordReducer,\r\n});\r\n","import { composeEnhancers } from \"../redux-devtools\";\r\nimport thunk from \"redux-thunk\";\r\nimport { applyMiddleware, createStore } from \"redux\";\r\nimport { rootReducer } from \"../services/root-reducer\";\r\n\r\nconst enhancer = composeEnhancers(applyMiddleware(thunk));\r\nexport const store = createStore(rootReducer, enhancer);\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./components/app/app\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Provider } from \"react-redux\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport { store } from \"./utils/store\";\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <DndProvider backend={HTML5Backend}>\r\n        <App />\r\n      </DndProvider>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header_header__2PCJV\",\"nav\":\"header_nav__Yn7D9\",\"navLink\":\"header_navLink__2qrHS\",\"active_link\":\"header_active_link__1bgGB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"profile_main__242OX\",\"nav\":\"profile_nav__B_z69\",\"active_link\":\"profile_active_link__MU5sa\",\"navlink\":\"profile_navlink__1MZdx\",\"logout\":\"profile_logout__3chQM\",\"form\":\"profile_form__3ORnl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"constructor_section\":\"burger-constructor_constructor_section__3FdfH\",\"constructor_list\":\"burger-constructor_constructor_list__2mBcy\",\"constructor_items\":\"burger-constructor_constructor_items__2t2yl\",\"order\":\"burger-constructor_order__SsnH4\",\"scrollbox\":\"burger-constructor_scrollbox__3Z23P\",\"scrollbar\":\"burger-constructor_scrollbar__-c9tN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients_section\":\"burger-ingredients_ingredients_section__l8mYY\",\"ingredients_tabs\":\"burger-ingredients_ingredients_tabs__1zFeW\",\"scrollbox\":\"burger-ingredients_scrollbox__2apTV\",\"scrollbar\":\"burger-ingredients_scrollbar__2rVSV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"details\":\"ingredient-details_details__28kCX\",\"content\":\"ingredient-details_content__1TZrm\",\"image\":\"ingredient-details_image__3EkJL\",\"list\":\"ingredient-details_list__3jN0U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"details\":\"order-details_details__2Chva\",\"checkmark\":\"order-details_checkmark__3mkme\",\"digits\":\"order-details_digits__33cjV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__-GJUR\",\"header\":\"modal_header__2r55q\",\"close\":\"modal_close__VSo9S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients_list\":\"ingredients-section_ingredients_list__1mz_n\",\"ingredients_list_title\":\"ingredients-section_ingredients_list_title__2YZ9h\",\"cards_box\":\"ingredients-section_cards_box__1j8gA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"constructor_item\":\"burger-constructor-item_constructor_item__N6dYK\",\"ingredient_button\":\"burger-constructor-item_ingredient_button__1wYRz\",\"drag_button\":\"burger-constructor-item_drag_button__2w73P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient_card\":\"ingredient-card_ingredient_card__1DunG\",\"price\":\"ingredient-card_price__zyJet\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form__block\":\"pages_form__block__2hBXl\",\"form\":\"pages_form__8Bp6z\",\"login\":\"pages_login__2A9qH\"};"],"sourceRoot":""}