{"version":3,"sources":["components/main/main.module.css","components/modal-overlay/modal-overlay.module.css","images/check.svg","components/order-details/order-details.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","utils/types.ts","components/ingredient-card-link/ingredient-card-link.tsx","components/ingredient-card/ingredient-card.tsx","components/ingredient-card-draggable/ingredient-card-draggable.tsx","components/ingredients-section/ingredients-section.tsx","components/burger-ingredients/burger-ingredients.tsx","components/burger-constructor-item/burger-constructor-item.tsx","services/actions/burger-constructor-actions.tsx","components/burger-constructor-item-draggable-droppable/burger-constructor-item-draggable-droppable.tsx","components/burger-constructor/burger-constructor.tsx","components/burger-constructor-droppable/burger-constructor-droppable.tsx","utils/api.ts","services/actions/ingredients-actions.tsx","services/actions/order-actions.tsx","components/main/main.tsx","pages/constructor.tsx","utils/utils.ts","services/actions/user-actions.tsx","pages/register.tsx","pages/login.tsx","services/actions/reset-password-actions.tsx","pages/forgot-password.tsx","pages/reset-password.tsx","pages/profile.tsx","components/protected-route/protected-route.tsx","components/ingredient-details/ingredient-details.tsx","components/ingredient-details/ingredient-details-page.tsx","components/ingredient-details-modal/ingredient-details-modal.tsx","components/public-route/public-route.tsx","pages/feed.tsx","components/header/header.tsx","components/app-routes/app-routes.tsx","components/app/app.tsx","reportWebVitals.ts","redux-devtools.ts","services/reducers/burger-constructor-reducer.tsx","services/reducers/ingredients-reducer.tsx","services/reducers/order-reducer.tsx","services/reducers/reset-password-reducer.tsx","services/reducers/user-reducer.tsx","services/root-reducer.ts","utils/store.ts","index.tsx","components/header/header.module.css","pages/profile.module.css","components/burger-constructor/burger-constructor.module.css","components/burger-ingredients/burger-ingredients.module.css","components/ingredient-details/ingredient-details.module.css","components/order-details/order-details.module.css","components/modal/modal.module.css","components/ingredients-section/ingredients-section.module.css","components/burger-constructor-item/burger-constructor-item.module.css","components/ingredient-card/ingredient-card.module.css","pages/pages.module.css","components/app/app.module.css"],"names":["module","exports","OrderDetails","order","className","orderDetailsStyles","details","digits","number","checkmark","src","checkIcon","alt","ModalOverlay","onClick","modalOverlayStyles","overlay","Modal","children","title","onClose","isVisible","useEffect","listener","event","key","document","addEventListener","removeEventListener","createPortal","modalStyles","modal","header","close","type","querySelector","useAppDispatch","useDispatch","useAppSelector","useSelector","IngredientCardLink","ingredient","innerRef","location","useLocation","to","pathname","_id","state","background","IngredientCard","forwardRef","ref","onIngredientClick","count","handleSectionClick","useCallback","ingredientCard","ingredient_card","size","image","name","price","IngredientCardDraggable","useDrag","item","dragRef","IngredientsSection","ingredients","counts","ingredientsSectionStyles","ingredients_list","ingredients_list_title","cards_box","filter","map","BurgerIngredients","handleIngredientDetailsOpen","burgerConstructor","selectedIngredients","selectedBun","useMemo","reduce","acc","selectedIngredient","length","useState","current","setCurrent","bunRef","useRef","sauceRef","mainRef","handleBunTabClick","handleSauceTabClick","handleMainTabClick","handleScroll","evt","scrollPosition","target","scrollTop","saucePosition","offsetTop","mainPosition","burgerIngredientsStyles","ingredients_section","ingredients_tabs","value","active","scrollbox","scrollbar","onScroll","BurgerConstructorItem","index","handleDelete","handleClose","BurgerConstructorItemStyles","constructor_item","ingredient_button","drag_button","text","thumbnail","DELETE_IGREDIENT","DROP_INGREDIENT","GET_ORDER_NUMBER_SUCCESS","REORDER_CONSTRUCTOR_ITEM","BurgerConstructorItemDraggableDroppable","dispatch","dragIndex","useDrop","accept","drop","payload","itemIndex","dropTarget","BurgerConstructor","onSubmit","orderSum","sum","handleSubmit","concat","deleteIndex","burgerConstructorStyles","constructor_section","constructor_list","isLocked","constructor_items","uid","order_price","BurgerConstructorDroppable","v4","API_URL","checkResponse","res","ok","json","then","data","Promise","reject","message","status","refreshToken","fetch","method","headers","body","JSON","stringify","token","DELETE_SELECTED_INGREDIENT_DATA","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_FAILED","SELECT_INGREDIENT","getIngredientsApi","success","catch","err","console","log","DELETE_ORDER_DATA","GET_ORDER_NUMBER_REQUEST","GET_ORDER_NUMBER_FAILED","getOrderNumber","ingredientIds","sendOrder","Main","history","useHistory","loggedIn","user","handleOrderDetailsOpen","push","handleOrderDetailsClose","mainSectionStyles","main","Constructor","getCookie","matches","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","props","exp","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","USER_REGISTER","USER_LOGIN","USER_SET_DATA","USER_LOGOUT","GET_USER_INFO","SET_USER_INFO","registerUser","email","password","register","loginUser","login","accessToken","authToken","split","localStorage","setItem","logoutUser","logout","removeItem","getUserInfo","Authorization","getUserInfoApi","refreshingToken","getItem","setUserInfo","setUserInfoApi","Register","handleChange","preventDefault","styles","form__block","form","placeholder","onChange","e","error","errorText","Login","link","forgot_password","FORGOT_PASSWORD_SET_EMAIL","RESET_PASSWORD","resetPassword","resetToken","resetPasswordApi","forgotPassword","forgotPasswordApi","ForgotPassword","ResetPassword","resetPasswordValues","setResetPasswordValues","Profile","username","useremail","userpassword","formvalue","setFormvalue","prevstate","isFormChanged","nav","activeClassName","active_link","navlink","nav_text","icon","ProtectedRoute","from","IngredientDetails","image_large","calories","proteins","fat","carbohydrates","ingredientDetailsStyles","content","list","IngredientDetailsPage","id","useParams","find","IngredientDetailsModal","handleIngredientDetailsClose","goBack","PublicRoute","Feed","Header","exact","navLink","auth","AppRoutes","appstyles","page","path","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","composeEnhancers","composeWithDevToolsDevelopmentOnly","burgerConstructorInitialState","ingredientsInitialState","ingredientsRequest","ingredientsFailed","orderInitialState","orderNumberRequest","orderNumberFailed","resetPasswordInitialState","userInitialState","rootReducer","combineReducers","action","constructorItems","draggingItemIndex","enhancer","applyMiddleware","thunk","store","createStore","ReactDOM","render","StrictMode","DndProvider","backend","HTML5Backend","getElementById"],"mappings":"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","file":"static/js/main.f703533d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"main_main__OFmn0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__3PHOs\"};","export default __webpack_public_path__ + \"static/media/check.2022ce2b.svg\";","import orderDetailsStyles from \"./order-details.module.css\";\r\nimport checkIcon from \"../../images/check.svg\";\r\nimport { TOrder } from \"../../utils/types\";\r\n\r\ninterface OrderDetailsProps {\r\n  order: TOrder;\r\n}\r\n\r\nexport function OrderDetails({ order }: OrderDetailsProps) {\r\n  if (!order) {\r\n    return null;\r\n  }\r\n  return (\r\n    <div className={`${orderDetailsStyles.details} pb-30`}>\r\n      <p\r\n        className={`${orderDetailsStyles.digits} text text_type_digits-large mb-8`}\r\n      >\r\n        {order.number}\r\n      </p>\r\n      <p className=\"text text_type_main-medium\">идентификатор заказа</p>\r\n      <img\r\n        className={`${orderDetailsStyles.checkmark} mt-15 mb-15`}\r\n        src={checkIcon}\r\n        alt=\"order-details\"\r\n      />\r\n      <p className=\"text text_type_main-default mb-2\">\r\n        Ваш заказ начали готовить\r\n      </p>\r\n      <p className=\"text text_type_main-default text_color_inactive\">\r\n        Дождитесь готовности на орбитальной станции\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n","import modalOverlayStyles from \"./modal-overlay.module.css\";\r\n\r\ninterface IModalOverlayProps {\r\n  onClick: () => void;\r\n}\r\n\r\nexport function ModalOverlay({ onClick }: IModalOverlayProps) {\r\n  return <div className={modalOverlayStyles.overlay} onClick={onClick} />;\r\n}\r\n","import { FunctionComponent, useEffect } from \"react\";\r\nimport modalStyles from \"./modal.module.css\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { ModalOverlay } from \"../modal-overlay/modal-overlay\";\r\nimport { CloseIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\ninterface IModalProps {\r\n  title?: string;\r\n  onClose: () => void;\r\n  isVisible: boolean;\r\n}\r\n\r\nexport const Modal: FunctionComponent<IModalProps> = ({\r\n  children,\r\n  title,\r\n  onClose,\r\n  isVisible,\r\n}) => {\r\n  useEffect(() => {\r\n    if (!isVisible) {\r\n      return;\r\n    }\r\n    const listener = (event: KeyboardEvent) => {\r\n      if (event.key === \"Escape\") {\r\n        onClose();\r\n      }\r\n    };\r\n    document.addEventListener(\"keydown\", listener);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", listener);\r\n    };\r\n  }, [onClose, isVisible]);\r\n\r\n  if (!isVisible) {\r\n    return null;\r\n  }\r\n\r\n  return createPortal(\r\n    <>\r\n      <ModalOverlay onClick={onClose} />\r\n      <div className={`${modalStyles.modal} pr-10 pl-10 pt-10`}>\r\n        <div className={modalStyles.header}>\r\n          <h2 className=\"text text_type_main-large\">{title}</h2>\r\n          <button className={modalStyles.close} onClick={onClose}>\r\n            <CloseIcon type=\"primary\" />\r\n          </button>\r\n        </div>\r\n        {children}\r\n      </div>\r\n    </>,\r\n    document.querySelector(\"#modals\") as HTMLElement\r\n  );\r\n};\r\n","import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\r\nimport { ThunkAction, ThunkDispatch } from \"redux-thunk\";\r\nimport { store } from \"./store\";\r\nimport { TActions } from \"./tactions\";\r\n\r\nexport type TIngredient = {\r\n  calories: number;\r\n  carbohydrates: number;\r\n  fat: number;\r\n  image: string;\r\n  image_large: string;\r\n  image_mobile: string;\r\n  name: string;\r\n  price: number;\r\n  proteins: number;\r\n  type: string;\r\n  _id: string;\r\n  count: number;\r\n};\r\n\r\nexport type TSelectedIngredient = TIngredient & { uid: string };\r\n\r\nexport type TOrder = {\r\n  number: number;\r\n};\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch &\r\n  ThunkDispatch<RootState, unknown, TActions>;\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n\r\nexport type AppThunk<ReturnType = void> = ThunkAction<\r\n  ReturnType,\r\n  RootState,\r\n  unknown,\r\n  TActions\r\n>;\r\n","import { PropsWithChildren } from \"react\";\r\nimport { useLocation, Link, LinkProps } from \"react-router-dom\";\r\nimport { TIngredient } from \"../../utils/types\";\r\n\r\ninterface IIngredientCardLinkProps extends PropsWithChildren<{}> {\r\n  ingredient: TIngredient;\r\n  innerRef: LinkProps[\"innerRef\"];\r\n  className: LinkProps[\"className\"];\r\n  onClick: LinkProps[\"onClick\"];\r\n}\r\n\r\nexport function IngredientCardLink({\r\n  children,\r\n  ingredient,\r\n  innerRef,\r\n  className,\r\n  onClick,\r\n}: IIngredientCardLinkProps) {\r\n  let location = useLocation();\r\n  return (\r\n    <Link\r\n      key={ingredient._id}\r\n      to={{\r\n        pathname: `/ingredients/${ingredient._id}`,\r\n        state: { background: location },\r\n      }}\r\n      innerRef={innerRef}\r\n      className={className}\r\n      onClick={onClick}\r\n    >\r\n      {children}\r\n    </Link>\r\n  );\r\n}\r\n","import {\r\n  Counter,\r\n  CurrencyIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback, forwardRef } from \"react\";\r\nimport ingredientCard from \"./ingredient-card.module.css\";\r\nimport { TIngredient } from \"../../utils/types\";\r\nimport { IngredientCardLink } from \"../ingredient-card-link/ingredient-card-link\";\r\n\r\nconst IngredientCard = forwardRef<HTMLAnchorElement, IIngredientCardProps>(\r\n  ({ ingredient, onIngredientClick, count }, ref) => {\r\n    const handleSectionClick = useCallback(() => {\r\n      onIngredientClick(ingredient);\r\n    }, [onIngredientClick, ingredient]);\r\n    return (\r\n      <IngredientCardLink\r\n        ingredient={ingredient}\r\n        className={ingredientCard.ingredient_card}\r\n        innerRef={ref}\r\n        onClick={handleSectionClick}\r\n      >\r\n        <>\r\n          <Counter count={count} size=\"small\" />\r\n          <img src={ingredient.image} alt={ingredient.name} />\r\n          <div className={`${ingredientCard.price} mt-1 mb-1`}>\r\n            <span className=\"text text_type_main-default mr-2\">\r\n              {ingredient.price}\r\n            </span>{\" \"}\r\n            <CurrencyIcon type=\"primary\" />\r\n          </div>\r\n          <p>{ingredient.name}</p>\r\n        </>\r\n      </IngredientCardLink>\r\n    );\r\n  }\r\n);\r\n\r\ninterface IIngredientCardProps {\r\n  ingredient: TIngredient;\r\n  onIngredientClick: (ingredient: TIngredient) => void;\r\n  count: number;\r\n}\r\n\r\nexport default IngredientCard;\r\n","import { useDrag } from \"react-dnd\";\r\nimport IngredientCard from \"../ingredient-card/ingredient-card\";\r\nimport { TIngredient } from \"../../utils/types\";\r\n\r\ninterface IIngredientCardDraggableProps {\r\n  ingredient: TIngredient;\r\n  onIngredientClick: (ingredient: TIngredient) => void;\r\n  count: number;\r\n}\r\n\r\nfunction IngredientCardDraggable({\r\n  ingredient,\r\n  onIngredientClick,\r\n  count,\r\n}: IIngredientCardDraggableProps) {\r\n  const [, dragRef] = useDrag({\r\n    type: \"ingredient\",\r\n    item: { ingredient },\r\n  });\r\n  return (\r\n    <IngredientCard\r\n      ingredient={ingredient}\r\n      onIngredientClick={onIngredientClick}\r\n      count={count}\r\n      ref={dragRef}\r\n    />\r\n  );\r\n}\r\n\r\nexport default IngredientCardDraggable;\r\n","import IngredientCardDraggable from \"../ingredient-card-draggable/ingredient-card-draggable\";\r\nimport ingredientsSectionStyles from \"./ingredients-section.module.css\";\r\nimport { forwardRef } from \"react\";\r\nimport { TIngredient } from \"../../utils/types\";\r\n\r\nconst IngredientsSection = forwardRef<HTMLDivElement, IIngredientsSectionProps>(\r\n  ({ title, ingredients, type, onIngredientClick, counts }, ref) => {\r\n    return (\r\n      <section\r\n        ref={ref}\r\n        className={`${ingredientsSectionStyles.ingredients_list} pt-10`}\r\n      >\r\n        <h2\r\n          className={`${ingredientsSectionStyles.ingredients_list_title} mb-6 text text_type_main-medium`}\r\n        >\r\n          {title}\r\n        </h2>\r\n        <div className={`${ingredientsSectionStyles.cards_box} pl-4 pr-4`}>\r\n          {ingredients\r\n            .filter((ingredient) => {\r\n              return ingredient.type === type;\r\n            })\r\n            .map((ingredient) => {\r\n              return (\r\n                <IngredientCardDraggable\r\n                  key={ingredient._id}\r\n                  ingredient={ingredient}\r\n                  onIngredientClick={onIngredientClick}\r\n                  count={counts[ingredient._id]}\r\n                />\r\n              );\r\n            })}\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n);\r\n\r\ninterface IIngredientsSectionProps {\r\n  title: string;\r\n  ingredients: Array<TIngredient>;\r\n  type: string;\r\n  onIngredientClick: (ingredients: TIngredient) => void;\r\n  counts: { [key: string]: number };\r\n}\r\n\r\nexport default IngredientsSection;\r\n","import { Tab } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useRef, useState, useMemo, useCallback } from \"react\";\r\nimport { TIngredient, useAppSelector } from \"../../utils/types\";\r\nimport IngredientsSection from \"../ingredients-section/ingredients-section\";\r\nimport burgerIngredientsStyles from \"./burger-ingredients.module.css\";\r\n\r\nconst HEIGHT_FROM_TOP = 200;\r\n\r\nfunction BurgerIngredients({\r\n  handleIngredientDetailsOpen,\r\n}: {\r\n  handleIngredientDetailsOpen: (ingredient: TIngredient) => void;\r\n}) {\r\n  const { selectedIngredients, selectedBun } = useAppSelector(\r\n    ({\r\n      burgerConstructor: { selectedIngredients, selectedBun },\r\n    }: {\r\n      burgerConstructor: {\r\n        selectedIngredients: Array<TIngredient>;\r\n        selectedBun: TIngredient | null;\r\n      };\r\n    }) => {\r\n      return {\r\n        selectedIngredients,\r\n        selectedBun,\r\n      };\r\n    }\r\n  );\r\n\r\n  const { ingredients } = useAppSelector(({ ingredients: { ingredients } }) => {\r\n    return {\r\n      ingredients,\r\n    };\r\n  });\r\n\r\n  const counts = useMemo(() => {\r\n    return ingredients.reduce((acc, ingredient) => {\r\n      if (ingredient.type === \"bun\") {\r\n        return {\r\n          ...acc,\r\n          [ingredient._id]:\r\n            selectedBun && ingredient._id === selectedBun._id ? 1 : 0,\r\n        };\r\n      }\r\n      return {\r\n        ...acc,\r\n        [ingredient._id]: selectedIngredients.filter(\r\n          (selectedIngredient) => selectedIngredient._id === ingredient._id\r\n        ).length,\r\n      };\r\n    }, {});\r\n  }, [ingredients, selectedIngredients, selectedBun]);\r\n\r\n  const [current, setCurrent] = useState(\"bun\");\r\n\r\n  const bunRef = useRef<HTMLDivElement | null>(null);\r\n  const sauceRef = useRef<HTMLDivElement | null>(null);\r\n  const mainRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  const handleBunTabClick = useCallback(() => {\r\n    setCurrent(\"bun\");\r\n  }, [setCurrent]);\r\n  const handleSauceTabClick = useCallback(() => {\r\n    setCurrent(\"sauce\");\r\n  }, [setCurrent]);\r\n  const handleMainTabClick = useCallback(() => {\r\n    setCurrent(\"main\");\r\n  }, [setCurrent]);\r\n\r\n  const handleScroll = useCallback(\r\n    (evt) => {\r\n      if (sauceRef.current == null || mainRef.current == null) {\r\n        return;\r\n      }\r\n      const container = evt.target;\r\n      const scrollPosition = container.scrollTop;\r\n      const saucePosition = sauceRef.current.offsetTop;\r\n      const mainPosition = mainRef.current.offsetTop;\r\n      if (scrollPosition + HEIGHT_FROM_TOP <= saucePosition) {\r\n        handleBunTabClick();\r\n      } else if (scrollPosition + HEIGHT_FROM_TOP <= mainPosition) {\r\n        handleSauceTabClick();\r\n      } else {\r\n        handleMainTabClick();\r\n      }\r\n    },\r\n    [handleBunTabClick, handleMainTabClick, handleSauceTabClick]\r\n  );\r\n\r\n  return (\r\n    <section\r\n      className={`${burgerIngredientsStyles.ingredients_section} pt-10 mr-10`}\r\n    >\r\n      <h1 className=\"text text_type_main-large\">Соберите бургер</h1>\r\n      <div className={`${burgerIngredientsStyles.ingredients_tabs} pt-5`}>\r\n        <Tab value=\"bun\" active={current === \"bun\"} onClick={handleBunTabClick}>\r\n          Булки\r\n        </Tab>\r\n        <Tab\r\n          value=\"sauce\"\r\n          active={current === \"sauce\"}\r\n          onClick={handleSauceTabClick}\r\n        >\r\n          Соусы\r\n        </Tab>\r\n        <Tab\r\n          value=\"main\"\r\n          active={current === \"main\"}\r\n          onClick={handleMainTabClick}\r\n        >\r\n          Начинки\r\n        </Tab>\r\n      </div>\r\n      <div\r\n        className={`${burgerIngredientsStyles.scrollbox} ${burgerIngredientsStyles.scrollbar}`}\r\n        onScroll={handleScroll}\r\n      >\r\n        <IngredientsSection\r\n          ref={bunRef}\r\n          key=\"bun\"\r\n          title=\"Булки\"\r\n          type=\"bun\"\r\n          ingredients={ingredients}\r\n          counts={counts}\r\n          onIngredientClick={handleIngredientDetailsOpen}\r\n        />\r\n        <IngredientsSection\r\n          ref={sauceRef}\r\n          key=\"sauce\"\r\n          title=\"Соусы\"\r\n          type=\"sauce\"\r\n          ingredients={ingredients}\r\n          counts={counts}\r\n          onIngredientClick={handleIngredientDetailsOpen}\r\n        />\r\n        <IngredientsSection\r\n          ref={mainRef}\r\n          key=\"main\"\r\n          title=\"Начинки\"\r\n          type=\"main\"\r\n          ingredients={ingredients}\r\n          counts={counts}\r\n          onIngredientClick={handleIngredientDetailsOpen}\r\n        />\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default BurgerIngredients;\r\n","import {\r\n  ConstructorElement,\r\n  DragIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { forwardRef, useCallback } from \"react\";\r\nimport { TIngredient } from \"../../utils/types\";\r\nimport BurgerConstructorItemStyles from \"./burger-constructor-item.module.css\";\r\n\r\nconst BurgerConstructorItem = forwardRef<\r\n  HTMLDivElement,\r\n  IBurgerConstructorItemProps\r\n>(({ ingredient, index, handleDelete }, ref) => {\r\n  const handleClose = useCallback(\r\n    () => handleDelete(index),\r\n    [handleDelete, index]\r\n  );\r\n  return (\r\n    <div\r\n      className={`${BurgerConstructorItemStyles.constructor_item} mb-4 pl-8`}\r\n      ref={ref}\r\n    >\r\n      <div className={BurgerConstructorItemStyles.ingredient_button}>\r\n        <button className={BurgerConstructorItemStyles.drag_button}>\r\n          <DragIcon type=\"primary\" />\r\n        </button>\r\n      </div>\r\n      <ConstructorElement\r\n        text={ingredient.name}\r\n        price={ingredient.price}\r\n        thumbnail={ingredient.image}\r\n        handleClose={handleClose}\r\n      />\r\n    </div>\r\n  );\r\n});\r\n\r\ninterface IBurgerConstructorItemProps {\r\n  ingredient: TIngredient;\r\n  index: number;\r\n  handleDelete: (deleteIndex: number) => void;\r\n}\r\n\r\nexport default BurgerConstructorItem;\r\n","export const DELETE_IGREDIENT: \"DELETE_IGREDIENT\" = \"DELETE_IGREDIENT\";\r\nexport const DROP_INGREDIENT: \"DROP_INGREDIENT\" = \"DROP_INGREDIENT\";\r\nexport const GET_ORDER_NUMBER_SUCCESS: \"GET_ORDER_NUMBER_SUCCESS\" =\r\n  \"GET_ORDER_NUMBER_SUCCESS\";\r\nexport const REORDER_CONSTRUCTOR_ITEM: \"REORDER_CONSTRUCTOR_ITEM\" =\r\n  \"REORDER_CONSTRUCTOR_ITEM\";\r\nexport const GET_CONSTRUCTOR_INGREDIENTS: \"GET_CONSTRUCTOR_INGREDIENTS\" =\r\n  \"GET_CONSTRUCTOR_INGREDIENTS\";\r\n","import { useEffect, useRef } from \"react\";\r\nimport { useDrag, useDrop } from \"react-dnd\";\r\nimport BurgerConstructorItem from \"../burger-constructor-item/burger-constructor-item\";\r\nimport { TIngredient, useAppDispatch } from \"../../utils/types\";\r\nimport { REORDER_CONSTRUCTOR_ITEM } from \"../../services/actions/burger-constructor-actions\";\r\n\r\ninterface IBurgerConstructorItemDraggableDroppableProps {\r\n  ingredient: TIngredient;\r\n  index: number;\r\n  handleDelete: (deleteIndex: number) => void;\r\n}\r\n\r\nfunction BurgerConstructorItemDraggableDroppable({\r\n  ingredient,\r\n  index,\r\n  handleDelete,\r\n}: IBurgerConstructorItemDraggableDroppableProps) {\r\n  const ref = useRef(null);\r\n  const dispatch = useAppDispatch();\r\n\r\n  const [, dragRef] = useDrag({\r\n    type: \"constructor-item\",\r\n    item: { dragIndex: index },\r\n  });\r\n\r\n  const [, dropTarget] = useDrop({\r\n    accept: \"constructor-item\",\r\n    drop({ dragIndex }: { dragIndex: number }) {\r\n      dispatch({\r\n        type: REORDER_CONSTRUCTOR_ITEM,\r\n        payload: {\r\n          itemIndex: index,\r\n          dragIndex: dragIndex,\r\n        },\r\n      });\r\n    },\r\n  });\r\n\r\n  useEffect(\r\n    function () {\r\n      dragRef(dropTarget(ref));\r\n    },\r\n    [dragRef, dropTarget]\r\n  );\r\n\r\n  return (\r\n    <BurgerConstructorItem\r\n      ingredient={ingredient}\r\n      index={index}\r\n      handleDelete={handleDelete}\r\n      ref={ref}\r\n    />\r\n  );\r\n}\r\n\r\nexport default BurgerConstructorItemDraggableDroppable;\r\n","import {\r\n  Button,\r\n  ConstructorElement,\r\n  CurrencyIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback, useMemo, forwardRef } from \"react\";\r\nimport burgerConstructorStyles from \"./burger-constructor.module.css\";\r\nimport { TIngredient, useAppDispatch, useAppSelector } from \"../../utils/types\";\r\nimport BurgerConstructorItemDraggableDroppable from \"../burger-constructor-item-draggable-droppable/burger-constructor-item-draggable-droppable\";\r\nimport { DELETE_IGREDIENT } from \"../../services/actions/burger-constructor-actions\";\r\n\r\nconst BurgerConstructor = forwardRef<HTMLDivElement, IBurgerConstructorProps>(\r\n  ({ onSubmit, ingredients }, ref) => {\r\n    const dispatch = useAppDispatch();\r\n\r\n    const selectedIngredients = useAppSelector(\r\n      (state) => state.burgerConstructor.selectedIngredients\r\n    );\r\n\r\n    const selectedBun = useAppSelector(\r\n      (state) => state.burgerConstructor.selectedBun\r\n    );\r\n\r\n    const orderSum = useMemo(\r\n      () =>\r\n        selectedIngredients.reduce(\r\n          (sum, ingredient) => sum + ingredient.price,\r\n          selectedBun ? selectedBun.price : 0\r\n        ),\r\n      [selectedIngredients, selectedBun]\r\n    );\r\n\r\n    const handleSubmit = useCallback(() => {\r\n      if (!selectedBun) {\r\n        return;\r\n      }\r\n      onSubmit(selectedIngredients.concat(selectedBun));\r\n    }, [onSubmit, selectedIngredients, selectedBun]);\r\n\r\n    const handleDelete = useCallback(\r\n      (deleteIndex) => {\r\n        dispatch({ type: DELETE_IGREDIENT, payload: { deleteIndex } });\r\n      },\r\n      [dispatch]\r\n    );\r\n\r\n    if (ingredients.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <section\r\n        className={`${burgerConstructorStyles.constructor_section} pt-25`}\r\n        ref={ref}\r\n      >\r\n        <div className={burgerConstructorStyles.constructor_list}>\r\n          {selectedBun && (\r\n            <div className=\"pl-9 pr-4\">\r\n              <ConstructorElement\r\n                type=\"top\"\r\n                isLocked\r\n                text={`${selectedBun.name} (верх)`}\r\n                price={selectedBun.price}\r\n                thumbnail={selectedBun.image}\r\n              />\r\n            </div>\r\n          )}\r\n          <div\r\n            className={`${burgerConstructorStyles.constructor_items} ${burgerConstructorStyles.scrollbar}  mt-4 mb-4 pl-4 pr-4`}\r\n          >\r\n            {selectedIngredients.map((ingredient, index) => {\r\n              return (\r\n                <BurgerConstructorItemDraggableDroppable\r\n                  ingredient={ingredient}\r\n                  index={index}\r\n                  handleDelete={handleDelete}\r\n                  key={ingredient.uid}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n          {selectedBun ? (\r\n            <div className=\"pl-9 pr-4\">\r\n              <ConstructorElement\r\n                type=\"bottom\"\r\n                isLocked={true}\r\n                text={`${selectedBun.name} (низ)`}\r\n                price={selectedBun.price}\r\n                thumbnail={selectedBun.image}\r\n              />\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n        <div className={`${burgerConstructorStyles.order} pt-10`}>\r\n          <div className={`${burgerConstructorStyles.order_price} mr-10`}>\r\n            <span className=\"text text_type_digits-medium mr-2\">\r\n              {orderSum}\r\n            </span>\r\n            <CurrencyIcon type=\"primary\" />\r\n          </div>\r\n          <Button type=\"primary\" size=\"large\" onClick={handleSubmit}>\r\n            Оформить заказ\r\n          </Button>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n);\r\n\r\ninterface IBurgerConstructorProps {\r\n  onSubmit: (ingredients: Array<TIngredient>) => void;\r\n  ingredients: Array<TIngredient>;\r\n}\r\n\r\nexport default BurgerConstructor;\r\n","import { useDrop } from \"react-dnd\";\r\nimport BurgerConstructor from \"../burger-constructor/burger-constructor\";\r\nimport { TIngredient, useAppDispatch, useAppSelector } from \"../../utils/types\";\r\nimport { v4 } from \"uuid\";\r\nimport { DROP_INGREDIENT } from \"../../services/actions/burger-constructor-actions\";\r\n\r\ninterface IBurgerConstructorDroppableProps {\r\n  onSubmit: (ingredients: Array<TIngredient>) => void;\r\n}\r\n\r\nfunction BurgerConstructorDroppable({\r\n  onSubmit,\r\n}: IBurgerConstructorDroppableProps) {\r\n  const dispatch = useAppDispatch();\r\n  const [, dropTarget] = useDrop({\r\n    accept: \"ingredient\",\r\n    drop({ ingredient }: { ingredient: TIngredient }) {\r\n      dispatch({\r\n        type: DROP_INGREDIENT,\r\n        payload: { ingredient: { ...ingredient, uid: v4() } },\r\n      });\r\n    },\r\n  });\r\n\r\n  const { ingredients } = useAppSelector(({ ingredients: { ingredients } }) => {\r\n    return {\r\n      ingredients,\r\n    };\r\n  });\r\n\r\n  return (\r\n    <BurgerConstructor\r\n      onSubmit={onSubmit}\r\n      ingredients={ingredients}\r\n      ref={dropTarget}\r\n    />\r\n  );\r\n}\r\n\r\nexport default BurgerConstructorDroppable;\r\n","const API_URL = \"https://norma.nomoreparties.space/api\";\r\nconst checkResponse: <T = {}>(res: Response) => Promise<T> = (res) => {\r\n  if (res && res.ok) {\r\n    return res.json();\r\n  }\r\n  return res\r\n    .json()\r\n    .then((data) => Promise.reject({ message: `Ошибка ${res.status}`, data }));\r\n};\r\n\r\nexport function getIngredients() {\r\n  return fetch(`${API_URL}/ingredients`).then((res) =>\r\n    checkResponse<{ success: boolean; data: [] }>(res)\r\n  );\r\n}\r\n\r\nexport function sendOrder(ingredientIds: number[]) {\r\n  return fetch(`${API_URL}/orders`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({\r\n      ingredients: ingredientIds,\r\n    }),\r\n  }).then((res) => checkResponse<{ order: {}; success: boolean }>(res));\r\n}\r\n\r\nexport function register({\r\n  email,\r\n  password,\r\n  name,\r\n}: {\r\n  email: string;\r\n  password: string;\r\n  name: string;\r\n}) {\r\n  return fetch(`${API_URL}/auth/register`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ email, password, name }),\r\n  }).then((res) => checkResponse<{ accessToken: string }>(res));\r\n}\r\n\r\nexport function login({\r\n  email,\r\n  password,\r\n}: {\r\n  email: string;\r\n  password: string;\r\n}) {\r\n  return fetch(`${API_URL}/auth/login`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ email, password }),\r\n  }).then((res) =>\r\n    checkResponse<{\r\n      accessToken: string | null;\r\n      refreshToken: string | null;\r\n      success: boolean;\r\n    }>(res)\r\n  );\r\n}\r\n\r\nexport function logout(refreshToken: string) {\r\n  return fetch(`${API_URL}/auth/logout`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ token: refreshToken }),\r\n  }).then((res) =>\r\n    checkResponse<{ refreshToken: string | null; success: boolean }>(res)\r\n  );\r\n}\r\n\r\nexport function refreshToken(refreshToken: string) {\r\n  return fetch(`${API_URL}/auth/token`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ token: refreshToken }),\r\n  }).then((res) =>\r\n    checkResponse<{\r\n      accessToken: string;\r\n      refreshToken: string;\r\n    }>(res)\r\n  );\r\n}\r\n\r\nexport function getUserInfoApi(authToken: string) {\r\n  return fetch(`${API_URL}/auth/user`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${authToken}`,\r\n    },\r\n  }).then((res) =>\r\n    checkResponse<{ user: { name: string; email: string } }>(res)\r\n  );\r\n}\r\n\r\nexport function setUserInfoApi(\r\n  authToken: string,\r\n  { name, email, password }: { name: string; email: string; password: string }\r\n) {\r\n  return fetch(`${API_URL}/auth/user`, {\r\n    method: \"PATCH\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${authToken}`,\r\n    },\r\n    body: JSON.stringify({ name, email, password }),\r\n  }).then((res) =>\r\n    checkResponse<{\r\n      user: {\r\n        name: string;\r\n        email: string;\r\n        password: string;\r\n      };\r\n    }>(res)\r\n  );\r\n}\r\n\r\nexport function forgotPasswordApi(email: string) {\r\n  return fetch(`${API_URL}/password-reset`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ email }),\r\n  }).then((res) => checkResponse<{ success: boolean }>(res));\r\n}\r\n\r\nexport function resetPasswordApi(password: string, resetToken: string) {\r\n  return fetch(`${API_URL}/password-reset/reset`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ password, token: resetToken }),\r\n  }).then((res) => checkResponse<{ success: boolean }>(res));\r\n}\r\n","import { getIngredients } from \"../../utils/api\";\r\nimport { AppThunk } from \"../../utils/types\";\r\n\r\nexport const DELETE_SELECTED_INGREDIENT_DATA: \"DELETE_SELECTED_INGREDIENT_DATA\" =\r\n  \"DELETE_SELECTED_INGREDIENT_DATA\";\r\nexport const GET_INGREDIENTS_REQUEST: \"GET_INGREDIENTS_REQUEST\" =\r\n  \"GET_INGREDIENTS_REQUEST\";\r\nexport const GET_INGREDIENTS_SUCCESS: \"GET_INGREDIENTS_SUCCESS\" =\r\n  \"GET_INGREDIENTS_SUCCESS\";\r\nexport const GET_INGREDIENTS_FAILED: \"GET_INGREDIENTS_FAILED\" =\r\n  \"GET_INGREDIENTS_FAILED\";\r\nexport const SELECT_INGREDIENT: \"SELECT_INGREDIENT\" = \"SELECT_INGREDIENT\";\r\n\r\nexport const getIngredientsApi: () => AppThunk = () => {\r\n  return (dispatch) => {\r\n    dispatch({\r\n      type: GET_INGREDIENTS_REQUEST,\r\n    });\r\n    getIngredients()\r\n      .then((res) => {\r\n        if (res && res.success) {\r\n          dispatch({\r\n            type: GET_INGREDIENTS_SUCCESS,\r\n            payload: {\r\n              ingredients: res.data,\r\n            },\r\n          });\r\n        } else {\r\n          dispatch({\r\n            type: GET_INGREDIENTS_FAILED,\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n","import { sendOrder } from \"../../utils/api\";\r\nimport { AppThunk, AppDispatch } from \"../../utils/types\";\r\nimport { GET_ORDER_NUMBER_SUCCESS } from \"./burger-constructor-actions\";\r\n\r\nexport const DELETE_ORDER_DATA: \"DELETE_ORDER_DATA\" = \"DELETE_ORDER_DATA\";\r\nexport const GET_ORDER_NUMBER_REQUEST: \"GET_ORDER_NUMBER_REQUEST\" =\r\n  \"GET_ORDER_NUMBER_REQUEST\";\r\nexport const GET_ORDER_NUMBER_FAILED: \"GET_ORDER_NUMBER_FAILED\" =\r\n  \"GET_ORDER_NUMBER_FAILED\";\r\n\r\nexport const getOrderNumber: (ingredientIds: number[]) => AppThunk = (\r\n  ingredientIds\r\n) => {\r\n  return (dispatch: AppDispatch) => {\r\n    dispatch({\r\n      type: GET_ORDER_NUMBER_REQUEST,\r\n    });\r\n    sendOrder(ingredientIds)\r\n      .then((res) => {\r\n        if (res && res.success) {\r\n          dispatch({\r\n            type: GET_ORDER_NUMBER_SUCCESS,\r\n            payload: {\r\n              order: res.order,\r\n            },\r\n          });\r\n        } else {\r\n          dispatch({\r\n            type: GET_ORDER_NUMBER_FAILED,\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n","import { useCallback } from \"react\";\r\nimport mainSectionStyles from \"./main.module.css\";\r\nimport { OrderDetails } from \"../order-details/order-details\";\r\nimport { Modal } from \"../modal/modal\";\r\nimport BurgerIngredients from \"../burger-ingredients/burger-ingredients\";\r\nimport BurgerConstructorDroppable from \"../burger-constructor-droppable/burger-constructor-droppable\";\r\nimport { TIngredient, useAppDispatch, useAppSelector } from \"../../utils/types\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SELECT_INGREDIENT } from \"../../services/actions/ingredients-actions\";\r\nimport { getOrderNumber, DELETE_ORDER_DATA } from \"../../services/actions/order-actions\";\r\n\r\nfunction Main() {\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  const { order, loggedIn } = useAppSelector(\r\n    ({\r\n      ingredients: { ingredients, selectedIngredient },\r\n      order: { order },\r\n      user: { loggedIn },\r\n    }) => {\r\n      return {\r\n        ingredients,\r\n        selectedIngredient,\r\n        order,\r\n        loggedIn,\r\n      };\r\n    }\r\n  );\r\n\r\n  const handleIngredientDetailsOpen = useCallback(\r\n    (ingredient) => {\r\n      dispatch({\r\n        type: SELECT_INGREDIENT,\r\n        payload: {\r\n          ingredient: ingredient,\r\n        },\r\n      });\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const handleOrderDetailsOpen = useCallback(\r\n    (ingredients) => {\r\n      if (!loggedIn) {\r\n        history.push(\"/login\");\r\n      } else {\r\n        dispatch(\r\n          getOrderNumber(\r\n            ingredients.map((ingredient: TIngredient) => ingredient._id)\r\n          )\r\n        );\r\n      }\r\n    },\r\n    [dispatch, history, loggedIn]\r\n  );\r\n\r\n  const handleOrderDetailsClose = useCallback(() => {\r\n    dispatch({\r\n      type: DELETE_ORDER_DATA,\r\n    });\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <main className={`${mainSectionStyles.main} pb-10`}>\r\n      <BurgerIngredients\r\n        handleIngredientDetailsOpen={handleIngredientDetailsOpen}\r\n      />\r\n      <BurgerConstructorDroppable onSubmit={handleOrderDetailsOpen} />\r\n\r\n      <Modal isVisible={!!order} onClose={handleOrderDetailsClose}>\r\n        {order ? <OrderDetails order={order} /> : null}\r\n      </Modal>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import Main from \"../components/main/main\";\r\n\r\nexport const Constructor = () => {\r\n  return <Main />;\r\n};\r\n","export function getCookie(name: string) {\r\n  const matches = document.cookie.match(\r\n    new RegExp(\r\n      \"(?:^|; )\" +\r\n        // eslint-disable-next-line no-useless-escape\r\n        name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, \"\\\\$1\") +\r\n        \"=([^;]*)\"\r\n    )\r\n  );\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n}\r\n\r\ntype TProps = {\r\n  [key: string]: string | Date | boolean | number | undefined;\r\n  expires?: string | number | Date;\r\n};\r\n\r\nexport function setCookie(name: string, value: string | null, props?: TProps) {\r\n  props = props || {};\r\n  let exp = props.expires;\r\n  if (typeof exp == \"number\" && exp) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + exp * 1000);\r\n    exp = props.expires = d;\r\n  }\r\n  if (exp && exp instanceof Date && exp.toUTCString) {\r\n    props.expires = exp.toUTCString();\r\n  }\r\n  if (value == null) {\r\n    return;\r\n  }\r\n  value = encodeURIComponent(value);\r\n  let updatedCookie = name + \"=\" + value;\r\n  for (const propName in props) {\r\n    updatedCookie += \"; \" + propName;\r\n    const propValue = props[propName];\r\n    if (propValue !== true) {\r\n      updatedCookie += \"=\" + propValue;\r\n    }\r\n  }\r\n  document.cookie = updatedCookie;\r\n}\r\n\r\nexport function deleteCookie(name: string) {\r\n  setCookie(name, null, { expires: -1 });\r\n}\r\n","import {\r\n  register,\r\n  login,\r\n  logout,\r\n  getUserInfoApi,\r\n  refreshToken,\r\n  setUserInfoApi,\r\n} from \"../../utils/api\";\r\nimport { AppThunk, AppDispatch } from \"../../utils/types\";\r\nimport { setCookie } from \"../../utils/utils\";\r\nimport { History, LocationState } from \"history\";\r\n\r\nexport const USER_REGISTER: \"USER_REGISTER\" = \"USER_REGISTER\";\r\nexport const USER_LOGIN: \"USER_LOGIN\" = \"USER_LOGIN\";\r\nexport const USER_SET_DATA: \"USER_SET_DATA\" = \"USER_SET_DATA\";\r\nexport const REFRESH_TOKEN: \"REFRESH_TOKEN\" = \"REFRESH_TOKEN\";\r\nexport const USER_LOGOUT: \"USER_LOGOUT\" = \"USER_LOGOUT\";\r\nexport const GET_USER_INFO: \"GET_USER_INFO\" = \"GET_USER_INFO\";\r\nexport const SET_USER_INFO: \"SET_USER_INFO\" = \"SET_USER_INFO\";\r\n\r\nexport const registerUser: (\r\n  email: string,\r\n  password: string,\r\n  name: string,\r\n  history: History<LocationState>\r\n) => AppThunk = (email, password, name, history) => {\r\n  return () => {\r\n    register({ email, password, name })\r\n      .then((res) => {\r\n        console.log(\"registerUser\", res);\r\n        history.push(\"/login\");\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const loginUser: (\r\n  email: string,\r\n  password: string,\r\n  history: History<LocationState>\r\n) => AppThunk = (email, password, history) => {\r\n  return (dispatch: AppDispatch) => {\r\n    login({ email, password })\r\n      .then((res) => {\r\n        console.log(\"loginUser\", res);\r\n        if (res.accessToken == null) {\r\n          return;\r\n        }\r\n        let authToken = res.accessToken.split(\"Bearer \")[1];\r\n        if (authToken && res.refreshToken) {\r\n          setCookie(\"authToken\", authToken);\r\n          localStorage.setItem(\"refreshToken\", res.refreshToken);\r\n        }\r\n        if (res.success) {\r\n          dispatch({ type: USER_LOGIN });\r\n          history.push(\"/\");\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const logoutUser: (\r\n  refreshToken: string | null,\r\n  history: History<LocationState>\r\n) => AppThunk = (refreshToken, history) => {\r\n  return (dispatch: AppDispatch) => {\r\n    if (refreshToken == null) {\r\n      return;\r\n    }\r\n    logout(refreshToken)\r\n      .then((res) => {\r\n        console.log(\"logoutUser\", res);\r\n        if (res.success) {\r\n          localStorage.removeItem(\"refreshToken\");\r\n        }\r\n      })\r\n      .then((res) => {\r\n        dispatch({\r\n          type: USER_LOGOUT,\r\n        });\r\n        history.push(\"/login\");\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const getUserInfo: (authToken: string | undefined) => AppThunk = (\r\n  authToken\r\n) => {\r\n  return (dispatch: AppDispatch) => {\r\n    if (authToken == null) {\r\n      return;\r\n    }\r\n    getUserInfoApi(authToken)\r\n      .then((res) => {\r\n        console.log(\"getUserInfoApi\", res);\r\n        dispatch({\r\n          type: GET_USER_INFO,\r\n          payload: {\r\n            name: res.user.name,\r\n            email: res.user.email,\r\n          },\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        if (err.data.message === \"jwt expired\") {\r\n          const refreshingToken = localStorage.getItem(\"refreshToken\");\r\n          if (refreshingToken == null) {\r\n            return;\r\n          }\r\n          refreshToken(refreshingToken)\r\n            .then((res) => {\r\n              console.log(\"refreshToken\", res);\r\n              let authToken = res.accessToken.split(\"Bearer \")[1];\r\n              if (authToken && res.refreshToken) {\r\n                setCookie(\"authToken\", authToken);\r\n                localStorage.setItem(\"refreshToken\", res.refreshToken);\r\n              }\r\n            })\r\n            .catch((err) => console.log(err));\r\n        }\r\n      });\r\n  };\r\n};\r\n\r\nexport const setUserInfo: (\r\n  authToken: string | undefined,\r\n  name: string,\r\n  email: string,\r\n  password: string\r\n) => AppThunk = (authToken, name, email, password) => {\r\n  return (dispatch: AppDispatch) => {\r\n    if (authToken == null) {\r\n      return;\r\n    }\r\n    setUserInfoApi(authToken, { name, email, password })\r\n      .then((res) => {\r\n        console.log(\"setUserInfoApi\", res);\r\n        dispatch({\r\n          type: SET_USER_INFO,\r\n          payload: {\r\n            name: res.user.name,\r\n            email: res.user.email,\r\n            password: res.user.password,\r\n          },\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        if (err.data.message === \"jwt expired\") {\r\n          const refreshingToken = localStorage.getItem(\"refreshToken\");\r\n          if (refreshingToken == null) {\r\n            return;\r\n          }\r\n          refreshToken(refreshingToken)\r\n            .then((res) => {\r\n              console.log(\"refreshToken\", res);\r\n              let authToken = res.accessToken.split(\"Bearer \")[1];\r\n              if (authToken && res.refreshToken) {\r\n                setCookie(\"authToken\", authToken);\r\n                localStorage.setItem(\"refreshToken\", res.refreshToken);\r\n              }\r\n            })\r\n            .catch((err) => console.log(err));\r\n        }\r\n      });\r\n  };\r\n};\r\n","import {\r\n  Button,\r\n  Input,\r\n  PasswordInput,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { USER_REGISTER, registerUser } from \"../services/actions/user-actions\";\r\nimport { useAppDispatch, useAppSelector } from \"../utils/types\";\r\nimport styles from \"./pages.module.css\";\r\n\r\nexport const Register = () => {\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  const { email, password, name } = useAppSelector((state) => {\r\n    return {\r\n      email: state.user.email,\r\n      password: state.user.password,\r\n      name: state.user.name,\r\n      loggedIn: state.user.loggedIn,\r\n    };\r\n  });\r\n\r\n  const handleChange = useCallback(\r\n    (evt) => {\r\n      const { name, value } = evt.target;\r\n      dispatch({ type: USER_REGISTER, payload: { [name]: value } });\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const handleSubmit = useCallback(\r\n    (evt) => {\r\n      evt.preventDefault();\r\n      dispatch(registerUser(email, password, name, history));\r\n    },\r\n    [dispatch, email, name, password, history]\r\n  );\r\n\r\n  return (\r\n    <div className={styles.main}>\r\n      <div className={`${styles.form__block} pt-20`}>\r\n        <h1 className=\"text text_type_main-medium mb-6\">Регистрация</h1>\r\n        <form className={styles.form} onSubmit={handleSubmit}>\r\n          <div className=\"mb-6\">\r\n            <Input\r\n              type={\"text\"}\r\n              placeholder={\"Имя\"}\r\n              onChange={(e) => handleChange(e)}\r\n              value={name}\r\n              name={\"name\"}\r\n              error={false}\r\n              errorText={\"Ошибка\"}\r\n              size={\"default\"}\r\n            />\r\n          </div>\r\n          <div className=\"mb-6\">\r\n            <Input\r\n              type={\"email\"}\r\n              placeholder={\"E-mail\"}\r\n              onChange={(e) => handleChange(e)}\r\n              value={email}\r\n              name={\"email\"}\r\n              error={false}\r\n              errorText={\"Ошибка\"}\r\n              size={\"default\"}\r\n            />\r\n          </div>\r\n          <div className=\"mb-6\">\r\n            <PasswordInput\r\n              onChange={(e) => handleChange(e)}\r\n              value={password}\r\n              name={\"password\"}\r\n            />\r\n          </div>\r\n          <Button type=\"primary\" size=\"medium\">\r\n            Зарегистрироваться\r\n          </Button>\r\n        </form>\r\n        <div>\r\n          <p className=\"text text_type_main-default text_color_inactive mt-20\">\r\n            Уже зарегистрированы?{\" \"}\r\n            <Link to=\"/login\" className={styles.login}>\r\n              Войти\r\n            </Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import {\r\n  Button,\r\n  Input,\r\n  PasswordInput,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { USER_SET_DATA, loginUser } from \"../services/actions/user-actions\";\r\nimport { useAppDispatch, useAppSelector } from \"../utils/types\";\r\nimport styles from \"./pages.module.css\";\r\n\r\nexport const Login = () => {\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  const { email, password } = useAppSelector((state) => {\r\n    return {\r\n      email: state.user.email,\r\n      password: state.user.password,\r\n      loggedIn: state.user.loggedIn,\r\n    };\r\n  });\r\n\r\n  const handleChange = useCallback(\r\n    (evt) => {\r\n      const { name, value } = evt.target;\r\n      dispatch({ type: USER_SET_DATA, payload: { [name]: value } });\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const handleSubmit = useCallback(\r\n    (evt) => {\r\n      evt.preventDefault();\r\n      dispatch(loginUser(email, password, history));\r\n    },\r\n    [dispatch, email, password, history]\r\n  );\r\n\r\n  return (\r\n    <div className={styles.main}>\r\n      <div className={`${styles.form__block} pt-20`}>\r\n        <h1 className=\"text text_type_main-medium mb-6\">Вход</h1>\r\n        <form className={styles.form} onSubmit={handleSubmit}>\r\n          <div className=\"mb-6\">\r\n            <Input\r\n              type={\"email\"}\r\n              placeholder={\"E-mail\"}\r\n              onChange={(e) => handleChange(e)}\r\n              value={email}\r\n              name={\"email\"}\r\n              error={false}\r\n              errorText={\"Ошибка\"}\r\n              size={\"default\"}\r\n            />\r\n          </div>\r\n          <div className=\"mb-6\">\r\n            <PasswordInput\r\n              onChange={(e) => handleChange(e)}\r\n              value={password}\r\n              name={\"password\"}\r\n            />\r\n          </div>\r\n          <Button type=\"primary\" size=\"medium\">\r\n            Войти\r\n          </Button>\r\n        </form>\r\n        <div className={styles.register}>\r\n          <p className=\"text text_type_main-default text_color_inactive mt-20\">\r\n            Вы — новый пользователь?{\" \"}\r\n            <Link to=\"/register\" className={styles.link}>\r\n              Зарегистрироваться\r\n            </Link>\r\n          </p>\r\n        </div>\r\n        <div className={styles.forgot_password}>\r\n          <p className=\"text text_type_main-default text_color_inactive mt-4\">\r\n            Забыли пароль?{\" \"}\r\n            <Link to=\"/forgot-password\" className={styles.link}>\r\n              Восстановить пароль\r\n            </Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { forgotPasswordApi, resetPasswordApi } from \"../../utils/api\";\r\nimport { AppDispatch } from \"../../utils/types\";\r\nimport { History, LocationState } from \"history\";\r\n\r\nexport const FORGOT_PASSWORD_SET_EMAIL: \"FORGOT_PASSWORD_SET_EMAIL\" =\r\n  \"FORGOT_PASSWORD_SET_EMAIL\";\r\nexport const RESET_PASSWORD: \"RESET_PASSWORD\" = \"RESET_PASSWORD\";\r\n\r\nexport const resetPassword = (\r\n  password: string,\r\n  resetToken: string,\r\n  history: History<LocationState>\r\n) => {\r\n  return (dispatch: AppDispatch) => {\r\n    resetPasswordApi(password, resetToken)\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          history.push(\"/\");\r\n          dispatch({ type: RESET_PASSWORD });\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const forgotPassword = (\r\n  email: string,\r\n  history: History<LocationState>\r\n) => {\r\n  return () => {\r\n    forgotPasswordApi(email)\r\n      .then((res) => {\r\n        console.log(\"forgotPasswordApi\", res);\r\n        if (res.success) {\r\n          history.push(\"/reset-password\");\r\n          console.log(\"redir\", res);\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n","import {\r\n  Button,\r\n  Input,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { FORGOT_PASSWORD_SET_EMAIL, forgotPassword } from \"../services/actions/reset-password-actions\";\r\nimport { useAppDispatch, useAppSelector } from \"../utils/types\";\r\nimport styles from \"./pages.module.css\";\r\n\r\nexport const ForgotPassword = () => {\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  const { email } = useAppSelector((state) => {\r\n    return { email: state.resetPassword.email };\r\n  });\r\n\r\n  const handleChange = useCallback(\r\n    (evt) => {\r\n      const { name, value } = evt.target;\r\n      dispatch({ type: FORGOT_PASSWORD_SET_EMAIL, payload: { [name]: value } });\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const handleSubmit = useCallback(\r\n    (evt) => {\r\n      evt.preventDefault();\r\n      dispatch(forgotPassword(email, history));\r\n    },\r\n    [dispatch, email, history]\r\n  );\r\n\r\n  return (\r\n    <div className={styles.main}>\r\n      <div className={`${styles.form__block} pt-20`}>\r\n        <h1 className=\"text text_type_main-medium mb-6\">\r\n          Восстановление пароля\r\n        </h1>\r\n        <form className={styles.form} onSubmit={handleSubmit}>\r\n          <div className=\"mb-6\">\r\n            <Input\r\n              type={\"email\"}\r\n              placeholder={\"Укажите e-mail\"}\r\n              onChange={(evt) => {\r\n                handleChange(evt);\r\n              }}\r\n              value={email}\r\n              name={\"email\"}\r\n              error={false}\r\n              errorText={\"Ошибка\"}\r\n              size={\"default\"}\r\n            />\r\n          </div>\r\n          <Button type=\"primary\" size=\"medium\">\r\n            Восстановить\r\n          </Button>\r\n        </form>\r\n        <div>\r\n          <p className=\"text text_type_main-default text_color_inactive mt-20\">\r\n            Вспомнили пароль?{\" \"}\r\n            <Link to=\"/login\" className={styles.link}>\r\n              Войти\r\n            </Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import {\r\n  Button,\r\n  Input,\r\n  PasswordInput,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { resetPassword } from \"../services/actions/reset-password-actions\";\r\nimport { useAppDispatch, useAppSelector } from \"../utils/types\";\r\nimport styles from \"./pages.module.css\";\r\n\r\nexport const ResetPassword = () => {\r\n  const [resetPasswordValues, setResetPasswordValues] = useState<{\r\n    [key: string]: string;\r\n  }>({\r\n    password: \"\",\r\n    resetToken: \"\",\r\n  });\r\n\r\n  const { email } = useAppSelector((state) => {\r\n    return { email: state.resetPassword.email };\r\n  });\r\n\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  const handleChange = useCallback((evt) => {\r\n    const { name, value } = evt.target;\r\n    setResetPasswordValues({ [name]: value });\r\n  }, []);\r\n\r\n  const handleSubmit = useCallback(\r\n    (evt) => {\r\n      evt.preventDefault();\r\n      dispatch(\r\n        resetPassword(\r\n          resetPasswordValues.password,\r\n          resetPasswordValues.resetToken,\r\n          history\r\n        )\r\n      );\r\n    },\r\n    [dispatch, history, resetPasswordValues]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!email) {\r\n      history.push(\"/forgot-password\");\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <div className={styles.main}>\r\n      <div className={`${styles.form__block} pt-20`}>\r\n        <h1 className=\"text text_type_main-medium mb-6\">\r\n          Восстановление пароля\r\n        </h1>\r\n        <form className={styles.form} onSubmit={handleSubmit}>\r\n          <div className=\"mb-6\">\r\n            <PasswordInput\r\n              onChange={(evt) => handleChange(evt)}\r\n              value={resetPasswordValues.password}\r\n              name={\"password\"}\r\n            />\r\n          </div>\r\n          <div className=\"mb-6\">\r\n            <Input\r\n              type={\"text\"}\r\n              placeholder={\"Введите код из письма\"}\r\n              onChange={(evt) => handleChange(evt)}\r\n              value={resetPasswordValues.resetToken}\r\n              name={\"code\"}\r\n              error={false}\r\n              errorText={\"Ошибка\"}\r\n              size={\"default\"}\r\n            />\r\n          </div>\r\n          <Button type=\"primary\" size=\"medium\">\r\n            Сохранить\r\n          </Button>\r\n        </form>\r\n        <p className=\"text text_type_main-default text_color_inactive mt-20\">\r\n          Вспомнили пароль?{\" \"}\r\n          <Link to=\"/login\" className={styles.link}>\r\n            Войти\r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import {\r\n  Button,\r\n  Input,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { NavLink, useHistory } from \"react-router-dom\";\r\nimport { getUserInfo, setUserInfo, logoutUser } from \"../services/actions/user-actions\";\r\nimport { useAppDispatch, useAppSelector } from \"../utils/types\";\r\nimport { getCookie } from \"../utils/utils\";\r\nimport styles from \"./profile.module.css\";\r\n\r\nexport const Profile = () => {\r\n  const { name, email, password } = useAppSelector((state) => {\r\n    return {\r\n      name: state.user.name,\r\n      email: state.user.email,\r\n      password: state.user.password,\r\n    };\r\n  });\r\n  const [formvalue, setFormvalue] = useState({\r\n    username: name,\r\n    useremail: email,\r\n    userpassword: password,\r\n  });\r\n\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    dispatch(getUserInfo(getCookie(\"authToken\")));\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    setFormvalue((prevstate) => ({\r\n      ...prevstate,\r\n      username: name || \"\",\r\n      useremail: email || \"\",\r\n    }));\r\n  }, [email, name]);\r\n\r\n  const handleChange = useCallback((evt) => {\r\n    setFormvalue((prevstate) => ({\r\n      ...prevstate,\r\n      [evt.target.name]: evt.target.value,\r\n    }));\r\n  }, []);\r\n\r\n  const handleSubmit = useCallback(\r\n    (evt) => {\r\n      evt.preventDefault();\r\n      dispatch(\r\n        setUserInfo(\r\n          getCookie(\"authToken\"),\r\n          formvalue.username,\r\n          formvalue.useremail,\r\n          formvalue.userpassword\r\n        )\r\n      );\r\n    },\r\n    [dispatch, formvalue]\r\n  );\r\n\r\n  const handleCancel = () => {\r\n    setFormvalue({\r\n      username: name,\r\n      useremail: email,\r\n      userpassword: password,\r\n    });\r\n  };\r\n\r\n  const isFormChanged =\r\n    formvalue.username !== name ||\r\n    formvalue.useremail !== email ||\r\n    formvalue.userpassword !== password;\r\n\r\n  return (\r\n    <div className={`${styles.main} pt-20`}>\r\n      <nav className={`${styles.nav} mr-15`}>\r\n        <NavLink\r\n          to=\"/profile\"\r\n          activeClassName={styles.active_link}\r\n          className={`${styles.navlink} text text_type_main-medium text_color_inactive mb-6`}\r\n        >\r\n          Профиль\r\n        </NavLink>\r\n        <NavLink\r\n          to=\"/\"\r\n          className={`${styles.navlink} text text_type_main-medium text_color_inactive mb-6`}\r\n        >\r\n          История заказов\r\n        </NavLink>\r\n        <button\r\n          className={`${styles.logout} text text_type_main-medium text_color_inactive mb-6`}\r\n          onClick={() => {\r\n            if (localStorage.getItem(\"refreshToken\") == null) {\r\n              return;\r\n            }\r\n            dispatch(logoutUser(localStorage.getItem(\"refreshToken\"), history));\r\n          }}\r\n        >\r\n          Выход\r\n        </button>\r\n        <p\r\n          className={`${styles.nav_text} text text_type_main-default text_color_inactive`}\r\n        >\r\n          В этом разделе вы можете изменить свои персональные данные\r\n        </p>\r\n      </nav>\r\n      <form className={styles.form} onSubmit={handleSubmit}>\r\n        <div className=\"mb-6\">\r\n          <Input\r\n            type={\"text\"}\r\n            placeholder={\"Имя\"}\r\n            onChange={(evt) => {\r\n              handleChange(evt);\r\n            }}\r\n            icon={\"EditIcon\"}\r\n            value={formvalue.username}\r\n            name={\"username\"}\r\n            error={false}\r\n            errorText={\"Ошибка\"}\r\n            size={\"default\"}\r\n          />\r\n        </div>\r\n        <div className=\"mb-6\">\r\n          <Input\r\n            type={\"text\"}\r\n            placeholder={\"Логин\"}\r\n            onChange={(evt) => {\r\n              handleChange(evt);\r\n            }}\r\n            icon={\"EditIcon\"}\r\n            value={formvalue.useremail}\r\n            name={\"useremail\"}\r\n            error={false}\r\n            errorText=\"Ошибка\"\r\n            size={\"default\"}\r\n          />\r\n        </div>\r\n        <div>\r\n          <Input\r\n            type={\"password\"}\r\n            placeholder={\"Пароль\"}\r\n            onChange={(evt) => {\r\n              handleChange(evt);\r\n            }}\r\n            icon={\"EditIcon\"}\r\n            value={formvalue.userpassword}\r\n            name={\"userpassword\"}\r\n            error={false}\r\n            errorText={\"Ошибка\"}\r\n            size={\"default\"}\r\n          />\r\n        </div>\r\n        {isFormChanged && (\r\n          <div className=\"mt-6\">\r\n            <Button type=\"primary\" size=\"small\">\r\n              Сохранить\r\n            </Button>\r\n            <Button\r\n              type=\"secondary\"\r\n              size=\"small\"\r\n              onClick={() => {\r\n                handleCancel();\r\n              }}\r\n            >\r\n              Отмена\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n","import { Route, Redirect, RouteProps, useLocation } from \"react-router-dom\";\r\nimport { useAppSelector } from \"../../utils/types\";\r\n\r\nfunction ProtectedRoute(props: RouteProps) {\r\n  const { loggedIn } = useAppSelector((state) => ({\r\n    loggedIn: state.user.loggedIn,\r\n  }));\r\n  const location = useLocation();\r\n  return (\r\n    <Route\r\n      {...props}\r\n      children={\r\n        loggedIn ? (\r\n          props.children\r\n        ) : (\r\n          <Redirect to={{ pathname: \"/login\", state: { from: location } }} />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","import { TIngredient } from \"../../utils/types\";\r\nimport ingredientDetailsStyles from \"./ingredient-details.module.css\";\r\n\r\nexport function IngredientDetails({ ingredient }: { ingredient: TIngredient }) {\r\n  const {\r\n    image_large: image,\r\n    name,\r\n    calories,\r\n    proteins,\r\n    fat,\r\n    carbohydrates,\r\n  } = ingredient || {};\r\n  return (\r\n    <div className={`${ingredientDetailsStyles.details} pt-10 pb-15`}>\r\n      <div className={ingredientDetailsStyles.content}>\r\n        <img className={ingredientDetailsStyles.image} src={image} alt={name} />\r\n        <p className=\"text text_type_main-medium mt-4 mb-8\">{name}</p>\r\n        <ul className={ingredientDetailsStyles.list}>\r\n          <li>\r\n            <p className=\"text text_type_main-default text_color_inactive mb-2\">\r\n              Калории,ккал\r\n            </p>\r\n            <span className=\"text text_type_digits-default text_color_inactive\">\r\n              {calories}\r\n            </span>\r\n          </li>\r\n          <li>\r\n            <p className=\"text text_type_main-default text_color_inactive mb-2\">\r\n              Белки, г\r\n            </p>\r\n            <span className=\"text text_type_digits-default text_color_inactive\">\r\n              {proteins}\r\n            </span>\r\n          </li>\r\n          <li>\r\n            <p className=\"text text_type_main-default text_color_inactive mb-2\">\r\n              Жиры, г\r\n            </p>\r\n            <span className=\"text text_type_digits-default text_color_inactive\">\r\n              {fat}\r\n            </span>\r\n          </li>\r\n          <li>\r\n            <p className=\"text text_type_main-default text_color_inactive mb-2\">\r\n              Углеводы, г\r\n            </p>\r\n            <span className=\"text text_type_digits-default text_color_inactive\">\r\n              {carbohydrates}\r\n            </span>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useParams } from \"react-router-dom\";\r\nimport { useAppSelector } from \"../../utils/types\";\r\nimport { IngredientDetails } from \"./ingredient-details\";\r\n\r\nexport function IngredientDetailsPage() {\r\n  const { id } = useParams<{ id: string }>();\r\n\r\n  const { ingredients } = useAppSelector((state) => {\r\n    return {\r\n      ingredients: state.ingredients.ingredients,\r\n    };\r\n  });\r\n\r\n  const ingredient = ingredients.find((ingredient) => {\r\n    return ingredient._id === id;\r\n  });\r\n\r\n  return ingredient ? <IngredientDetails ingredient={ingredient} /> : null;\r\n}\r\n","import { useMemo } from \"react\";\r\nimport { useCallback } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { DELETE_SELECTED_INGREDIENT_DATA } from \"../../services/actions/ingredients-actions\";\r\nimport { useAppDispatch, useAppSelector } from \"../../utils/types\";\r\nimport { IngredientDetails } from \"../ingredient-details/ingredient-details\";\r\nimport { Modal } from \"../modal/modal\";\r\n\r\nexport function IngredientDetailsModal() {\r\n  const { id } = useParams<{ id: string }>();\r\n  const history = useHistory();\r\n  const dispatch = useAppDispatch();\r\n  const { selectedIngredient, ingredients } = useAppSelector(\r\n    ({ ingredients: { ingredients, selectedIngredient } }) => {\r\n      return {\r\n        ingredients,\r\n        selectedIngredient,\r\n      };\r\n    }\r\n  );\r\n  const ingredient = useMemo(() => {\r\n    if (selectedIngredient) {\r\n      return selectedIngredient;\r\n    }\r\n    return ingredients.find((ingredient) => ingredient._id === id);\r\n  }, [id, selectedIngredient, ingredients]);\r\n  const handleIngredientDetailsClose = useCallback(() => {\r\n    dispatch({\r\n      type: DELETE_SELECTED_INGREDIENT_DATA,\r\n    });\r\n    history.goBack();\r\n  }, [dispatch, history]);\r\n  return (\r\n    <Modal\r\n      isVisible={!!ingredient}\r\n      onClose={handleIngredientDetailsClose}\r\n      title=\"Детали ингредиента\"\r\n    >\r\n      {ingredient && <IngredientDetails ingredient={ingredient} />}\r\n    </Modal>\r\n  );\r\n}\r\n","import { Route, Redirect, RouteProps } from \"react-router-dom\";\r\nimport { useAppSelector } from \"../../utils/types\";\r\n\r\nfunction PublicRoute(props: RouteProps) {\r\n  const { loggedIn } = useAppSelector((state) => ({\r\n    loggedIn: state.user.loggedIn,\r\n  }));\r\n  return (\r\n    <Route\r\n      {...props}\r\n      children={!loggedIn ? props.children : <Redirect to=\"/login\" />}\r\n    />\r\n  );\r\n}\r\n\r\nexport default PublicRoute;\r\n","export const Feed = () => {\r\n  return <></>;\r\n};\r\n","import {\r\n  BurgerIcon,\r\n  ListIcon,\r\n  Logo,\r\n  ProfileIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport header from \"./header.module.css\";\r\n\r\nfunction Header() {\r\n  return (\r\n    <header className={`${header.header} p-4`}>\r\n      <nav className={header.nav}>\r\n        <NavLink\r\n          exact\r\n          to=\"/\"\r\n          className={`${header.navLink} pr-5 pt-4 pb-4 mr-2`}\r\n          activeClassName={header.active_link}\r\n        >\r\n          <BurgerIcon type=\"primary\" />\r\n          <span className={`text text_type_main-default ml-2`}>\r\n            Конструктор\r\n          </span>\r\n        </NavLink>\r\n        <NavLink\r\n          to=\"/feed\"\r\n          className={`${header.navLink} pl-5 pr-5 pt-4 pb-4`}\r\n          activeClassName={header.active_link}\r\n        >\r\n          <ListIcon type=\"primary\" />\r\n          <span className={`text text_type_main-default ml-2`}>\r\n            Лента заказов\r\n          </span>\r\n        </NavLink>\r\n      </nav>\r\n      <Logo />\r\n      <div className={header.auth}>\r\n        <NavLink\r\n          exact\r\n          to=\"/profile\"\r\n          className={`${header.navLink} pl-5 pr-5 pt-4 pb-4`}\r\n          activeClassName={header.active_link}\r\n        >\r\n          <ProfileIcon type=\"primary\" />\r\n          <span className={`text text_type_main-default ml-2`}>\r\n            Личный кабинет\r\n          </span>\r\n        </NavLink>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import appstyles from \"../app/app.module.css\";\r\nimport { Route, Switch, useLocation } from \"react-router-dom\";\r\nimport { Location } from \"history\";\r\nimport { Constructor } from \"../../pages/constructor\";\r\nimport { Register } from \"../../pages/register\";\r\nimport { Login } from \"../../pages/login\";\r\nimport { ForgotPassword } from \"../../pages/forgot-password\";\r\nimport { ResetPassword } from \"../../pages/reset-password\";\r\nimport { Profile } from \"../../pages/profile\";\r\nimport ProtectedRoute from \"../protected-route/protected-route\";\r\nimport { IngredientDetailsPage } from \"../ingredient-details/ingredient-details-page\";\r\nimport { IngredientDetailsModal } from \"../ingredient-details-modal/ingredient-details-modal\";\r\nimport PublicRoute from \"../public-route/public-route\";\r\nimport { Feed } from \"../../pages/feed\";\r\nimport Header from \"../header/header\";\r\nimport { useAppDispatch } from \"../../utils/types\";\r\nimport { useEffect } from \"react\";\r\nimport { getIngredientsApi } from \"../../services/actions/ingredients-actions\";\r\n\r\nexport function AppRoutes() {\r\n  const location = useLocation<{ background: Location }>();\r\n  const background = location.state && location.state.background;\r\n  const dispatch = useAppDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(getIngredientsApi());\r\n  }, [dispatch]);\r\n  return (\r\n    <div className={appstyles.page}>\r\n      <Header />\r\n      <Switch location={background || location}>\r\n        <Route exact path=\"/\">\r\n          <Constructor />\r\n        </Route>\r\n        <PublicRoute path=\"/register\">\r\n          <Register />\r\n        </PublicRoute>\r\n        <PublicRoute path=\"/login\">\r\n          <Login />\r\n        </PublicRoute>\r\n        <PublicRoute path=\"/forgot-password\">\r\n          <ForgotPassword />\r\n        </PublicRoute>\r\n        <PublicRoute path=\"/reset-password\">\r\n          <ResetPassword />\r\n        </PublicRoute>\r\n        <ProtectedRoute path=\"/profile\">\r\n          <Profile />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path=\"/ingredients/:id\">\r\n          <IngredientDetailsPage />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path=\"/profile/orders\">\r\n          <IngredientDetailsModal />\r\n        </ProtectedRoute>\r\n        <Route path=\"/feed\" exact>\r\n          <Feed />\r\n        </Route>\r\n        <Route path=\"/feed/:id\">\r\n          <div>feed id</div>\r\n        </Route>\r\n        <ProtectedRoute path=\"/profile/orders\" exact>\r\n          <div>profile orders</div>\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path=\"/profile/orders/:id\">\r\n          <div>profile orders id</div>\r\n        </ProtectedRoute>\r\n      </Switch>\r\n      {/* Show the modal when a background page is set */}\r\n      {background && (\r\n        <Route path=\"/ingredients/:id\" children={<IngredientDetailsModal />} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { BrowserRouter } from \"react-router-dom\";\r\nimport { AppRoutes } from \"../app-routes/app-routes\";\r\n\r\nfunction App() {\r\n  return (\r\n    <BrowserRouter>\r\n      <AppRoutes />\r\n    </BrowserRouter>\r\n  );\r\n}\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { composeWithDevToolsDevelopmentOnly } from \"@redux-devtools/extension\";\r\n\r\nexport const composeEnhancers = composeWithDevToolsDevelopmentOnly;\r\n","import { Reducer } from \"redux\";\r\nimport { TActions } from \"../../utils/tactions\";\r\nimport { TSelectedIngredient } from \"../../utils/types\";\r\nimport {\r\n  DELETE_IGREDIENT,\r\n  DROP_INGREDIENT,\r\n  GET_ORDER_NUMBER_SUCCESS,\r\n  REORDER_CONSTRUCTOR_ITEM,\r\n} from \"../actions/burger-constructor-actions\";\r\n\r\ntype TBurgerConstructorState = {\r\n  selectedIngredients: TSelectedIngredient[];\r\n  selectedBun: TSelectedIngredient | null;\r\n};\r\n\r\nconst burgerConstructorInitialState: TBurgerConstructorState = {\r\n  selectedIngredients: [],\r\n  selectedBun: null,\r\n};\r\n\r\nexport const burgerConstructorReducer: Reducer<\r\n  TBurgerConstructorState,\r\n  TActions\r\n> = (state = burgerConstructorInitialState, action) => {\r\n  switch (action.type) {\r\n    case GET_ORDER_NUMBER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        selectedIngredients: [],\r\n        selectedBun: null,\r\n      };\r\n    }\r\n    case DROP_INGREDIENT: {\r\n      const { ingredient } = action.payload;\r\n      if (ingredient.type === \"bun\") {\r\n        return {\r\n          ...state,\r\n          selectedBun: ingredient,\r\n        };\r\n      }\r\n      return {\r\n        ...state,\r\n        selectedIngredients: [...state.selectedIngredients, ingredient],\r\n      };\r\n    }\r\n    case DELETE_IGREDIENT: {\r\n      return {\r\n        ...state,\r\n        selectedIngredients: state.selectedIngredients.filter(\r\n          (item, index) => index !== action.payload.deleteIndex\r\n        ),\r\n      };\r\n    }\r\n    case REORDER_CONSTRUCTOR_ITEM: {\r\n      const { dragIndex, itemIndex } = action.payload;\r\n      const constructorItems = [...state.selectedIngredients];\r\n      let draggingItemIndex = constructorItems[dragIndex];\r\n      constructorItems[dragIndex] = constructorItems[itemIndex];\r\n      constructorItems[itemIndex] = draggingItemIndex;\r\n      return {\r\n        ...state,\r\n        selectedIngredients: constructorItems,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { TIngredient } from \"../../utils/types\";\r\nimport { Reducer } from \"redux\";\r\nimport { TActions } from \"../../utils/tactions\";\r\nimport { GET_INGREDIENTS_REQUEST, GET_INGREDIENTS_SUCCESS, GET_INGREDIENTS_FAILED, SELECT_INGREDIENT, DELETE_SELECTED_INGREDIENT_DATA } from \"../actions/ingredients-actions\";\r\n\r\ntype TIngredientsState = {\r\n  ingredients: TIngredient[];\r\n  ingredientsRequest: boolean;\r\n  ingredientsFailed: boolean;\r\n  selectedIngredient: TIngredient | null;\r\n};\r\n\r\nconst ingredientsInitialState: TIngredientsState = {\r\n  ingredients: [],\r\n  ingredientsRequest: false,\r\n  ingredientsFailed: false,\r\n  selectedIngredient: null,\r\n};\r\n\r\nexport const ingredientsReducer: Reducer<TIngredientsState, TActions> = (\r\n  state = ingredientsInitialState,\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case GET_INGREDIENTS_REQUEST: {\r\n      return {\r\n        ...state,\r\n        ingredientsFailed: false,\r\n        ingredientsRequest: true,\r\n      };\r\n    }\r\n    case GET_INGREDIENTS_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        ingredientsFailed: false,\r\n        ingredientsRequest: false,\r\n        ingredients: action.payload.ingredients,\r\n      };\r\n    }\r\n    case GET_INGREDIENTS_FAILED: {\r\n      return {\r\n        ...ingredientsInitialState,\r\n        ingredientsFailed: true,\r\n      };\r\n    }\r\n    case SELECT_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        selectedIngredient: action.payload.ingredient,\r\n      };\r\n    }\r\n    case DELETE_SELECTED_INGREDIENT_DATA: {\r\n      return {\r\n        ...state,\r\n        selectedIngredient: null,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { Reducer } from \"redux\";\r\nimport { TOrder } from \"../../utils/types\";\r\nimport { GET_ORDER_NUMBER_SUCCESS } from \"../actions/burger-constructor-actions\";\r\nimport { GET_ORDER_NUMBER_REQUEST, GET_ORDER_NUMBER_FAILED, DELETE_ORDER_DATA } from \"../actions/order-actions\";\r\n\r\ntype TOrderState = {\r\n  order: TOrder | null;\r\n  orderNumberRequest: boolean;\r\n  orderNumberFailed: boolean;\r\n};\r\n\r\nconst orderInitialState: TOrderState = {\r\n  order: null,\r\n  orderNumberRequest: false,\r\n  orderNumberFailed: false,\r\n};\r\n\r\nexport const orderReducer: Reducer<TOrderState> = (\r\n  state = orderInitialState,\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case GET_ORDER_NUMBER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        orderNumberRequest: true,\r\n      };\r\n    }\r\n    case GET_ORDER_NUMBER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        orderNumberRequest: false,\r\n        orderNumberFailed: false,\r\n        order: action.payload.order,\r\n      };\r\n    }\r\n    case GET_ORDER_NUMBER_FAILED: {\r\n      return {\r\n        ...orderInitialState,\r\n        orderNumberFailed: true,\r\n      };\r\n    }\r\n    case DELETE_ORDER_DATA: {\r\n      return {\r\n        ...state,\r\n        order: null,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { Reducer } from \"redux\";\r\nimport { FORGOT_PASSWORD_SET_EMAIL, RESET_PASSWORD } from \"../actions/reset-password-actions\";\r\n\r\ntype TResetPasswordState = {\r\n  email: string;\r\n};\r\n\r\nconst resetPasswordInitialState: TResetPasswordState = {\r\n  email: \"\",\r\n};\r\n\r\nexport const resetPasswordReducer: Reducer<TResetPasswordState> = (\r\n  state = resetPasswordInitialState,\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case FORGOT_PASSWORD_SET_EMAIL: {\r\n      return {\r\n        ...state,\r\n        email: action.payload.email,\r\n      };\r\n    }\r\n    case RESET_PASSWORD: {\r\n      return {\r\n        ...state,\r\n        email: \"\",\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { Reducer } from \"redux\";\r\nimport {\r\n  USER_REGISTER,\r\n  USER_SET_DATA,\r\n  USER_LOGIN,\r\n  USER_LOGOUT,\r\n  GET_USER_INFO,\r\n  SET_USER_INFO,\r\n} from \"../actions/user-actions\";\r\n\r\ntype TUserState = {\r\n  email: string;\r\n  password: string;\r\n  name: string;\r\n  loggedIn: boolean;\r\n};\r\n\r\nconst userInitialState: TUserState = {\r\n  email: \"\",\r\n  password: \"\",\r\n  name: \"\",\r\n  loggedIn: !!localStorage.getItem(\"refreshToken\"),\r\n};\r\n\r\nexport const userReducer: Reducer<TUserState> = (\r\n  state = userInitialState,\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case USER_REGISTER: {\r\n      return {\r\n        ...state,\r\n        email: action.payload.email ?? state.email,\r\n        password: action.payload.password ?? state.password,\r\n        name: action.payload.name ?? state.name,\r\n      };\r\n    }\r\n    case USER_SET_DATA: {\r\n      return {\r\n        ...state,\r\n        email: action.payload.email ?? state.email,\r\n        password: action.payload.password ?? state.password,\r\n      };\r\n    }\r\n    case USER_LOGIN: {\r\n      return {\r\n        ...state,\r\n        loggedIn: true,\r\n      };\r\n    }\r\n    case USER_LOGOUT: {\r\n      return {\r\n        ...state,\r\n        email: \"\",\r\n        password: \"\",\r\n        loggedIn: false,\r\n      };\r\n    }\r\n    case GET_USER_INFO: {\r\n      return {\r\n        ...state,\r\n        email: action.payload.email ?? state.email,\r\n        name: action.payload.name ?? state.name,\r\n      };\r\n    }\r\n    case SET_USER_INFO: {\r\n      return {\r\n        ...state,\r\n        email: action.payload.email ?? state.email,\r\n        name: action.payload.name ?? state.name,\r\n        password: action.payload.password ?? state.password,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from \"redux\";\r\nimport { burgerConstructorReducer } from \"./reducers/burger-constructor-reducer\";\r\nimport { ingredientsReducer } from \"./reducers/ingredients-reducer\";\r\nimport { orderReducer } from \"./reducers/order-reducer\";\r\nimport { resetPasswordReducer } from \"./reducers/reset-password-reducer\";\r\nimport { userReducer } from \"./reducers/user-reducer\";\r\n\r\nexport const rootReducer = combineReducers({\r\n  order: orderReducer,\r\n  ingredients: ingredientsReducer,\r\n  burgerConstructor: burgerConstructorReducer,\r\n  user: userReducer,\r\n  resetPassword: resetPasswordReducer,\r\n});\r\n","import { composeEnhancers } from \"../redux-devtools\";\r\nimport thunk from \"redux-thunk\";\r\nimport { applyMiddleware, createStore } from \"redux\";\r\nimport { rootReducer } from \"../services/root-reducer\";\r\n\r\nconst enhancer = composeEnhancers(applyMiddleware(thunk));\r\nexport const store = createStore(rootReducer, enhancer);\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./components/app/app\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Provider } from \"react-redux\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport { store } from \"./utils/store\";\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <DndProvider backend={HTML5Backend}>\r\n        <App />\r\n      </DndProvider>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header_header__2PCJV\",\"nav\":\"header_nav__Yn7D9\",\"navLink\":\"header_navLink__2qrHS\",\"active_link\":\"header_active_link__1bgGB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"profile_main__242OX\",\"nav\":\"profile_nav__B_z69\",\"active_link\":\"profile_active_link__MU5sa\",\"navlink\":\"profile_navlink__1MZdx\",\"logout\":\"profile_logout__3chQM\",\"form\":\"profile_form__3ORnl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"constructor_section\":\"burger-constructor_constructor_section__3FdfH\",\"constructor_list\":\"burger-constructor_constructor_list__2mBcy\",\"constructor_items\":\"burger-constructor_constructor_items__2t2yl\",\"order\":\"burger-constructor_order__SsnH4\",\"scrollbox\":\"burger-constructor_scrollbox__3Z23P\",\"scrollbar\":\"burger-constructor_scrollbar__-c9tN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients_section\":\"burger-ingredients_ingredients_section__l8mYY\",\"ingredients_tabs\":\"burger-ingredients_ingredients_tabs__1zFeW\",\"scrollbox\":\"burger-ingredients_scrollbox__2apTV\",\"scrollbar\":\"burger-ingredients_scrollbar__2rVSV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"details\":\"ingredient-details_details__28kCX\",\"content\":\"ingredient-details_content__1TZrm\",\"image\":\"ingredient-details_image__3EkJL\",\"list\":\"ingredient-details_list__3jN0U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"details\":\"order-details_details__2Chva\",\"checkmark\":\"order-details_checkmark__3mkme\",\"digits\":\"order-details_digits__33cjV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__-GJUR\",\"header\":\"modal_header__2r55q\",\"close\":\"modal_close__VSo9S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients_list\":\"ingredients-section_ingredients_list__1mz_n\",\"ingredients_list_title\":\"ingredients-section_ingredients_list_title__2YZ9h\",\"cards_box\":\"ingredients-section_cards_box__1j8gA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"constructor_item\":\"burger-constructor-item_constructor_item__N6dYK\",\"ingredient_button\":\"burger-constructor-item_ingredient_button__1wYRz\",\"drag_button\":\"burger-constructor-item_drag_button__2w73P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient_card\":\"ingredient-card_ingredient_card__1DunG\",\"price\":\"ingredient-card_price__zyJet\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form__block\":\"pages_form__block__2hBXl\",\"form\":\"pages_form__8Bp6z\",\"login\":\"pages_login__2A9qH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"app_page__1NvGu\"};"],"sourceRoot":""}