(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{100:function(e,t,n){e.exports={page:"app_page__1NvGu"}},102:function(e,t,n){e.exports={main:"main_main__OFmn0"}},103:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__3PHOs"}},115:function(e,t,n){},200:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(32),i=n.n(a),s=(n(115),n(7)),o=n(100),l=n.n(o),d=n(10),u=n(4),j=n(24),m=n.n(j),b=n(0);var p=function(){return Object(b.jsxs)("header",{className:"".concat(m.a.header," p-4"),children:[Object(b.jsxs)("nav",{className:m.a.nav,children:[Object(b.jsxs)(s.c,{exact:!0,to:"/",className:"".concat(m.a.navLink," pr-5 pt-4 pb-4 mr-2"),activeClassName:m.a.active_link,children:[Object(b.jsx)(u.BurgerIcon,{type:"primary"}),Object(b.jsx)("span",{className:"text text_type_main-default ml-2",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(b.jsxs)("button",{className:"".concat(m.a.navLink," pl-5 pr-5 pt-4 pb-4"),children:[Object(b.jsx)(u.ListIcon,{type:"primary"}),Object(b.jsx)("span",{className:"text text_type_main-default ml-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(b.jsx)(u.Logo,{}),Object(b.jsx)("div",{className:m.a.auth,children:Object(b.jsxs)(s.c,{exact:!0,to:"/profile",className:"".concat(m.a.navLink," pl-5 pr-5 pt-4 pb-4"),activeClassName:m.a.active_link,children:[Object(b.jsx)(u.ProfileIcon,{type:"primary"}),Object(b.jsx)("span",{className:"text text_type_main-default ml-2",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})},O=n(102),g=n.n(O),f=n(51),_=n.n(f),x=n.p+"static/media/check.2022ce2b.svg";function h(e){var t=e.order;return t?Object(b.jsxs)("div",{className:"".concat(_.a.details," pb-30"),children:[Object(b.jsx)("p",{className:"".concat(_.a.digits," text text_type_digits-large mb-8"),children:t.number}),Object(b.jsx)("p",{className:"text text_type_main-medium",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(b.jsx)("img",{className:"".concat(_.a.checkmark," mt-15 mb-15"),src:x,alt:"order-details"}),Object(b.jsx)("p",{className:"text text_type_main-default mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]}):null}var v=n(52),y=n.n(v),N=n(103),k=n.n(N);function I(e){var t=e.onClick;return Object(b.jsx)("div",{className:k.a.overlay,onClick:t})}var T=function(e){var t=e.children,n=e.title,r=e.onClose,i=e.isVisible;return Object(c.useEffect)((function(){if(i){var e=function(e){"Escape"===e.key&&r()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}}),[r,i]),i?Object(a.createPortal)(Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(I,{onClick:r}),Object(b.jsxs)("div",{className:"".concat(y.a.modal," pr-10 pl-10 pt-10"),children:[Object(b.jsxs)("div",{className:y.a.header,children:[Object(b.jsx)("h2",{className:"text text_type_main-large",children:n}),Object(b.jsx)("button",{className:y.a.close,onClick:r,children:Object(b.jsx)(u.CloseIcon,{type:"primary"})})]}),t]})]}),document.querySelector("#modals")):null},C=n(17),E=n(12),w=n(2),S=n(38),R=function(){return Object(S.b)()},D=S.c,B=n(209),F=n(75),P=n.n(F);function U(e){var t=e.children,n=e.ingredient,c=e.innerRef,r=e.className,a=e.onClick,i=Object(d.h)();return Object(b.jsx)(s.b,{to:{pathname:"/ingredients/".concat(n._id),state:{background:i}},innerRef:c,className:r,onClick:a,children:t},n._id)}var z=Object(c.forwardRef)((function(e,t){var n=e.ingredient,r=e.onIngredientClick,a=e.count,i=Object(c.useCallback)((function(){r(n)}),[r,n]);return Object(b.jsx)(U,{ingredient:n,className:P.a.ingredient_card,innerRef:t,onClick:i,children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(u.Counter,{count:a,size:"small"}),Object(b.jsx)("img",{src:n.image,alt:n.name}),Object(b.jsxs)("div",{className:"".concat(P.a.price," mt-1 mb-1"),children:[Object(b.jsx)("span",{className:"text text_type_main-default mr-2",children:n.price})," ",Object(b.jsx)(u.CurrencyIcon,{type:"primary"})]}),Object(b.jsx)("p",{children:n.name})]})})}));var L=function(e){var t=e.ingredient,n=e.onIngredientClick,c=e.count,r=Object(B.a)({type:"ingredient",item:{ingredient:t}}),a=Object(C.a)(r,2)[1];return Object(b.jsx)(z,{ingredient:t,onIngredientClick:n,count:c,ref:a})},G=n(53),A=n.n(G),J=Object(c.forwardRef)((function(e,t){var n=e.title,c=e.ingredients,r=e.type,a=e.onIngredientClick,i=e.counts;return Object(b.jsxs)("section",{ref:t,className:"".concat(A.a.ingredients_list," pt-10"),children:[Object(b.jsx)("h2",{className:"".concat(A.a.ingredients_list_title," mb-6 text text_type_main-medium"),children:n}),Object(b.jsx)("div",{className:"".concat(A.a.cards_box," pl-4 pr-4"),children:c.filter((function(e){return e.type===r})).map((function(e){return Object(b.jsx)(L,{ingredient:e,onIngredientClick:a,count:i[e._id]},e._id)}))})]})})),M=n(39),q=n.n(M);var V=function(e){var t=e.handleIngredientDetailsOpen,n=D((function(e){var t=e.burgerConstructor;return{selectedIngredients:t.selectedIngredients,selectedBun:t.selectedBun}})),r=n.selectedIngredients,a=n.selectedBun,i=D((function(e){return{ingredients:e.ingredients.ingredients}})).ingredients,s=Object(c.useMemo)((function(){return i.reduce((function(e,t){return"bun"===t.type?Object(w.a)(Object(w.a)({},e),{},Object(E.a)({},t._id,a&&t._id===a._id?1:0)):Object(w.a)(Object(w.a)({},e),{},Object(E.a)({},t._id,r.filter((function(e){return e._id===t._id})).length))}),{})}),[i,r,a]),o=Object(c.useState)("bun"),l=Object(C.a)(o,2),d=l[0],j=l[1],m=Object(c.useRef)(null),p=Object(c.useRef)(null),O=Object(c.useRef)(null),g=Object(c.useCallback)((function(){j("bun")}),[j]),f=Object(c.useCallback)((function(){j("sauce")}),[j]),_=Object(c.useCallback)((function(){j("main")}),[j]),x=Object(c.useCallback)((function(e){if(null!=p.current&&null!=O.current){var t=e.target.scrollTop,n=p.current.offsetTop,c=O.current.offsetTop;t+200<=n?g():t+200<=c?f():_()}}),[g,_,f]);return Object(b.jsxs)("section",{className:"".concat(q.a.ingredients_section," pt-10 mr-10"),children:[Object(b.jsx)("h1",{className:"text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(b.jsxs)("div",{className:"".concat(q.a.ingredients_tabs," pt-5"),children:[Object(b.jsx)(u.Tab,{value:"bun",active:"bun"===d,onClick:g,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(b.jsx)(u.Tab,{value:"sauce",active:"sauce"===d,onClick:f,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(b.jsx)(u.Tab,{value:"main",active:"main"===d,onClick:_,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(b.jsxs)("div",{className:"".concat(q.a.scrollbox," ").concat(q.a.scrollbar),onScroll:x,children:[Object(b.jsx)(J,{ref:m,title:"\u0411\u0443\u043b\u043a\u0438",type:"bun",ingredients:i,counts:s,onIngredientClick:t},"bun"),Object(b.jsx)(J,{ref:p,title:"\u0421\u043e\u0443\u0441\u044b",type:"sauce",ingredients:i,counts:s,onIngredientClick:t},"sauce"),Object(b.jsx)(J,{ref:O,title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",type:"main",ingredients:i,counts:s,onIngredientClick:t},"main")]})]})},H=n(210),Y=n(29),Z=n.n(Y),Q="https://norma.nomoreparties.space/api",W=function(e){return e&&e.ok?e.json():e.json().then((function(t){return Promise.reject({message:"\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status),data:t})}))};function X(e){return fetch("".concat(Q,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}).then((function(e){return W(e)}))}function $(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function K(e,t,n){var c=(n=n||{}).expires;if("number"==typeof c&&c){var r=new Date;r.setTime(r.getTime()+1e3*c),c=n.expires=r}if(c&&c instanceof Date&&c.toUTCString&&(n.expires=c.toUTCString()),null!=t){var a=e+"="+(t=encodeURIComponent(t));for(var i in n){a+="; "+i;var s=n[i];!0!==s&&(a+="="+s)}document.cookie=a}}var ee="GET_INGREDIENTS_REQUEST",te="GET_INGREDIENTS_SUCCESS",ne="GET_INGREDIENTS_FAILED",ce="SELECT_INGREDIENT",re="DELETE_SELECTED_INGREDIENT_DATA",ae="GET_ORDER_NUMBER_REQUEST",ie="GET_ORDER_NUMBER_SUCCESS",se="GET_ORDER_NUMBER_FAILED",oe="DELETE_ORDER_DATA",le="DROP_INGREDIENT",de="DELETE_IGREDIENT",ue="REORDER_CONSTRUCTOR_ITEM",je="USER_REGISTER",me="USER_LOGIN",be="USER_SET_DATA",pe="USER_LOGOUT",Oe="GET_USER_INFO",ge="SET_USER_INFO",fe="FORGOT_PASSWORD_SET_EMAIL",_e="RESET_PASSWORD",xe=function(){return function(e){e({type:ee}),fetch("".concat(Q,"/ingredients")).then((function(e){return W(e)})).then((function(t){t&&t.success?e({type:te,payload:{ingredients:t.data}}):e({type:ne})})).catch((function(e){return console.log(e)}))}},he=function(e){return function(t){t({type:ae}),function(e){return fetch("".concat(Q,"/orders"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ingredients:e})}).then((function(e){return W(e)}))}(e).then((function(e){e&&e.success?t({type:ie,payload:{order:e.order}}):t({type:se})}))}},ve=function(e,t,n,c){return function(){(function(e){var t=e.email,n=e.password,c=e.name;return fetch("".concat(Q,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n,name:c})}).then((function(e){return W(e)}))})({email:e,password:t,name:n}).then((function(e){console.log("registerUser",e),c.push("/login")}))}},ye=function(e,t,n){return function(c){(function(e){var t=e.email,n=e.password;return fetch("".concat(Q,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}).then((function(e){return W(e)}))})({email:e,password:t}).then((function(e){if(console.log("loginUser",e),null!=e.accessToken){var t=e.accessToken.split("Bearer ")[1];t&&e.refreshToken&&(K("authToken",t),localStorage.setItem("refreshToken",e.refreshToken)),e.success&&(c({type:me}),n.push("/"))}}))}},Ne=function(e,t){return function(n){null!=e&&function(e){return fetch("".concat(Q,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}).then((function(e){return W(e)}))}(e).then((function(e){console.log("logoutUser",e),e.success&&localStorage.removeItem("refreshToken")})).then((function(e){n({type:pe}),t.push("/login")}))}},ke=function(e){return function(t){null!=e&&function(e){return fetch("".concat(Q,"/auth/user"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return W(e)}))}(e).then((function(e){console.log("getUserInfoApi",e),t({type:Oe,payload:{name:e.user.name,email:e.user.email}})})).catch((function(e){if(console.log(e),"jwt expired"===e.data.message){var t=localStorage.getItem("refreshToken");if(null==t)return;X(t).then((function(e){console.log("refreshToken",e);var t=e.accessToken.split("Bearer ")[1];t&&e.refreshToken&&(K("authToken",t),localStorage.setItem("refreshToken",e.refreshToken))})).catch((function(e){return console.log(e)}))}}))}},Ie=function(e,t,n,c){return function(r){null!=e&&function(e,t){var n=t.name,c=t.email,r=t.password;return fetch("".concat(Q,"/auth/user"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({name:n,email:c,password:r})}).then((function(e){return W(e)}))}(e,{name:t,email:n,password:c}).then((function(e){console.log("setUserInfoApi",e),r({type:ge,payload:{name:e.user.name,email:e.user.email,password:e.user.password}})})).catch((function(e){if(console.log(e),"jwt expired"===e.data.message){var t=localStorage.getItem("refreshToken");if(null==t)return;X(t).then((function(e){console.log("refreshToken",e);var t=e.accessToken.split("Bearer ")[1];t&&e.refreshToken&&(K("authToken",t),localStorage.setItem("refreshToken",e.refreshToken))})).catch((function(e){return console.log(e)}))}}))}},Te=function(e,t){return function(){(function(e){return fetch("".concat(Q,"/password-reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}).then((function(e){return W(e)}))})(e).then((function(e){console.log("forgotPasswordApi",e),e.success&&(t.push("/reset-password"),console.log("redir",e))})).catch((function(e){return console.log(e)}))}},Ce=function(e,t,n){return function(c){(function(e,t){return fetch("".concat(Q,"/password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,token:t})}).then((function(e){return W(e)}))})(e,t).then((function(e){console.log(e),e.success&&(n.push("/"),c({type:_e}))}))}},Ee=n(54),we=n.n(Ee),Se=Object(c.forwardRef)((function(e,t){var n=e.ingredient,r=e.index,a=e.handleDelete,i=Object(c.useCallback)((function(){return a(r)}),[a,r]);return Object(b.jsxs)("div",{className:"".concat(we.a.constructor_item," mb-4 pl-8"),ref:t,children:[Object(b.jsx)("div",{className:we.a.ingredient_button,children:Object(b.jsx)("button",{className:we.a.drag_button,children:Object(b.jsx)(u.DragIcon,{type:"primary"})})}),Object(b.jsx)(u.ConstructorElement,{text:n.name,price:n.price,thumbnail:n.image,handleClose:i})]})}));var Re=function(e){var t=e.ingredient,n=e.index,r=e.handleDelete,a=Object(c.useRef)(null),i=R(),s=Object(B.a)({type:"constructor-item",item:{dragIndex:n}}),o=Object(C.a)(s,2)[1],l=Object(H.a)({accept:"constructor-item",drop:function(e){var t=e.dragIndex;i({type:ue,payload:{itemIndex:n,dragIndex:t}})}}),d=Object(C.a)(l,2)[1];return Object(c.useEffect)((function(){o(d(a))}),[o,d]),Object(b.jsx)(Se,{ingredient:t,index:n,handleDelete:r,ref:a})},De=Object(c.forwardRef)((function(e,t){var n=e.onSubmit,r=e.ingredients,a=R(),i=D((function(e){return e.burgerConstructor.selectedIngredients})),s=D((function(e){return e.burgerConstructor.selectedBun})),o=Object(c.useMemo)((function(){return i.reduce((function(e,t){return e+t.price}),s?s.price:0)}),[i,s]),l=Object(c.useCallback)((function(){s&&n(i.concat(s))}),[n,i,s]),d=Object(c.useCallback)((function(e){a({type:de,payload:{deleteIndex:e}})}),[a]);return 0===r.length?null:Object(b.jsxs)("section",{className:"".concat(Z.a.constructor_section," pt-25"),ref:t,children:[Object(b.jsxs)("div",{className:Z.a.constructor_list,children:[s&&Object(b.jsx)("div",{className:"pl-9 pr-4",children:Object(b.jsx)(u.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(s.name," (\u0432\u0435\u0440\u0445)"),price:s.price,thumbnail:s.image})}),Object(b.jsx)("div",{className:"".concat(Z.a.constructor_items," ").concat(Z.a.scrollbar,"  mt-4 mb-4 pl-4 pr-4"),children:i.map((function(e,t){return Object(b.jsx)(Re,{ingredient:e,index:t,handleDelete:d},e.uid)}))}),s?Object(b.jsx)("div",{className:"pl-9 pr-4",children:Object(b.jsx)(u.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(s.name," (\u043d\u0438\u0437)"),price:s.price,thumbnail:s.image})}):null]}),Object(b.jsxs)("div",{className:"".concat(Z.a.order," pt-10"),children:[Object(b.jsxs)("div",{className:"".concat(Z.a.order_price," mr-10"),children:[Object(b.jsx)("span",{className:"text text_type_digits-medium mr-2",children:o}),Object(b.jsx)(u.CurrencyIcon,{type:"primary"})]}),Object(b.jsx)(u.Button,{type:"primary",size:"large",onClick:l,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})})),Be=n(211);var Fe=function(e){var t=e.onSubmit,n=R(),c=Object(H.a)({accept:"ingredient",drop:function(e){var t=e.ingredient;n({type:le,payload:{ingredient:Object(w.a)(Object(w.a)({},t),{},{uid:Object(Be.a)()})}})}}),r=Object(C.a)(c,2)[1],a=D((function(e){return{ingredients:e.ingredients.ingredients}})).ingredients;return Object(b.jsx)(De,{onSubmit:t,ingredients:a,ref:r})};var Pe=function(){var e=R(),t=Object(d.g)(),n=D((function(e){var t=e.ingredients;return{ingredients:t.ingredients,selectedIngredient:t.selectedIngredient,order:e.order.order,loggedIn:e.user.loggedIn}})),r=n.order,a=n.loggedIn,i=Object(c.useCallback)((function(t){e({type:ce,payload:{ingredient:t}})}),[e]);Object(c.useEffect)((function(){e(xe())}),[e]);var s=Object(c.useCallback)((function(n){a?e(he(n.map((function(e){return e._id})))):t.push("/login")}),[e,t,a]),o=Object(c.useCallback)((function(){e({type:oe})}),[e]);return Object(b.jsxs)("main",{className:"".concat(g.a.main," pb-10"),children:[Object(b.jsx)(V,{handleIngredientDetailsOpen:i}),Object(b.jsx)(Fe,{onSubmit:s}),Object(b.jsx)(T,{isVisible:!!r,onClose:o,children:r?Object(b.jsx)(h,{order:r}):null})]})},Ue=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p,{}),Object(b.jsx)(Pe,{})]})},ze=n(9),Le=n.n(ze),Ge=function(){var e=R(),t=Object(d.g)(),n=D((function(e){return{email:e.user.email,password:e.user.password,name:e.user.name,loggedIn:e.user.loggedIn}})),r=n.email,a=n.password,i=n.name,o=Object(c.useCallback)((function(t){var n=t.target,c=n.name,r=n.value;e({type:je,payload:Object(E.a)({},c,r)})}),[e]),l=Object(c.useCallback)((function(n){n.preventDefault(),e(ve(r,a,i,t))}),[e,r,i,a,t]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p,{}),Object(b.jsx)("div",{className:Le.a.main,children:Object(b.jsxs)("div",{className:"".concat(Le.a.form__block," pt-20"),children:[Object(b.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(b.jsxs)("form",{className:Le.a.form,onSubmit:l,children:[Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(u.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(e){return o(e)},value:i,name:"name",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(u.Input,{type:"email",placeholder:"E-mail",onChange:function(e){return o(e)},value:r,name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(u.PasswordInput,{onChange:function(e){return o(e)},value:a,name:"password"})}),Object(b.jsx)(u.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(b.jsx)("div",{children:Object(b.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"," ",Object(b.jsx)(s.b,{to:"/login",className:Le.a.login,children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})})]})},Ae=function(){var e=R(),t=Object(d.g)(),n=D((function(e){return{email:e.user.email,password:e.user.password,loggedIn:e.user.loggedIn}})),r=n.email,a=n.password,i=Object(c.useCallback)((function(t){var n=t.target,c=n.name,r=n.value;e({type:be,payload:Object(E.a)({},c,r)})}),[e]),o=Object(c.useCallback)((function(n){n.preventDefault(),e(ye(r,a,t))}),[e,r,a,t]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p,{}),Object(b.jsx)("div",{className:Le.a.main,children:Object(b.jsxs)("div",{className:"".concat(Le.a.form__block," pt-20"),children:[Object(b.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u0445\u043e\u0434"}),Object(b.jsxs)("form",{className:Le.a.form,onSubmit:o,children:[Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(u.Input,{type:"email",placeholder:"E-mail",onChange:function(e){return i(e)},value:r,name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(u.PasswordInput,{onChange:function(e){return i(e)},value:a,name:"password"})}),Object(b.jsx)(u.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(b.jsx)("div",{className:Le.a.register,children:Object(b.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:["\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"," ",Object(b.jsx)(s.b,{to:"/register",className:Le.a.link,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})}),Object(b.jsx)("div",{className:Le.a.forgot_password,children:Object(b.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-4",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"," ",Object(b.jsx)(s.b,{to:"/forgot-password",className:Le.a.link,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})})]})})]})},Je=function(){var e=R(),t=Object(d.g)(),n=D((function(e){return{email:e.resetPassword.email}})).email,r=Object(c.useCallback)((function(t){var n=t.target,c=n.name,r=n.value;e({type:fe,payload:Object(E.a)({},c,r)})}),[e]),a=Object(c.useCallback)((function(c){c.preventDefault(),e(Te(n,t))}),[e,n,t]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p,{}),Object(b.jsx)("div",{className:Le.a.main,children:Object(b.jsxs)("div",{className:"".concat(Le.a.form__block," pt-20"),children:[Object(b.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(b.jsxs)("form",{className:Le.a.form,onSubmit:a,children:[Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(u.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:function(e){r(e)},value:n,name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(b.jsx)(u.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(b.jsx)("div",{children:Object(b.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"," ",Object(b.jsx)(s.b,{to:"/login",className:Le.a.link,children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})})]})},Me=function(){var e=Object(c.useState)({password:"",resetToken:""}),t=Object(C.a)(e,2),n=t[0],r=t[1],a=D((function(e){return{email:e.resetPassword.email}})).email,i=R(),o=Object(d.g)(),l=Object(c.useCallback)((function(e){var t=e.target,n=t.name,c=t.value;r(Object(E.a)({},n,c))}),[]),j=Object(c.useCallback)((function(e){e.preventDefault(),i(Ce(n.password,n.resetToken,o))}),[i,o,n]);return Object(c.useEffect)((function(){a||o.push("/forgot-password")}),[]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p,{}),Object(b.jsx)("div",{className:Le.a.main,children:Object(b.jsxs)("div",{className:"".concat(Le.a.form__block," pt-20"),children:[Object(b.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(b.jsxs)("form",{className:Le.a.form,onSubmit:j,children:[Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(u.PasswordInput,{onChange:function(e){return l(e)},value:n.password,name:"password"})}),Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(u.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:function(e){return l(e)},value:n.resetToken,name:"code",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(b.jsx)(u.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(b.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"," ",Object(b.jsx)(s.b,{to:"/login",className:Le.a.link,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})]})},qe=n(25),Ve=n.n(qe),He=function(){var e=D((function(e){return{name:e.user.name,email:e.user.email,password:e.user.password}})),t=e.name,n=e.email,r=e.password,a=Object(c.useState)({username:t,useremail:n,userpassword:r}),i=Object(C.a)(a,2),o=i[0],l=i[1],j=R(),m=Object(d.g)();Object(c.useEffect)((function(){j(ke($("authToken")))}),[j]),Object(c.useEffect)((function(){l((function(e){return Object(w.a)(Object(w.a)({},e),{},{username:t||"",useremail:n||""})}))}),[n,t]);var O=Object(c.useCallback)((function(e){l((function(t){return Object(w.a)(Object(w.a)({},t),{},Object(E.a)({},e.target.name,e.target.value))}))}),[]),g=Object(c.useCallback)((function(e){e.preventDefault(),j(Ie($("authToken"),o.username,o.useremail,o.userpassword))}),[j,o]),f=o.username!==t||o.useremail!==n||o.userpassword!==r;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p,{}),Object(b.jsxs)("div",{className:"".concat(Ve.a.main," pt-20"),children:[Object(b.jsxs)("nav",{className:"".concat(Ve.a.nav," mr-15"),children:[Object(b.jsx)(s.c,{to:"/profile",activeClassName:Ve.a.active_link,className:"".concat(Ve.a.navlink," text text_type_main-medium text_color_inactive mb-6"),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(b.jsx)(s.c,{to:"/",className:"".concat(Ve.a.navlink," text text_type_main-medium text_color_inactive mb-6"),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(b.jsx)("button",{className:"".concat(Ve.a.logout," text text_type_main-medium text_color_inactive mb-6"),onClick:function(){null!=localStorage.getItem("refreshToken")&&j(Ne(localStorage.getItem("refreshToken"),m))},children:"\u0412\u044b\u0445\u043e\u0434"}),Object(b.jsx)("p",{className:"".concat(Ve.a.nav_text," text text_type_main-default text_color_inactive"),children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),Object(b.jsxs)("form",{className:Ve.a.form,onSubmit:g,children:[Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(u.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(e){O(e)},icon:"EditIcon",value:o.username,name:"username",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(u.Input,{type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",onChange:function(e){O(e)},icon:"EditIcon",value:o.useremail,name:"useremail",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(b.jsx)("div",{children:Object(b.jsx)(u.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){O(e)},icon:"EditIcon",value:o.userpassword,name:"userpassword",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),f&&Object(b.jsxs)("div",{className:"mt-6",children:[Object(b.jsx)(u.Button,{type:"primary",size:"small",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(b.jsx)(u.Button,{type:"secondary",size:"small",onClick:function(){l({username:t,useremail:n,userpassword:r})},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})]})]})},Ye=n(50),Ze=["component","path","loggedIn"];var Qe=function(e){var t=e.component,n=e.path,c=e.loggedIn,r=Object(Ye.a)(e,Ze);return Object(b.jsx)(d.b,{path:n,children:function(){return c?Object(b.jsx)(t,Object(w.a)({},r)):Object(b.jsx)(d.a,{to:"/login"})}})},We=n(40),Xe=n.n(We);function $e(e){var t=e.ingredient||{},n=t.image_large,c=t.name,r=t.calories,a=t.proteins,i=t.fat,s=t.carbohydrates;return Object(b.jsx)("div",{className:"".concat(Xe.a.details," pt-10 pb-15"),children:Object(b.jsxs)("div",{className:Xe.a.content,children:[Object(b.jsx)("img",{className:Xe.a.image,src:n,alt:c}),Object(b.jsx)("p",{className:"text text_type_main-medium mt-4 mb-8",children:c}),Object(b.jsxs)("ul",{className:Xe.a.list,children:[Object(b.jsxs)("li",{children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-2",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(b.jsx)("span",{className:"text text_type_digits-default text_color_inactive",children:r})]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-2",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(b.jsx)("span",{className:"text text_type_digits-default text_color_inactive",children:a})]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-2",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(b.jsx)("span",{className:"text text_type_digits-default text_color_inactive",children:i})]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-2",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(b.jsx)("span",{className:"text text_type_digits-default text_color_inactive",children:s})]})]})]})})}function Ke(){var e=Object(d.i)().id,t=R();Object(c.useEffect)((function(){t(xe())}),[t]);var n=D((function(e){return{ingredients:e.ingredients.ingredients}})).ingredients.find((function(t){return t._id===e}));return n?Object(b.jsx)($e,{ingredient:n}):null}function et(){var e=Object(d.g)(),t=R(),n=D((function(e){var t=e.ingredients;return{ingredients:t.ingredients,selectedIngredient:t.selectedIngredient}})).selectedIngredient,r=Object(c.useCallback)((function(){t({type:re}),e.goBack()}),[t,e]);return Object(b.jsx)(T,{isVisible:!!n,onClose:r,title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",children:n&&Object(b.jsx)($e,{ingredient:n})})}var tt=["component","path","loggedIn"];var nt=function(e){var t=e.component,n=e.path,c=e.loggedIn,r=Object(Ye.a)(e,tt);return Object(b.jsx)(d.b,{path:n,children:function(){return c?Object(b.jsx)(d.a,{to:"/"}):Object(b.jsx)(t,Object(w.a)({},r))}})};function ct(){var e=D((function(e){return{loggedIn:e.user.loggedIn}})).loggedIn,t=Object(d.h)(),n=t.state&&t.state.background;return Object(b.jsxs)("div",{className:l.a.page,children:[Object(b.jsxs)(d.d,{location:n||t,children:[Object(b.jsx)(d.b,{exact:!0,path:"/",children:Object(b.jsx)(Ue,{})}),Object(b.jsx)(nt,{path:"/register",component:Ge,loggedIn:e}),Object(b.jsx)(nt,{path:"/login",component:Ae,loggedIn:e}),Object(b.jsx)(nt,{path:"/forgot-password",component:Je,loggedIn:e}),Object(b.jsx)(nt,{path:"/reset-password",component:Me,loggedIn:e}),Object(b.jsx)(Qe,{path:"/profile",loggedIn:e,component:He}),Object(b.jsx)(Qe,{loggedIn:e,path:"/ingredients/:id",component:Ke})]}),n&&Object(b.jsx)(d.b,{path:"/ingredients/:id",children:Object(b.jsx)(et,{})})]})}var rt=function(){return Object(b.jsx)(s.a,{children:Object(b.jsx)(ct,{})})},at=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,212)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},it=n(208),st=n(109),ot=n(207).a,lt=n(108),dt=n(22),ut=n(78),jt={ingredients:[],ingredientsRequest:!1,ingredientsFailed:!1,selectedIngredient:null},mt={selectedIngredients:[],selectedBun:null},bt={order:null,orderNumberRequest:!1,orderNumberFailed:!1},pt={email:"",password:"",name:"",loggedIn:!!localStorage.getItem("refreshToken")},Ot={email:""},gt=Object(dt.b)({order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return Object(w.a)(Object(w.a)({},e),{},{orderNumberRequest:!0});case ie:return Object(w.a)(Object(w.a)({},e),{},{orderNumberRequest:!1,orderNumberFailed:!1,order:t.payload.order});case se:return Object(w.a)(Object(w.a)({},bt),{},{orderNumberFailed:!0});case oe:return Object(w.a)(Object(w.a)({},e),{},{order:null});default:return e}},ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(w.a)(Object(w.a)({},e),{},{ingredientsFailed:!1,ingredientsRequest:!0});case te:return Object(w.a)(Object(w.a)({},e),{},{ingredientsFailed:!1,ingredientsRequest:!1,ingredients:t.payload.ingredients});case ne:return Object(w.a)(Object(w.a)({},jt),{},{ingredientsFailed:!0});case ce:return Object(w.a)(Object(w.a)({},e),{},{selectedIngredient:t.payload.ingredient});case re:return Object(w.a)(Object(w.a)({},e),{},{selectedIngredient:null});default:return e}},burgerConstructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie:return Object(w.a)(Object(w.a)({},e),{},{selectedIngredients:[],selectedBun:null});case le:var n=t.payload.ingredient;return"bun"===n.type?Object(w.a)(Object(w.a)({},e),{},{selectedBun:n}):Object(w.a)(Object(w.a)({},e),{},{selectedIngredients:[].concat(Object(ut.a)(e.selectedIngredients),[n])});case de:return Object(w.a)(Object(w.a)({},e),{},{selectedIngredients:e.selectedIngredients.filter((function(e,n){return n!==t.payload.deleteIndex}))});case ue:var c=t.payload,r=c.dragIndex,a=c.itemIndex,i=Object(ut.a)(e.selectedIngredients),s=i[r];return i[r]=i[a],i[a]=s,Object(w.a)(Object(w.a)({},e),{},{selectedIngredients:i});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:var n,c,r;return Object(w.a)(Object(w.a)({},e),{},{email:null!==(n=t.payload.email)&&void 0!==n?n:e.email,password:null!==(c=t.payload.password)&&void 0!==c?c:e.password,name:null!==(r=t.payload.name)&&void 0!==r?r:e.name});case be:var a,i;return Object(w.a)(Object(w.a)({},e),{},{email:null!==(a=t.payload.email)&&void 0!==a?a:e.email,password:null!==(i=t.payload.password)&&void 0!==i?i:e.password});case me:return Object(w.a)(Object(w.a)({},e),{},{loggedIn:!0});case pe:return Object(w.a)(Object(w.a)({},e),{},{email:"",password:"",loggedIn:!1});case Oe:var s,o;return Object(w.a)(Object(w.a)({},e),{},{email:null!==(s=t.payload.email)&&void 0!==s?s:e.email,name:null!==(o=t.payload.name)&&void 0!==o?o:e.name});case ge:var l,d,u;return Object(w.a)(Object(w.a)({},e),{},{email:null!==(l=t.payload.email)&&void 0!==l?l:e.email,name:null!==(d=t.payload.name)&&void 0!==d?d:e.name,password:null!==(u=t.payload.password)&&void 0!==u?u:e.password});default:return e}},resetPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fe:return Object(w.a)(Object(w.a)({},e),{},{email:t.payload.email});case _e:return Object(w.a)(Object(w.a)({},e),{},{email:""});default:return e}}}),ft=ot(Object(dt.a)(lt.a)),_t=Object(dt.d)(gt,ft);i.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(S.a,{store:_t,children:Object(b.jsx)(it.a,{backend:st.a,children:Object(b.jsx)(rt,{})})})}),document.getElementById("root")),at()},24:function(e,t,n){e.exports={header:"header_header__2PCJV",nav:"header_nav__Yn7D9",navLink:"header_navLink__2qrHS",active_link:"header_active_link__1bgGB"}},25:function(e,t,n){e.exports={main:"profile_main__242OX",nav:"profile_nav__B_z69",active_link:"profile_active_link__MU5sa",navlink:"profile_navlink__1MZdx",logout:"profile_logout__3chQM",form:"profile_form__3ORnl"}},29:function(e,t,n){e.exports={constructor_section:"burger-constructor_constructor_section__3FdfH",constructor_list:"burger-constructor_constructor_list__2mBcy",constructor_items:"burger-constructor_constructor_items__2t2yl",order:"burger-constructor_order__SsnH4",scrollbox:"burger-constructor_scrollbox__3Z23P",scrollbar:"burger-constructor_scrollbar__-c9tN"}},39:function(e,t,n){e.exports={ingredients_section:"burger-ingredients_ingredients_section__l8mYY",ingredients_tabs:"burger-ingredients_ingredients_tabs__1zFeW",scrollbox:"burger-ingredients_scrollbox__2apTV",scrollbar:"burger-ingredients_scrollbar__2rVSV"}},40:function(e,t,n){e.exports={details:"ingredient-details_details__28kCX",content:"ingredient-details_content__1TZrm",image:"ingredient-details_image__3EkJL",list:"ingredient-details_list__3jN0U"}},51:function(e,t,n){e.exports={details:"order-details_details__2Chva",checkmark:"order-details_checkmark__3mkme",digits:"order-details_digits__33cjV"}},52:function(e,t,n){e.exports={modal:"modal_modal__-GJUR",header:"modal_header__2r55q",close:"modal_close__VSo9S"}},53:function(e,t,n){e.exports={ingredients_list:"ingredients-section_ingredients_list__1mz_n",ingredients_list_title:"ingredients-section_ingredients_list_title__2YZ9h",cards_box:"ingredients-section_cards_box__1j8gA"}},54:function(e,t,n){e.exports={constructor_item:"burger-constructor-item_constructor_item__N6dYK",ingredient_button:"burger-constructor-item_ingredient_button__1wYRz",drag_button:"burger-constructor-item_drag_button__2w73P"}},75:function(e,t,n){e.exports={ingredient_card:"ingredient-card_ingredient_card__1DunG",price:"ingredient-card_price__zyJet"}},9:function(e,t,n){e.exports={form__block:"pages_form__block__2hBXl",form:"pages_form__8Bp6z",login:"pages_login__2A9qH"}}},[[200,1,2]]]);
//# sourceMappingURL=main.ef04aa7f.chunk.js.map