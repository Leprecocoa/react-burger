{"version":3,"sources":["pages/pages.module.css","components/app/app.module.css","components/main/main.module.css","components/modal-overlay/modal-overlay.module.css","components/order-details/order-details.module.css","components/order-number-feed/order-number-feed.module.css","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","utils/types.ts","components/ingredient-card-link/ingredient-card-link.tsx","components/ingredient-card/ingredient-card.tsx","components/ingredient-card-draggable/ingredient-card-draggable.tsx","components/ingredients-section/ingredients-section.tsx","components/burger-ingredients/burger-ingredients.tsx","components/burger-constructor-item/burger-constructor-item.tsx","services/actions/burger-constructor-actions.tsx","components/burger-constructor-item-draggable-droppable/burger-constructor-item-draggable-droppable.tsx","components/burger-constructor/burger-constructor.tsx","components/burger-constructor-droppable/burger-constructor-droppable.tsx","utils/api.ts","services/actions/ingredients-actions.tsx","utils/utils.ts","services/actions/order-actions.tsx","images/check.svg","components/order-details-modal/order-details-modal.tsx","components/main/main.tsx","pages/constructor.tsx","services/actions/user-actions.tsx","pages/register.tsx","pages/login.tsx","services/actions/reset-password-actions.tsx","pages/forgot-password.tsx","pages/reset-password.tsx","services/hooks/use-user-info.ts","pages/profile.tsx","components/protected-route/protected-route.tsx","components/ingredient-details/ingredient-details.tsx","components/ingredient-details/ingredient-details-page.tsx","components/ingredient-details-modal/ingredient-details-modal.tsx","components/public-route/public-route.tsx","components/header/header.tsx","utils/format-order-date.ts","utils/format-order-status.ts","services/hooks/use-order-data.ts","components/order-details/order-details.tsx","services/actions/ws-actions.tsx","services/hooks/use-ws-feed.ts","pages/feed-details.tsx","services/hooks/use-ws-profile-feed.ts","pages/profile-feed-details.tsx","components/order-card/order-card.tsx","components/order-number-feed/order-number-feed.tsx","components/feed-page/feed-page.tsx","pages/feed.tsx","components/profile-feed-page/profile-feed-page.tsx","pages/profile-feed.tsx","components/order-info-modal/order-info-modal.tsx","pages/profile-feed-details-modal.tsx","pages/feed-details-modal.tsx","components/app-routes/app-routes.tsx","components/app/app.tsx","reportWebVitals.ts","redux-devtools.ts","services/reducers/burger-constructor-reducer.tsx","services/reducers/ingredients-reducer.tsx","services/reducers/order-reducer.tsx","services/reducers/reset-password-reducer.tsx","services/reducers/user-reducer.tsx","services/reducers/feed-reducer.tsx","services/reducers/profile-feed-reducer.tsx","services/reducers/orders-reducer.tsx","services/root-reducer.ts","utils/store.ts","services/middleware/ws-middleware.ts","index.tsx","components/order-card/order-card.module.css","components/header/header.module.css","pages/profile.module.css","components/feed-page/feed-page.module.css","components/burger-constructor/burger-constructor.module.css","components/burger-ingredients/burger-ingredients.module.css","components/ingredient-details/ingredient-details.module.css","components/modal/modal.module.css","components/ingredients-section/ingredients-section.module.css","components/burger-constructor-item/burger-constructor-item.module.css","components/order-details-modal/order-details-modal.module.css","components/ingredient-card/ingredient-card.module.css"],"names":["module","exports","ModalOverlay","onClick","className","modalOverlayStyles","overlay","Modal","children","title","onClose","isVisible","useEffect","listener","event","key","document","addEventListener","removeEventListener","createPortal","modalStyles","modal","header","close","type","querySelector","useAppDispatch","useDispatch","useAppSelector","useSelector","IngredientCardLink","ingredient","innerRef","location","useLocation","to","pathname","_id","state","background","IngredientCard","forwardRef","ref","onIngredientClick","count","handleSectionClick","useCallback","ingredientCard","ingredient_card","size","src","image","alt","name","price","IngredientCardDraggable","useDrag","item","dragRef","IngredientsSection","ingredients","counts","ingredientsSectionStyles","ingredients_list","ingredients_list_title","cards_box","filter","map","BurgerIngredients","handleIngredientDetailsOpen","burgerConstructor","selectedIngredients","selectedBun","useMemo","reduce","acc","selectedIngredient","length","useState","current","setCurrent","bunRef","useRef","sauceRef","mainRef","handleBunTabClick","handleSauceTabClick","handleMainTabClick","handleScroll","evt","scrollPosition","target","scrollTop","saucePosition","offsetTop","mainPosition","burgerIngredientsStyles","ingredients_section","ingredients_tabs","value","active","scrollbox","scrollbar","onScroll","BurgerConstructorItem","index","handleDelete","handleClose","BurgerConstructorItemStyles","constructor_item","ingredient_button","drag_button","text","thumbnail","DELETE_IGREDIENT","DROP_INGREDIENT","GET_ORDER_NUMBER_SUCCESS","REORDER_CONSTRUCTOR_ITEM","BurgerConstructorItemDraggableDroppable","dispatch","dragIndex","useDrop","accept","drop","payload","itemIndex","dropTarget","BurgerConstructor","onSubmit","orderSum","sum","handleSubmit","concat","deleteIndex","burgerConstructorStyles","constructor_section","constructor_list","isLocked","constructor_items","uid","order","order_price","BurgerConstructorDroppable","v4","API_URL","checkResponse","res","ok","json","then","data","Promise","reject","message","status","register","email","password","fetch","method","headers","body","JSON","stringify","login","logout","refreshToken","token","getUserInfoApi","authToken","Authorization","setUserInfoApi","DELETE_SELECTED_INGREDIENT_DATA","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_FAILED","SELECT_INGREDIENT","getIngredientsApi","success","catch","err","console","log","getCookie","matches","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","props","exp","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","DELETE_ORDER_DATA","GET_ORDER_NUMBER_REQUEST","GET_ORDER_NUMBER_FAILED","getOrderNumber","ingredientIds","sendOrder","OrderDetailsModal","orderDetailsStyles","details","digits","number","checkmark","checkIcon","Main","history","useHistory","loggedIn","user","handleOrderDetailsOpen","push","handleOrderDetailsClose","mainSectionStyles","main","Constructor","USER_REGISTER","USER_LOGIN","USER_SET_DATA","USER_LOGOUT","GET_USER_INFO","SET_USER_INFO","logoutUser","a","localStorage","getItem","removeItem","error","getUserInfo","retry","actionRefreshToken","setUserInfo","refreshingToken","accessToken","split","setItem","Register","handleChange","preventDefault","registerUser","styles","form__block","form","placeholder","onChange","e","errorText","Login","loginUser","link","forgot_password","FORGOT_PASSWORD_SET_EMAIL","RESET_PASSWORD","resetPassword","resetToken","resetPasswordApi","forgotPassword","forgotPasswordApi","ForgotPassword","ResetPassword","resetPasswordValues","setResetPasswordValues","useUserInfo","Profile","username","useremail","userpassword","formvalue","setFormvalue","prevstate","isFormChanged","nav","activeClassName","active_link","navlink","nav_text","icon","ProtectedRoute","from","IngredientDetails","image_large","calories","proteins","fat","carbohydrates","ingredientDetailsStyles","content","list","IngredientDetailsPage","id","useParams","find","IngredientDetailsModal","handleIngredientDetailsClose","goBack","PublicRoute","Header","exact","navLink","auth","formatOrderDate","date","orderDate","isToday","isYesterday","formatDistanceToNowStrict","locale","ru","addSuffix","format","join","formatOrderStatus","useOrderData","orderId","orders","orderIngredients","includes","orderIngredientsSlice","slice","orderIngredientsRest","orderIngredientCounts","ingredientId","orderTotal","OrderDetails","order_details","order_info","order_number","order_title","order_status_done","order_status_in_progress","order_ingredients","order_ingredients_list","order_ingredients_listitem","ingredient_details","image_mobile","ingredient_title","ingredient_cost","order_date","createdAt","order_sum","WS_CONNECTION_INIT","FEED_WS_CONNECTION_START","FEED_WS_CONNECTION_SUCCESS","FEED_WS_CONNECTION_ERROR","FEED_WS_GET_MESSAGE","PROFILE_FEED_WS_CONNECTION_START","PROFILE_FEED_WS_CONNECTION_SUCCESS","PROFILE_FEED_WS_CONNECTION_ERROR","PROFILE_FEED_WS_GET_MESSAGE","useWsFeed","wsUrl","actions","start","open","FeedDetails","useWsProfileFeed","ProfileFeedDetails","OrderCard","order_card","order_ingredients_images","orderIngredient","order_images_border","order_ingredient_image","order_ingredient_count","order_icon","OrderNumberFeed","readyNumbers","inProgressNumbers","doneToday","doneTotal","order_numbers_feed","order_numbers","order_numbers_ready","order_numbers_ready_list","order_numbers_list_item","list_item","order_numbers_inprogress","order_numbers_inprogress_list","orders_done_alltime","text_glow","orders_done_today","FeedPage","feed","total","totalToday","feed_page_grid","order_list","feed_item_link","Feed","ProfileFeedPage","profileFeed","ProfileFeed","OrderInfoModal","handleFeedDetailsClose","ProfileFeedDetailsModal","FeedDetailsModal","AppRoutes","appstyles","page","path","Fragment","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","composeEnhancers","composeWithDevToolsDevelopmentOnly","burgerConstructorInitialState","ingredientsInitialState","ingredientsRequest","ingredientsFailed","orderInitialState","orderNumberRequest","orderNumberFailed","resetPasswordInitialState","userInitialState","feedInitialState","isLoading","isError","ordersInitialState","rootReducer","combineReducers","action","constructorItems","draggingItemIndex","enhancer","applyMiddleware","thunk","store","connections","next","socket","WebSocket","onopen","onerror","onmessage","parse","onclose","connection","send","createStore","ReactDOM","render","StrictMode","DndProvider","backend","HTML5Backend","getElementById"],"mappings":"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","file":"static/js/main.e71ad9d0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"form__block\":\"pages_form__block__2hBXl\",\"form\":\"pages_form__8Bp6z\",\"login\":\"pages_login__2A9qH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"app_page__1NvGu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"main_main__OFmn0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__3PHOs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order_details\":\"order-details_order_details__30Xux\",\"order_info\":\"order-details_order_info__1WnlA\",\"order_number\":\"order-details_order_number__2KM1t\",\"order_title\":\"order-details_order_title__3IMck\",\"order_status_in_progress\":\"order-details_order_status_in_progress__Ny-55\",\"order_status_done\":\"order-details_order_status_done__9VZiT\",\"order_ingredients_list\":\"order-details_order_ingredients_list__1s1Ys\",\"order_ingredients_listitem\":\"order-details_order_ingredients_listitem__3nidA\",\"ingredient_details\":\"order-details_ingredient_details__2faI4\",\"ingredient_title\":\"order-details_ingredient_title__1wgmU\",\"ingredient_cost\":\"order-details_ingredient_cost__35lyS\",\"order_date\":\"order-details_order_date__2XUO9\",\"order_sum\":\"order-details_order_sum__n7g2z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order_numbers_feed\":\"order-number-feed_order_numbers_feed__2sZ9r\",\"order_numbers\":\"order-number-feed_order_numbers__TM2fq\",\"order_numbers_ready\":\"order-number-feed_order_numbers_ready__awPa6\",\"order_numbers_ready_list\":\"order-number-feed_order_numbers_ready_list__1t2lD\",\"list_item\":\"order-number-feed_list_item__2AiXK\",\"order_numbers_list_item\":\"order-number-feed_order_numbers_list_item__1cjZ-\",\"order_numbers_inprogress_list\":\"order-number-feed_order_numbers_inprogress_list__2Gjgf order-number-feed_order_numbers_ready_list__1t2lD\",\"order_numbers_inprogress\":\"order-number-feed_order_numbers_inprogress__3YRd- order-number-feed_order_numbers_ready__awPa6\",\"text_glow\":\"order-number-feed_text_glow__335rH\"};","import modalOverlayStyles from \"./modal-overlay.module.css\";\r\n\r\ninterface IModalOverlayProps {\r\n  onClick: () => void;\r\n}\r\n\r\nexport function ModalOverlay({ onClick }: IModalOverlayProps) {\r\n  return <div className={modalOverlayStyles.overlay} onClick={onClick} />;\r\n}\r\n","import { FunctionComponent, useEffect } from \"react\";\r\nimport modalStyles from \"./modal.module.css\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { ModalOverlay } from \"../modal-overlay/modal-overlay\";\r\nimport { CloseIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\ninterface IModalProps {\r\n  title?: string;\r\n  onClose: () => void;\r\n  isVisible: boolean;\r\n}\r\n\r\nexport const Modal: FunctionComponent<IModalProps> = ({\r\n  children,\r\n  title,\r\n  onClose,\r\n  isVisible,\r\n}) => {\r\n  useEffect(() => {\r\n    if (!isVisible) {\r\n      return;\r\n    }\r\n    const listener = (event: KeyboardEvent) => {\r\n      if (event.key === \"Escape\") {\r\n        onClose();\r\n      }\r\n    };\r\n    document.addEventListener(\"keydown\", listener);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", listener);\r\n    };\r\n  }, [onClose, isVisible]);\r\n\r\n  if (!isVisible) {\r\n    return null;\r\n  }\r\n\r\n  return createPortal(\r\n    <>\r\n      <ModalOverlay onClick={onClose} />\r\n      <div className={`${modalStyles.modal} pr-10 pl-10 pt-10`}>\r\n        <div className={modalStyles.header}>\r\n          <h2 className=\"text text_type_main-large\">{title}</h2>\r\n          <button className={modalStyles.close} onClick={onClose}>\r\n            <CloseIcon type=\"primary\" />\r\n          </button>\r\n        </div>\r\n        {children}\r\n      </div>\r\n    </>,\r\n    document.querySelector(\"#modals\") as HTMLElement\r\n  );\r\n};\r\n","import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\r\nimport { ThunkAction, ThunkDispatch } from \"redux-thunk\";\r\nimport { store } from \"./store\";\r\nimport { TActions } from \"./tactions\";\r\n\r\nexport type TIngredient = {\r\n  calories: number;\r\n  carbohydrates: number;\r\n  fat: number;\r\n  image: string;\r\n  image_large: string;\r\n  image_mobile: string;\r\n  name: string;\r\n  price: number;\r\n  proteins: number;\r\n  type: string;\r\n  _id: string;\r\n  count: number;\r\n};\r\n\r\nexport type TSelectedIngredient = TIngredient & { uid: string };\r\n\r\nexport type TOrder = {\r\n  number: number;\r\n  _id: string;\r\n  status: \"created\" | \"pending\" | \"done\";\r\n  name: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n  ingredients: string[];\r\n};\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch &\r\n  ThunkDispatch<RootState, unknown, TActions>;\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n\r\nexport type AppThunk<ReturnType = void> = ThunkAction<\r\n  ReturnType,\r\n  RootState,\r\n  unknown,\r\n  TActions\r\n>;\r\n\r\nexport type TFeedWsResponse = {\r\n  success: boolean;\r\n  total: number;\r\n  totalToday: number;\r\n  orders: TOrder[];\r\n  message?: string;\r\n};\r\n","import { PropsWithChildren } from \"react\";\r\nimport { useLocation, Link, LinkProps } from \"react-router-dom\";\r\nimport { TIngredient } from \"../../utils/types\";\r\n\r\ninterface IIngredientCardLinkProps extends PropsWithChildren<{}> {\r\n  ingredient: TIngredient;\r\n  innerRef: LinkProps[\"innerRef\"];\r\n  className: LinkProps[\"className\"];\r\n  onClick: LinkProps[\"onClick\"];\r\n}\r\n\r\nexport function IngredientCardLink({\r\n  children,\r\n  ingredient,\r\n  innerRef,\r\n  className,\r\n  onClick,\r\n}: IIngredientCardLinkProps) {\r\n  let location = useLocation();\r\n  return (\r\n    <Link\r\n      key={ingredient._id}\r\n      to={{\r\n        pathname: `/ingredients/${ingredient._id}`,\r\n        state: { background: location },\r\n      }}\r\n      innerRef={innerRef}\r\n      className={className}\r\n      onClick={onClick}\r\n    >\r\n      {children}\r\n    </Link>\r\n  );\r\n}\r\n","import {\r\n  Counter,\r\n  CurrencyIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback, forwardRef } from \"react\";\r\nimport ingredientCard from \"./ingredient-card.module.css\";\r\nimport { TIngredient } from \"../../utils/types\";\r\nimport { IngredientCardLink } from \"../ingredient-card-link/ingredient-card-link\";\r\n\r\nconst IngredientCard = forwardRef<HTMLAnchorElement, IIngredientCardProps>(\r\n  ({ ingredient, onIngredientClick, count }, ref) => {\r\n    const handleSectionClick = useCallback(() => {\r\n      onIngredientClick(ingredient);\r\n    }, [onIngredientClick, ingredient]);\r\n    return (\r\n      <IngredientCardLink\r\n        ingredient={ingredient}\r\n        className={ingredientCard.ingredient_card}\r\n        innerRef={ref}\r\n        onClick={handleSectionClick}\r\n      >\r\n        <>\r\n          <Counter count={count} size=\"small\" />\r\n          <img src={ingredient.image} alt={ingredient.name} />\r\n          <div className={`${ingredientCard.price} mt-1 mb-1`}>\r\n            <span className=\"text text_type_main-default mr-2\">\r\n              {ingredient.price}\r\n            </span>{\" \"}\r\n            <CurrencyIcon type=\"primary\" />\r\n          </div>\r\n          <p>{ingredient.name}</p>\r\n        </>\r\n      </IngredientCardLink>\r\n    );\r\n  }\r\n);\r\n\r\ninterface IIngredientCardProps {\r\n  ingredient: TIngredient;\r\n  onIngredientClick: (ingredient: TIngredient) => void;\r\n  count: number;\r\n}\r\n\r\nexport default IngredientCard;\r\n","import { useDrag } from \"react-dnd\";\r\nimport IngredientCard from \"../ingredient-card/ingredient-card\";\r\nimport { TIngredient } from \"../../utils/types\";\r\n\r\ninterface IIngredientCardDraggableProps {\r\n  ingredient: TIngredient;\r\n  onIngredientClick: (ingredient: TIngredient) => void;\r\n  count: number;\r\n}\r\n\r\nfunction IngredientCardDraggable({\r\n  ingredient,\r\n  onIngredientClick,\r\n  count,\r\n}: IIngredientCardDraggableProps) {\r\n  const [, dragRef] = useDrag({\r\n    type: \"ingredient\",\r\n    item: { ingredient },\r\n  });\r\n  return (\r\n    <IngredientCard\r\n      ingredient={ingredient}\r\n      onIngredientClick={onIngredientClick}\r\n      count={count}\r\n      ref={dragRef}\r\n    />\r\n  );\r\n}\r\n\r\nexport default IngredientCardDraggable;\r\n","import IngredientCardDraggable from \"../ingredient-card-draggable/ingredient-card-draggable\";\r\nimport ingredientsSectionStyles from \"./ingredients-section.module.css\";\r\nimport { forwardRef } from \"react\";\r\nimport { TIngredient } from \"../../utils/types\";\r\n\r\nconst IngredientsSection = forwardRef<HTMLDivElement, IIngredientsSectionProps>(\r\n  ({ title, ingredients, type, onIngredientClick, counts }, ref) => {\r\n    return (\r\n      <section\r\n        ref={ref}\r\n        className={`${ingredientsSectionStyles.ingredients_list} pt-10`}\r\n      >\r\n        <h2\r\n          className={`${ingredientsSectionStyles.ingredients_list_title} mb-6 text text_type_main-medium`}\r\n        >\r\n          {title}\r\n        </h2>\r\n        <div className={`${ingredientsSectionStyles.cards_box} pl-4 pr-4`}>\r\n          {ingredients\r\n            .filter((ingredient) => {\r\n              return ingredient.type === type;\r\n            })\r\n            .map((ingredient) => {\r\n              return (\r\n                <IngredientCardDraggable\r\n                  key={ingredient._id}\r\n                  ingredient={ingredient}\r\n                  onIngredientClick={onIngredientClick}\r\n                  count={counts[ingredient._id]}\r\n                />\r\n              );\r\n            })}\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n);\r\n\r\ninterface IIngredientsSectionProps {\r\n  title: string;\r\n  ingredients: Array<TIngredient>;\r\n  type: string;\r\n  onIngredientClick: (ingredients: TIngredient) => void;\r\n  counts: { [key: string]: number };\r\n}\r\n\r\nexport default IngredientsSection;\r\n","import { Tab } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useRef, useState, useMemo, useCallback } from \"react\";\r\nimport { TIngredient, useAppSelector } from \"../../utils/types\";\r\nimport IngredientsSection from \"../ingredients-section/ingredients-section\";\r\nimport burgerIngredientsStyles from \"./burger-ingredients.module.css\";\r\n\r\nconst HEIGHT_FROM_TOP = 200;\r\n\r\nfunction BurgerIngredients({\r\n  handleIngredientDetailsOpen,\r\n}: {\r\n  handleIngredientDetailsOpen: (ingredient: TIngredient) => void;\r\n}) {\r\n  const { selectedIngredients, selectedBun } = useAppSelector(\r\n    ({\r\n      burgerConstructor: { selectedIngredients, selectedBun },\r\n    }: {\r\n      burgerConstructor: {\r\n        selectedIngredients: Array<TIngredient>;\r\n        selectedBun: TIngredient | null;\r\n      };\r\n    }) => {\r\n      return {\r\n        selectedIngredients,\r\n        selectedBun,\r\n      };\r\n    }\r\n  );\r\n\r\n  const { ingredients } = useAppSelector(({ ingredients: { ingredients } }) => {\r\n    return {\r\n      ingredients,\r\n    };\r\n  });\r\n\r\n  const counts = useMemo(() => {\r\n    return ingredients.reduce((acc, ingredient) => {\r\n      if (ingredient.type === \"bun\") {\r\n        return {\r\n          ...acc,\r\n          [ingredient._id]:\r\n            selectedBun && ingredient._id === selectedBun._id ? 1 : 0,\r\n        };\r\n      }\r\n      return {\r\n        ...acc,\r\n        [ingredient._id]: selectedIngredients.filter(\r\n          (selectedIngredient) => selectedIngredient._id === ingredient._id\r\n        ).length,\r\n      };\r\n    }, {});\r\n  }, [ingredients, selectedIngredients, selectedBun]);\r\n\r\n  const [current, setCurrent] = useState(\"bun\");\r\n\r\n  const bunRef = useRef<HTMLDivElement | null>(null);\r\n  const sauceRef = useRef<HTMLDivElement | null>(null);\r\n  const mainRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  const handleBunTabClick = useCallback(() => {\r\n    setCurrent(\"bun\");\r\n  }, [setCurrent]);\r\n  const handleSauceTabClick = useCallback(() => {\r\n    setCurrent(\"sauce\");\r\n  }, [setCurrent]);\r\n  const handleMainTabClick = useCallback(() => {\r\n    setCurrent(\"main\");\r\n  }, [setCurrent]);\r\n\r\n  const handleScroll = useCallback(\r\n    (evt) => {\r\n      if (sauceRef.current == null || mainRef.current == null) {\r\n        return;\r\n      }\r\n      const container = evt.target;\r\n      const scrollPosition = container.scrollTop;\r\n      const saucePosition = sauceRef.current.offsetTop;\r\n      const mainPosition = mainRef.current.offsetTop;\r\n      if (scrollPosition + HEIGHT_FROM_TOP <= saucePosition) {\r\n        handleBunTabClick();\r\n      } else if (scrollPosition + HEIGHT_FROM_TOP <= mainPosition) {\r\n        handleSauceTabClick();\r\n      } else {\r\n        handleMainTabClick();\r\n      }\r\n    },\r\n    [handleBunTabClick, handleMainTabClick, handleSauceTabClick]\r\n  );\r\n\r\n  return (\r\n    <section\r\n      className={`${burgerIngredientsStyles.ingredients_section} pt-10 mr-10`}\r\n    >\r\n      <h1 className=\"text text_type_main-large\">Соберите бургер</h1>\r\n      <div className={`${burgerIngredientsStyles.ingredients_tabs} pt-5`}>\r\n        <Tab value=\"bun\" active={current === \"bun\"} onClick={handleBunTabClick}>\r\n          Булки\r\n        </Tab>\r\n        <Tab\r\n          value=\"sauce\"\r\n          active={current === \"sauce\"}\r\n          onClick={handleSauceTabClick}\r\n        >\r\n          Соусы\r\n        </Tab>\r\n        <Tab\r\n          value=\"main\"\r\n          active={current === \"main\"}\r\n          onClick={handleMainTabClick}\r\n        >\r\n          Начинки\r\n        </Tab>\r\n      </div>\r\n      <div\r\n        className={`${burgerIngredientsStyles.scrollbox} ${burgerIngredientsStyles.scrollbar}`}\r\n        onScroll={handleScroll}\r\n      >\r\n        <IngredientsSection\r\n          ref={bunRef}\r\n          key=\"bun\"\r\n          title=\"Булки\"\r\n          type=\"bun\"\r\n          ingredients={ingredients}\r\n          counts={counts}\r\n          onIngredientClick={handleIngredientDetailsOpen}\r\n        />\r\n        <IngredientsSection\r\n          ref={sauceRef}\r\n          key=\"sauce\"\r\n          title=\"Соусы\"\r\n          type=\"sauce\"\r\n          ingredients={ingredients}\r\n          counts={counts}\r\n          onIngredientClick={handleIngredientDetailsOpen}\r\n        />\r\n        <IngredientsSection\r\n          ref={mainRef}\r\n          key=\"main\"\r\n          title=\"Начинки\"\r\n          type=\"main\"\r\n          ingredients={ingredients}\r\n          counts={counts}\r\n          onIngredientClick={handleIngredientDetailsOpen}\r\n        />\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default BurgerIngredients;\r\n","import {\r\n  ConstructorElement,\r\n  DragIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { forwardRef, useCallback } from \"react\";\r\nimport { TIngredient } from \"../../utils/types\";\r\nimport BurgerConstructorItemStyles from \"./burger-constructor-item.module.css\";\r\n\r\nconst BurgerConstructorItem = forwardRef<\r\n  HTMLDivElement,\r\n  IBurgerConstructorItemProps\r\n>(({ ingredient, index, handleDelete }, ref) => {\r\n  const handleClose = useCallback(\r\n    () => handleDelete(index),\r\n    [handleDelete, index]\r\n  );\r\n  return (\r\n    <div\r\n      className={`${BurgerConstructorItemStyles.constructor_item} mb-4 pl-8`}\r\n      ref={ref}\r\n    >\r\n      <div className={BurgerConstructorItemStyles.ingredient_button}>\r\n        <button className={BurgerConstructorItemStyles.drag_button}>\r\n          <DragIcon type=\"primary\" />\r\n        </button>\r\n      </div>\r\n      <ConstructorElement\r\n        text={ingredient.name}\r\n        price={ingredient.price}\r\n        thumbnail={ingredient.image}\r\n        handleClose={handleClose}\r\n      />\r\n    </div>\r\n  );\r\n});\r\n\r\ninterface IBurgerConstructorItemProps {\r\n  ingredient: TIngredient;\r\n  index: number;\r\n  handleDelete: (deleteIndex: number) => void;\r\n}\r\n\r\nexport default BurgerConstructorItem;\r\n","export const DELETE_IGREDIENT: \"DELETE_IGREDIENT\" = \"DELETE_IGREDIENT\";\r\nexport const DROP_INGREDIENT: \"DROP_INGREDIENT\" = \"DROP_INGREDIENT\";\r\nexport const GET_ORDER_NUMBER_SUCCESS: \"GET_ORDER_NUMBER_SUCCESS\" =\r\n  \"GET_ORDER_NUMBER_SUCCESS\";\r\nexport const REORDER_CONSTRUCTOR_ITEM: \"REORDER_CONSTRUCTOR_ITEM\" =\r\n  \"REORDER_CONSTRUCTOR_ITEM\";\r\nexport const GET_CONSTRUCTOR_INGREDIENTS: \"GET_CONSTRUCTOR_INGREDIENTS\" =\r\n  \"GET_CONSTRUCTOR_INGREDIENTS\";\r\n","import { useEffect, useRef } from \"react\";\r\nimport { useDrag, useDrop } from \"react-dnd\";\r\nimport BurgerConstructorItem from \"../burger-constructor-item/burger-constructor-item\";\r\nimport { TIngredient, useAppDispatch } from \"../../utils/types\";\r\nimport { REORDER_CONSTRUCTOR_ITEM } from \"../../services/actions/burger-constructor-actions\";\r\n\r\ninterface IBurgerConstructorItemDraggableDroppableProps {\r\n  ingredient: TIngredient;\r\n  index: number;\r\n  handleDelete: (deleteIndex: number) => void;\r\n}\r\n\r\nfunction BurgerConstructorItemDraggableDroppable({\r\n  ingredient,\r\n  index,\r\n  handleDelete,\r\n}: IBurgerConstructorItemDraggableDroppableProps) {\r\n  const ref = useRef(null);\r\n  const dispatch = useAppDispatch();\r\n\r\n  const [, dragRef] = useDrag({\r\n    type: \"constructor-item\",\r\n    item: { dragIndex: index },\r\n  });\r\n\r\n  const [, dropTarget] = useDrop({\r\n    accept: \"constructor-item\",\r\n    drop({ dragIndex }: { dragIndex: number }) {\r\n      dispatch({\r\n        type: REORDER_CONSTRUCTOR_ITEM,\r\n        payload: {\r\n          itemIndex: index,\r\n          dragIndex: dragIndex,\r\n        },\r\n      });\r\n    },\r\n  });\r\n\r\n  useEffect(\r\n    function () {\r\n      dragRef(dropTarget(ref));\r\n    },\r\n    [dragRef, dropTarget]\r\n  );\r\n\r\n  return (\r\n    <BurgerConstructorItem\r\n      ingredient={ingredient}\r\n      index={index}\r\n      handleDelete={handleDelete}\r\n      ref={ref}\r\n    />\r\n  );\r\n}\r\n\r\nexport default BurgerConstructorItemDraggableDroppable;\r\n","import {\r\n  Button,\r\n  ConstructorElement,\r\n  CurrencyIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback, useMemo, forwardRef } from \"react\";\r\nimport burgerConstructorStyles from \"./burger-constructor.module.css\";\r\nimport { TIngredient, useAppDispatch, useAppSelector } from \"../../utils/types\";\r\nimport BurgerConstructorItemDraggableDroppable from \"../burger-constructor-item-draggable-droppable/burger-constructor-item-draggable-droppable\";\r\nimport { DELETE_IGREDIENT } from \"../../services/actions/burger-constructor-actions\";\r\n\r\nconst BurgerConstructor = forwardRef<HTMLDivElement, IBurgerConstructorProps>(\r\n  ({ onSubmit, ingredients }, ref) => {\r\n    const dispatch = useAppDispatch();\r\n\r\n    const selectedIngredients = useAppSelector(\r\n      (state) => state.burgerConstructor.selectedIngredients\r\n    );\r\n\r\n    const selectedBun = useAppSelector(\r\n      (state) => state.burgerConstructor.selectedBun\r\n    );\r\n\r\n    const orderSum = useMemo(\r\n      () =>\r\n        selectedIngredients.reduce(\r\n          (sum, ingredient) => sum + ingredient.price,\r\n          selectedBun ? selectedBun.price : 0\r\n        ),\r\n      [selectedIngredients, selectedBun]\r\n    );\r\n\r\n    const handleSubmit = useCallback(() => {\r\n      if (!selectedBun) {\r\n        return;\r\n      }\r\n      onSubmit(selectedIngredients.concat(selectedBun));\r\n    }, [onSubmit, selectedIngredients, selectedBun]);\r\n\r\n    const handleDelete = useCallback(\r\n      (deleteIndex) => {\r\n        dispatch({ type: DELETE_IGREDIENT, payload: { deleteIndex } });\r\n      },\r\n      [dispatch]\r\n    );\r\n\r\n    if (ingredients.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <section\r\n        className={`${burgerConstructorStyles.constructor_section} pt-25`}\r\n        ref={ref}\r\n      >\r\n        <div className={burgerConstructorStyles.constructor_list}>\r\n          {selectedBun && (\r\n            <div className=\"pl-9 pr-4\">\r\n              <ConstructorElement\r\n                type=\"top\"\r\n                isLocked\r\n                text={`${selectedBun.name} (верх)`}\r\n                price={selectedBun.price}\r\n                thumbnail={selectedBun.image}\r\n              />\r\n            </div>\r\n          )}\r\n          <div\r\n            className={`${burgerConstructorStyles.constructor_items} ${burgerConstructorStyles.scrollbar}  mt-4 mb-4 pl-4 pr-4`}\r\n          >\r\n            {selectedIngredients.map((ingredient, index) => {\r\n              return (\r\n                <BurgerConstructorItemDraggableDroppable\r\n                  ingredient={ingredient}\r\n                  index={index}\r\n                  handleDelete={handleDelete}\r\n                  key={ingredient.uid}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n          {selectedBun ? (\r\n            <div className=\"pl-9 pr-4\">\r\n              <ConstructorElement\r\n                type=\"bottom\"\r\n                isLocked={true}\r\n                text={`${selectedBun.name} (низ)`}\r\n                price={selectedBun.price}\r\n                thumbnail={selectedBun.image}\r\n              />\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n        <div className={`${burgerConstructorStyles.order} pt-10`}>\r\n          <div className={`${burgerConstructorStyles.order_price} mr-10`}>\r\n            <span className=\"text text_type_digits-medium mr-2\">\r\n              {orderSum}\r\n            </span>\r\n            <CurrencyIcon type=\"primary\" />\r\n          </div>\r\n          <Button type=\"primary\" size=\"large\" onClick={handleSubmit}>\r\n            Оформить заказ\r\n          </Button>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n);\r\n\r\ninterface IBurgerConstructorProps {\r\n  onSubmit: (ingredients: Array<TIngredient>) => void;\r\n  ingredients: Array<TIngredient>;\r\n}\r\n\r\nexport default BurgerConstructor;\r\n","import { useDrop } from \"react-dnd\";\r\nimport BurgerConstructor from \"../burger-constructor/burger-constructor\";\r\nimport { TIngredient, useAppDispatch, useAppSelector } from \"../../utils/types\";\r\nimport { v4 } from \"uuid\";\r\nimport { DROP_INGREDIENT } from \"../../services/actions/burger-constructor-actions\";\r\n\r\ninterface IBurgerConstructorDroppableProps {\r\n  onSubmit: (ingredients: Array<TIngredient>) => void;\r\n}\r\n\r\nfunction BurgerConstructorDroppable({\r\n  onSubmit,\r\n}: IBurgerConstructorDroppableProps) {\r\n  const dispatch = useAppDispatch();\r\n  const [, dropTarget] = useDrop({\r\n    accept: \"ingredient\",\r\n    drop({ ingredient }: { ingredient: TIngredient }) {\r\n      dispatch({\r\n        type: DROP_INGREDIENT,\r\n        payload: { ingredient: { ...ingredient, uid: v4() } },\r\n      });\r\n    },\r\n  });\r\n\r\n  const { ingredients } = useAppSelector(({ ingredients: { ingredients } }) => {\r\n    return {\r\n      ingredients,\r\n    };\r\n  });\r\n\r\n  return (\r\n    <BurgerConstructor\r\n      onSubmit={onSubmit}\r\n      ingredients={ingredients}\r\n      ref={dropTarget}\r\n    />\r\n  );\r\n}\r\n\r\nexport default BurgerConstructorDroppable;\r\n","const API_URL = \"https://norma.nomoreparties.space/api\";\r\nconst checkResponse: <T = {}>(res: Response) => Promise<T> = (res) => {\r\n  if (res && res.ok) {\r\n    return res.json();\r\n  }\r\n  return res\r\n    .json()\r\n    .then((data) => Promise.reject({ message: `Ошибка ${res.status}`, data }));\r\n};\r\n\r\nexport function getIngredients() {\r\n  return fetch(`${API_URL}/ingredients`).then((res) =>\r\n    checkResponse<{ success: boolean; data: [] }>(res)\r\n  );\r\n}\r\n\r\nexport function sendOrder(authToken: string, ingredientIds: number[]) {\r\n  return fetch(`${API_URL}/orders`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${authToken}`,\r\n    },\r\n    body: JSON.stringify({\r\n      ingredients: ingredientIds,\r\n    }),\r\n  }).then((res) => checkResponse<{ order: {}; success: boolean }>(res));\r\n}\r\n\r\nexport function register({\r\n  email,\r\n  password,\r\n  name,\r\n}: {\r\n  email: string;\r\n  password: string;\r\n  name: string;\r\n}) {\r\n  return fetch(`${API_URL}/auth/register`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ email, password, name }),\r\n  }).then((res) => checkResponse<{ accessToken: string }>(res));\r\n}\r\n\r\nexport function login({\r\n  email,\r\n  password,\r\n}: {\r\n  email: string;\r\n  password: string;\r\n}) {\r\n  return fetch(`${API_URL}/auth/login`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ email, password }),\r\n  }).then((res) =>\r\n    checkResponse<{\r\n      accessToken: string | null;\r\n      refreshToken: string | null;\r\n      success: boolean;\r\n    }>(res)\r\n  );\r\n}\r\n\r\nexport function logout(refreshToken: string) {\r\n  return fetch(`${API_URL}/auth/logout`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ token: refreshToken }),\r\n  }).then((res) =>\r\n    checkResponse<{ refreshToken: string | null; success: boolean }>(res)\r\n  );\r\n}\r\n\r\nexport function refreshToken(refreshToken: string) {\r\n  return fetch(`${API_URL}/auth/token`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ token: refreshToken }),\r\n  }).then((res) =>\r\n    checkResponse<{\r\n      accessToken: string;\r\n      refreshToken: string;\r\n    }>(res)\r\n  );\r\n}\r\n\r\nexport function getUserInfoApi(authToken: string) {\r\n  return fetch(`${API_URL}/auth/user`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${authToken}`,\r\n    },\r\n  }).then((res) =>\r\n    checkResponse<{ user: { name: string; email: string } }>(res)\r\n  );\r\n}\r\n\r\nexport function setUserInfoApi(\r\n  authToken: string,\r\n  { name, email, password }: { name: string; email: string; password: string }\r\n) {\r\n  return fetch(`${API_URL}/auth/user`, {\r\n    method: \"PATCH\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${authToken}`,\r\n    },\r\n    body: JSON.stringify({ name, email, password }),\r\n  }).then((res) =>\r\n    checkResponse<{\r\n      user: {\r\n        name: string;\r\n        email: string;\r\n        password: string;\r\n      };\r\n    }>(res)\r\n  );\r\n}\r\n\r\nexport function forgotPasswordApi(email: string) {\r\n  return fetch(`${API_URL}/password-reset`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ email }),\r\n  }).then((res) => checkResponse<{ success: boolean }>(res));\r\n}\r\n\r\nexport function resetPasswordApi(password: string, resetToken: string) {\r\n  return fetch(`${API_URL}/password-reset/reset`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ password, token: resetToken }),\r\n  }).then((res) => checkResponse<{ success: boolean }>(res));\r\n}\r\n","import { getIngredients } from \"../../utils/api\";\r\nimport { AppThunk } from \"../../utils/types\";\r\n\r\nexport const DELETE_SELECTED_INGREDIENT_DATA: \"DELETE_SELECTED_INGREDIENT_DATA\" =\r\n  \"DELETE_SELECTED_INGREDIENT_DATA\";\r\nexport const GET_INGREDIENTS_REQUEST: \"GET_INGREDIENTS_REQUEST\" =\r\n  \"GET_INGREDIENTS_REQUEST\";\r\nexport const GET_INGREDIENTS_SUCCESS: \"GET_INGREDIENTS_SUCCESS\" =\r\n  \"GET_INGREDIENTS_SUCCESS\";\r\nexport const GET_INGREDIENTS_FAILED: \"GET_INGREDIENTS_FAILED\" =\r\n  \"GET_INGREDIENTS_FAILED\";\r\nexport const SELECT_INGREDIENT: \"SELECT_INGREDIENT\" = \"SELECT_INGREDIENT\";\r\n\r\nexport const getIngredientsApi: () => AppThunk = () => {\r\n  return (dispatch) => {\r\n    dispatch({\r\n      type: GET_INGREDIENTS_REQUEST,\r\n    });\r\n    getIngredients()\r\n      .then((res) => {\r\n        if (res && res.success) {\r\n          dispatch({\r\n            type: GET_INGREDIENTS_SUCCESS,\r\n            payload: {\r\n              ingredients: res.data,\r\n            },\r\n          });\r\n        } else {\r\n          dispatch({\r\n            type: GET_INGREDIENTS_FAILED,\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n","export function getCookie(name: string) {\r\n  const matches = document.cookie.match(\r\n    new RegExp(\r\n      \"(?:^|; )\" +\r\n        // eslint-disable-next-line no-useless-escape\r\n        name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, \"\\\\$1\") +\r\n        \"=([^;]*)\"\r\n    )\r\n  );\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n}\r\n\r\ntype TProps = {\r\n  [key: string]: string | Date | boolean | number | undefined;\r\n  expires?: string | number | Date;\r\n};\r\n\r\nexport function setCookie(name: string, value: string | null, props?: TProps) {\r\n  props = props || {};\r\n  let exp = props.expires;\r\n  if (typeof exp == \"number\" && exp) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + exp * 1000);\r\n    exp = props.expires = d;\r\n  }\r\n  if (exp && exp instanceof Date && exp.toUTCString) {\r\n    props.expires = exp.toUTCString();\r\n  }\r\n  if (value == null) {\r\n    return;\r\n  }\r\n  value = encodeURIComponent(value);\r\n  let updatedCookie = name + \"=\" + value;\r\n  for (const propName in props) {\r\n    updatedCookie += \"; \" + propName;\r\n    const propValue = props[propName];\r\n    if (propValue !== true) {\r\n      updatedCookie += \"=\" + propValue;\r\n    }\r\n  }\r\n  document.cookie = updatedCookie;\r\n}\r\n\r\nexport function deleteCookie(name: string) {\r\n  setCookie(name, null, { expires: -1 });\r\n}\r\n","import { sendOrder } from \"../../utils/api\";\r\nimport { AppThunk, AppDispatch } from \"../../utils/types\";\r\nimport { getCookie } from \"../../utils/utils\";\r\nimport { GET_ORDER_NUMBER_SUCCESS } from \"./burger-constructor-actions\";\r\n\r\nexport const DELETE_ORDER_DATA: \"DELETE_ORDER_DATA\" = \"DELETE_ORDER_DATA\";\r\nexport const GET_ORDER_NUMBER_REQUEST: \"GET_ORDER_NUMBER_REQUEST\" =\r\n  \"GET_ORDER_NUMBER_REQUEST\";\r\nexport const GET_ORDER_NUMBER_FAILED: \"GET_ORDER_NUMBER_FAILED\" =\r\n  \"GET_ORDER_NUMBER_FAILED\";\r\n\r\nexport const getOrderNumber: (ingredientIds: number[]) => AppThunk = (\r\n  ingredientIds\r\n) => {\r\n  return (dispatch: AppDispatch) => {\r\n    const token = getCookie(\"authToken\");\r\n    if (!token) {\r\n      return;\r\n    }\r\n    dispatch({\r\n      type: GET_ORDER_NUMBER_REQUEST,\r\n    });\r\n    sendOrder(token, ingredientIds)\r\n      .then((res) => {\r\n        if (res && res.success) {\r\n          dispatch({\r\n            type: GET_ORDER_NUMBER_SUCCESS,\r\n            payload: {\r\n              order: res.order,\r\n            },\r\n          });\r\n        } else {\r\n          dispatch({\r\n            type: GET_ORDER_NUMBER_FAILED,\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n","export default __webpack_public_path__ + \"static/media/check.2022ce2b.svg\";","import orderDetailsStyles from \"./order-details-modal.module.css\";\r\nimport checkIcon from \"../../images/check.svg\";\r\nimport { TOrder } from \"../../utils/types\";\r\n\r\ninterface OrderDetailsProps {\r\n  order: TOrder;\r\n}\r\n\r\nexport function OrderDetailsModal({ order }: OrderDetailsProps) {\r\n  if (!order) {\r\n    return null;\r\n  }\r\n  return (\r\n    <div className={`${orderDetailsStyles.details} pb-30`}>\r\n      <p\r\n        className={`${orderDetailsStyles.digits} text text_type_digits-large mb-8`}\r\n      >\r\n        {order.number}\r\n      </p>\r\n      <p className=\"text text_type_main-medium\">идентификатор заказа</p>\r\n      <img\r\n        className={`${orderDetailsStyles.checkmark} mt-15 mb-15`}\r\n        src={checkIcon}\r\n        alt=\"order-details\"\r\n      />\r\n      <p className=\"text text_type_main-default mb-2\">\r\n        Ваш заказ начали готовить\r\n      </p>\r\n      <p className=\"text text_type_main-default text_color_inactive\">\r\n        Дождитесь готовности на орбитальной станции\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n","import { useCallback } from \"react\";\r\nimport mainSectionStyles from \"./main.module.css\";\r\nimport { Modal } from \"../modal/modal\";\r\nimport BurgerIngredients from \"../burger-ingredients/burger-ingredients\";\r\nimport BurgerConstructorDroppable from \"../burger-constructor-droppable/burger-constructor-droppable\";\r\nimport { TIngredient, useAppDispatch, useAppSelector } from \"../../utils/types\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SELECT_INGREDIENT } from \"../../services/actions/ingredients-actions\";\r\nimport {\r\n  getOrderNumber,\r\n  DELETE_ORDER_DATA,\r\n} from \"../../services/actions/order-actions\";\r\nimport { OrderDetailsModal } from \"../order-details-modal/order-details-modal\";\r\n\r\nfunction Main() {\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  const { order, loggedIn } = useAppSelector(\r\n    ({\r\n      ingredients: { ingredients, selectedIngredient },\r\n      order: { order },\r\n      user: { loggedIn },\r\n    }) => {\r\n      return {\r\n        ingredients,\r\n        selectedIngredient,\r\n        order,\r\n        loggedIn,\r\n      };\r\n    }\r\n  );\r\n\r\n  const handleIngredientDetailsOpen = useCallback(\r\n    (ingredient) => {\r\n      dispatch({\r\n        type: SELECT_INGREDIENT,\r\n        payload: {\r\n          ingredient: ingredient,\r\n        },\r\n      });\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const handleOrderDetailsOpen = useCallback(\r\n    (ingredients) => {\r\n      if (!loggedIn) {\r\n        history.push(\"/login\");\r\n      } else {\r\n        dispatch(\r\n          getOrderNumber(\r\n            ingredients.map((ingredient: TIngredient) => ingredient._id)\r\n          )\r\n        );\r\n      }\r\n    },\r\n    [dispatch, history, loggedIn]\r\n  );\r\n\r\n  const handleOrderDetailsClose = useCallback(() => {\r\n    dispatch({\r\n      type: DELETE_ORDER_DATA,\r\n    });\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <main className={`${mainSectionStyles.main} pb-10`}>\r\n      <BurgerIngredients\r\n        handleIngredientDetailsOpen={handleIngredientDetailsOpen}\r\n      />\r\n      <BurgerConstructorDroppable onSubmit={handleOrderDetailsOpen} />\r\n\r\n      <Modal isVisible={!!order} onClose={handleOrderDetailsClose}>\r\n        {order ? <OrderDetailsModal order={order} /> : null}\r\n      </Modal>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import Main from \"../components/main/main\";\r\n\r\nexport const Constructor = () => {\r\n  return <Main />;\r\n};\r\n","import {\r\n  register,\r\n  login,\r\n  logout,\r\n  getUserInfoApi,\r\n  refreshToken,\r\n  setUserInfoApi,\r\n} from \"../../utils/api\";\r\nimport { AppThunk, AppDispatch } from \"../../utils/types\";\r\nimport { getCookie, setCookie } from \"../../utils/utils\";\r\nimport { History, LocationState } from \"history\";\r\n\r\nexport const USER_REGISTER: \"USER_REGISTER\" = \"USER_REGISTER\";\r\nexport const USER_LOGIN: \"USER_LOGIN\" = \"USER_LOGIN\";\r\nexport const USER_SET_DATA: \"USER_SET_DATA\" = \"USER_SET_DATA\";\r\nexport const REFRESH_TOKEN: \"REFRESH_TOKEN\" = \"REFRESH_TOKEN\";\r\nexport const USER_LOGOUT: \"USER_LOGOUT\" = \"USER_LOGOUT\";\r\nexport const GET_USER_INFO: \"GET_USER_INFO\" = \"GET_USER_INFO\";\r\nexport const SET_USER_INFO: \"SET_USER_INFO\" = \"SET_USER_INFO\";\r\n\r\nexport const registerUser: (\r\n  email: string,\r\n  password: string,\r\n  name: string,\r\n  history: History<LocationState>\r\n) => AppThunk<Promise<void>> = (email, password, name, history) => {\r\n  return async () => {\r\n    try {\r\n      const res = await register({ email, password, name });\r\n      console.log(\"registerUser\", res);\r\n      history.push(\"/login\");\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n};\r\n\r\nexport const loginUser: (\r\n  email: string,\r\n  password: string,\r\n  history: History<LocationState>\r\n) => AppThunk<Promise<void>> = (email, password, history) => {\r\n  return async (dispatch: AppDispatch) => {\r\n    try {\r\n      const res = await login({ email, password });\r\n      if (res.accessToken == null) {\r\n        return;\r\n      }\r\n      let authToken = res.accessToken.split(\"Bearer \")[1];\r\n      if (authToken && res.refreshToken) {\r\n        setCookie(\"authToken\", authToken);\r\n        localStorage.setItem(\"refreshToken\", res.refreshToken);\r\n      }\r\n      if (res.success) {\r\n        dispatch({ type: USER_LOGIN });\r\n        history.push(\"/\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n};\r\n\r\nexport const logoutUser: (\r\n  history: History<LocationState>\r\n) => AppThunk<Promise<void>> = (history) => {\r\n  return async (dispatch: AppDispatch) => {\r\n    try {\r\n      const refreshToken = localStorage.getItem(\"refreshToken\");\r\n      if (refreshToken == null) {\r\n        dispatch({\r\n          type: USER_LOGOUT,\r\n        });\r\n        history.push(\"/login\");\r\n        return;\r\n      }\r\n      const res = await logout(refreshToken);\r\n      console.log(\"logoutUser\", res);\r\n      if (res.success) {\r\n        localStorage.removeItem(\"refreshToken\");\r\n        dispatch({\r\n          type: USER_LOGOUT,\r\n        });\r\n        history.push(\"/login\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n};\r\n\r\nexport const getUserInfo: (\r\n  history: History<LocationState>,\r\n  retry?: boolean\r\n) => AppThunk<Promise<void>> = (history, retry = true) => {\r\n  return async (dispatch: AppDispatch) => {\r\n    try {\r\n      let authToken = getCookie(\"authToken\");\r\n      if (authToken == null && retry) {\r\n        await dispatch(actionRefreshToken());\r\n        await dispatch(getUserInfo(history, false));\r\n        return;\r\n      }\r\n      if (authToken == null) {\r\n        await dispatch(logoutUser(history));\r\n        return;\r\n      }\r\n      const res = await getUserInfoApi(authToken);\r\n      console.log(\"getUserInfoApi\", res);\r\n      dispatch({\r\n        type: GET_USER_INFO,\r\n        payload: {\r\n          name: res.user.name,\r\n          email: res.user.email,\r\n        },\r\n      });\r\n    } catch (err: any) {\r\n      console.error(err);\r\n      if (err.data.message === \"jwt expired\" && retry) {\r\n        try {\r\n          await dispatch(actionRefreshToken());\r\n          await dispatch(getUserInfo(history, false));\r\n        } catch (err) {\r\n          await dispatch(logoutUser(history));\r\n          return;\r\n        }\r\n      } else {\r\n        await dispatch(logoutUser(history));\r\n        return;\r\n      }\r\n    }\r\n  };\r\n};\r\n\r\nexport const setUserInfo: (\r\n  name: string,\r\n  email: string,\r\n  password: string,\r\n  history: History<LocationState>,\r\n  retry?: boolean\r\n) => AppThunk<Promise<void>> = (\r\n  name,\r\n  email,\r\n  password,\r\n  history,\r\n  retry = true\r\n) => {\r\n  return async (dispatch: AppDispatch) => {\r\n    try {\r\n      let authToken = getCookie(\"authToken\");\r\n\r\n      if (authToken == null && retry) {\r\n        await dispatch(actionRefreshToken());\r\n        await dispatch(setUserInfo(name, email, password, history, false));\r\n        return;\r\n      }\r\n\r\n      if (authToken == null) {\r\n        await dispatch(logoutUser(history));\r\n        return;\r\n      }\r\n\r\n      const res = await setUserInfoApi(authToken, { name, email, password });\r\n      dispatch({\r\n        type: SET_USER_INFO,\r\n        payload: {\r\n          name: res.user.name,\r\n          email: res.user.email,\r\n          password: res.user.password,\r\n        },\r\n      });\r\n    } catch (err: any) {\r\n      console.error(err);\r\n      if (err.data.message === \"jwt expired\" && retry) {\r\n        try {\r\n          await dispatch(actionRefreshToken());\r\n          await dispatch(setUserInfo(name, email, password, history, false));\r\n        } catch (err) {\r\n          console.error(\"err\");\r\n        }\r\n      }\r\n    }\r\n  };\r\n};\r\n\r\nexport const actionRefreshToken: () => AppThunk<Promise<void>> = () => {\r\n  return async () => {\r\n    try {\r\n      const refreshingToken = localStorage.getItem(\"refreshToken\");\r\n      if (refreshingToken == null) {\r\n        return;\r\n      }\r\n      const res = await refreshToken(refreshingToken);\r\n      let authToken = res.accessToken.split(\"Bearer \")[1];\r\n      if (authToken && res.refreshToken) {\r\n        setCookie(\"authToken\", authToken);\r\n        localStorage.setItem(\"refreshToken\", res.refreshToken);\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n};\r\n","import {\r\n  Button,\r\n  Input,\r\n  PasswordInput,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { USER_REGISTER, registerUser } from \"../services/actions/user-actions\";\r\nimport { useAppDispatch, useAppSelector } from \"../utils/types\";\r\nimport styles from \"./pages.module.css\";\r\n\r\nexport const Register = () => {\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  const { email, password, name } = useAppSelector((state) => {\r\n    return {\r\n      email: state.user.email,\r\n      password: state.user.password,\r\n      name: state.user.name,\r\n      loggedIn: state.user.loggedIn,\r\n    };\r\n  });\r\n\r\n  const handleChange = useCallback(\r\n    (evt) => {\r\n      const { name, value } = evt.target;\r\n      dispatch({ type: USER_REGISTER, payload: { [name]: value } });\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const handleSubmit = useCallback(\r\n    (evt) => {\r\n      evt.preventDefault();\r\n      dispatch(registerUser(email, password, name, history));\r\n    },\r\n    [dispatch, email, name, password, history]\r\n  );\r\n\r\n  return (\r\n    <div className={styles.main}>\r\n      <div className={`${styles.form__block} pt-20`}>\r\n        <h1 className=\"text text_type_main-medium mb-6\">Регистрация</h1>\r\n        <form className={styles.form} onSubmit={handleSubmit}>\r\n          <div className=\"mb-6\">\r\n            <Input\r\n              type={\"text\"}\r\n              placeholder={\"Имя\"}\r\n              onChange={(e) => handleChange(e)}\r\n              value={name}\r\n              name={\"name\"}\r\n              error={false}\r\n              errorText={\"Ошибка\"}\r\n              size={\"default\"}\r\n            />\r\n          </div>\r\n          <div className=\"mb-6\">\r\n            <Input\r\n              type={\"email\"}\r\n              placeholder={\"E-mail\"}\r\n              onChange={(e) => handleChange(e)}\r\n              value={email}\r\n              name={\"email\"}\r\n              error={false}\r\n              errorText={\"Ошибка\"}\r\n              size={\"default\"}\r\n            />\r\n          </div>\r\n          <div className=\"mb-6\">\r\n            <PasswordInput\r\n              onChange={(e) => handleChange(e)}\r\n              value={password}\r\n              name={\"password\"}\r\n            />\r\n          </div>\r\n          <Button type=\"primary\" size=\"medium\">\r\n            Зарегистрироваться\r\n          </Button>\r\n        </form>\r\n        <div>\r\n          <p className=\"text text_type_main-default text_color_inactive mt-20\">\r\n            Уже зарегистрированы?{\" \"}\r\n            <Link to=\"/login\" className={styles.login}>\r\n              Войти\r\n            </Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import {\r\n  Button,\r\n  Input,\r\n  PasswordInput,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { USER_SET_DATA, loginUser } from \"../services/actions/user-actions\";\r\nimport { useAppDispatch, useAppSelector } from \"../utils/types\";\r\nimport styles from \"./pages.module.css\";\r\n\r\nexport const Login = () => {\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  const { email, password } = useAppSelector((state) => {\r\n    return {\r\n      email: state.user.email,\r\n      password: state.user.password,\r\n      loggedIn: state.user.loggedIn,\r\n    };\r\n  });\r\n\r\n  const handleChange = useCallback(\r\n    (evt) => {\r\n      const { name, value } = evt.target;\r\n      dispatch({ type: USER_SET_DATA, payload: { [name]: value } });\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const handleSubmit = useCallback(\r\n    (evt) => {\r\n      evt.preventDefault();\r\n      dispatch(loginUser(email, password, history));\r\n    },\r\n    [dispatch, email, password, history]\r\n  );\r\n\r\n  return (\r\n    <div className={styles.main}>\r\n      <div className={`${styles.form__block} pt-20`}>\r\n        <h1 className=\"text text_type_main-medium mb-6\">Вход</h1>\r\n        <form className={styles.form} onSubmit={handleSubmit}>\r\n          <div className=\"mb-6\">\r\n            <Input\r\n              type={\"email\"}\r\n              placeholder={\"E-mail\"}\r\n              onChange={(e) => handleChange(e)}\r\n              value={email}\r\n              name={\"email\"}\r\n              error={false}\r\n              errorText={\"Ошибка\"}\r\n              size={\"default\"}\r\n            />\r\n          </div>\r\n          <div className=\"mb-6\">\r\n            <PasswordInput\r\n              onChange={(e) => handleChange(e)}\r\n              value={password}\r\n              name={\"password\"}\r\n            />\r\n          </div>\r\n          <Button type=\"primary\" size=\"medium\">\r\n            Войти\r\n          </Button>\r\n        </form>\r\n        <div className={styles.register}>\r\n          <p className=\"text text_type_main-default text_color_inactive mt-20\">\r\n            Вы — новый пользователь?{\" \"}\r\n            <Link to=\"/register\" className={styles.link}>\r\n              Зарегистрироваться\r\n            </Link>\r\n          </p>\r\n        </div>\r\n        <div className={styles.forgot_password}>\r\n          <p className=\"text text_type_main-default text_color_inactive mt-4\">\r\n            Забыли пароль?{\" \"}\r\n            <Link to=\"/forgot-password\" className={styles.link}>\r\n              Восстановить пароль\r\n            </Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { forgotPasswordApi, resetPasswordApi } from \"../../utils/api\";\r\nimport { AppDispatch } from \"../../utils/types\";\r\nimport { History, LocationState } from \"history\";\r\n\r\nexport const FORGOT_PASSWORD_SET_EMAIL: \"FORGOT_PASSWORD_SET_EMAIL\" =\r\n  \"FORGOT_PASSWORD_SET_EMAIL\";\r\nexport const RESET_PASSWORD: \"RESET_PASSWORD\" = \"RESET_PASSWORD\";\r\n\r\nexport const resetPassword = (\r\n  password: string,\r\n  resetToken: string,\r\n  history: History<LocationState>\r\n) => {\r\n  return (dispatch: AppDispatch) => {\r\n    resetPasswordApi(password, resetToken)\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          history.push(\"/\");\r\n          dispatch({ type: RESET_PASSWORD });\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const forgotPassword = (\r\n  email: string,\r\n  history: History<LocationState>\r\n) => {\r\n  return () => {\r\n    forgotPasswordApi(email)\r\n      .then((res) => {\r\n        console.log(\"forgotPasswordApi\", res);\r\n        if (res.success) {\r\n          history.push(\"/reset-password\");\r\n          console.log(\"redir\", res);\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n","import {\r\n  Button,\r\n  Input,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { FORGOT_PASSWORD_SET_EMAIL, forgotPassword } from \"../services/actions/reset-password-actions\";\r\nimport { useAppDispatch, useAppSelector } from \"../utils/types\";\r\nimport styles from \"./pages.module.css\";\r\n\r\nexport const ForgotPassword = () => {\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  const { email } = useAppSelector((state) => {\r\n    return { email: state.resetPassword.email };\r\n  });\r\n\r\n  const handleChange = useCallback(\r\n    (evt) => {\r\n      const { name, value } = evt.target;\r\n      dispatch({ type: FORGOT_PASSWORD_SET_EMAIL, payload: { [name]: value } });\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const handleSubmit = useCallback(\r\n    (evt) => {\r\n      evt.preventDefault();\r\n      dispatch(forgotPassword(email, history));\r\n    },\r\n    [dispatch, email, history]\r\n  );\r\n\r\n  return (\r\n    <div className={styles.main}>\r\n      <div className={`${styles.form__block} pt-20`}>\r\n        <h1 className=\"text text_type_main-medium mb-6\">\r\n          Восстановление пароля\r\n        </h1>\r\n        <form className={styles.form} onSubmit={handleSubmit}>\r\n          <div className=\"mb-6\">\r\n            <Input\r\n              type={\"email\"}\r\n              placeholder={\"Укажите e-mail\"}\r\n              onChange={(evt) => {\r\n                handleChange(evt);\r\n              }}\r\n              value={email}\r\n              name={\"email\"}\r\n              error={false}\r\n              errorText={\"Ошибка\"}\r\n              size={\"default\"}\r\n            />\r\n          </div>\r\n          <Button type=\"primary\" size=\"medium\">\r\n            Восстановить\r\n          </Button>\r\n        </form>\r\n        <div>\r\n          <p className=\"text text_type_main-default text_color_inactive mt-20\">\r\n            Вспомнили пароль?{\" \"}\r\n            <Link to=\"/login\" className={styles.link}>\r\n              Войти\r\n            </Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import {\r\n  Button,\r\n  Input,\r\n  PasswordInput,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { resetPassword } from \"../services/actions/reset-password-actions\";\r\nimport { useAppDispatch, useAppSelector } from \"../utils/types\";\r\nimport styles from \"./pages.module.css\";\r\n\r\nexport const ResetPassword = () => {\r\n  const [resetPasswordValues, setResetPasswordValues] = useState<{\r\n    [key: string]: string;\r\n  }>({\r\n    password: \"\",\r\n    resetToken: \"\",\r\n  });\r\n\r\n  const { email } = useAppSelector((state) => {\r\n    return { email: state.resetPassword.email };\r\n  });\r\n\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  const handleChange = useCallback((evt) => {\r\n    const { name, value } = evt.target;\r\n    setResetPasswordValues({ [name]: value });\r\n  }, []);\r\n\r\n  const handleSubmit = useCallback(\r\n    (evt) => {\r\n      evt.preventDefault();\r\n      dispatch(\r\n        resetPassword(\r\n          resetPasswordValues.password,\r\n          resetPasswordValues.resetToken,\r\n          history\r\n        )\r\n      );\r\n    },\r\n    [dispatch, history, resetPasswordValues]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!email) {\r\n      history.push(\"/forgot-password\");\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <div className={styles.main}>\r\n      <div className={`${styles.form__block} pt-20`}>\r\n        <h1 className=\"text text_type_main-medium mb-6\">\r\n          Восстановление пароля\r\n        </h1>\r\n        <form className={styles.form} onSubmit={handleSubmit}>\r\n          <div className=\"mb-6\">\r\n            <PasswordInput\r\n              onChange={(evt) => handleChange(evt)}\r\n              value={resetPasswordValues.password}\r\n              name={\"password\"}\r\n            />\r\n          </div>\r\n          <div className=\"mb-6\">\r\n            <Input\r\n              type={\"text\"}\r\n              placeholder={\"Введите код из письма\"}\r\n              onChange={(evt) => handleChange(evt)}\r\n              value={resetPasswordValues.resetToken}\r\n              name={\"code\"}\r\n              error={false}\r\n              errorText={\"Ошибка\"}\r\n              size={\"default\"}\r\n            />\r\n          </div>\r\n          <Button type=\"primary\" size=\"medium\">\r\n            Сохранить\r\n          </Button>\r\n        </form>\r\n        <p className=\"text text_type_main-default text_color_inactive mt-20\">\r\n          Вспомнили пароль?{\" \"}\r\n          <Link to=\"/login\" className={styles.link}>\r\n            Войти\r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useAppDispatch } from \"../../utils/types\";\r\nimport { getUserInfo } from \"../actions/user-actions\";\r\n\r\nexport function useUserInfo() {\r\n  const history = useHistory();\r\n  const dispatch = useAppDispatch();\r\n  useEffect(() => {\r\n    dispatch(getUserInfo(history));\r\n  }, [dispatch, history]);\r\n}\r\n","import {\r\n  Button,\r\n  Input,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { NavLink, useHistory } from \"react-router-dom\";\r\nimport { setUserInfo, logoutUser } from \"../services/actions/user-actions\";\r\nimport { useUserInfo } from \"../services/hooks/use-user-info\";\r\nimport { useAppDispatch, useAppSelector } from \"../utils/types\";\r\nimport styles from \"./profile.module.css\";\r\n\r\nexport const Profile = () => {\r\n  useUserInfo();\r\n  const { name, email, password } = useAppSelector((state) => {\r\n    return {\r\n      name: state.user.name,\r\n      email: state.user.email,\r\n      password: state.user.password,\r\n    };\r\n  });\r\n  const [formvalue, setFormvalue] = useState({\r\n    username: name,\r\n    useremail: email,\r\n    userpassword: password,\r\n  });\r\n\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    setFormvalue((prevstate) => ({\r\n      ...prevstate,\r\n      username: name || \"\",\r\n      useremail: email || \"\",\r\n    }));\r\n  }, [email, name]);\r\n\r\n  const handleChange = useCallback((evt) => {\r\n    setFormvalue((prevstate) => ({\r\n      ...prevstate,\r\n      [evt.target.name]: evt.target.value,\r\n    }));\r\n  }, []);\r\n\r\n  const handleSubmit = useCallback(\r\n    (evt) => {\r\n      evt.preventDefault();\r\n      dispatch(\r\n        setUserInfo(\r\n          formvalue.username,\r\n          formvalue.useremail,\r\n          formvalue.userpassword,\r\n          history\r\n        )\r\n      );\r\n    },\r\n    [dispatch, formvalue, history]\r\n  );\r\n\r\n  const handleCancel = () => {\r\n    setFormvalue({\r\n      username: name,\r\n      useremail: email,\r\n      userpassword: password,\r\n    });\r\n  };\r\n\r\n  const isFormChanged =\r\n    formvalue.username !== name ||\r\n    formvalue.useremail !== email ||\r\n    formvalue.userpassword !== password;\r\n\r\n  return (\r\n    <div className={`${styles.main} pt-20`}>\r\n      <nav className={`${styles.nav} mr-15`}>\r\n        <NavLink\r\n          to=\"/profile\"\r\n          activeClassName={styles.active_link}\r\n          className={`${styles.navlink} text text_type_main-medium text_color_inactive mb-6`}\r\n        >\r\n          Профиль\r\n        </NavLink>\r\n        <NavLink\r\n          to=\"/profile/orders\"\r\n          className={`${styles.navlink} text text_type_main-medium text_color_inactive mb-6`}\r\n        >\r\n          История заказов\r\n        </NavLink>\r\n        <button\r\n          className={`${styles.logout} text text_type_main-medium text_color_inactive mb-6`}\r\n          onClick={() => {\r\n            dispatch(logoutUser(history));\r\n          }}\r\n        >\r\n          Выход\r\n        </button>\r\n        <p\r\n          className={`${styles.nav_text} text text_type_main-default text_color_inactive`}\r\n        >\r\n          В этом разделе вы можете изменить свои персональные данные\r\n        </p>\r\n      </nav>\r\n      <form className={styles.form} onSubmit={handleSubmit}>\r\n        <div className=\"mb-6\">\r\n          <Input\r\n            type={\"text\"}\r\n            placeholder={\"Имя\"}\r\n            onChange={(evt) => {\r\n              handleChange(evt);\r\n            }}\r\n            icon={\"EditIcon\"}\r\n            value={formvalue.username}\r\n            name={\"username\"}\r\n            error={false}\r\n            errorText={\"Ошибка\"}\r\n            size={\"default\"}\r\n          />\r\n        </div>\r\n        <div className=\"mb-6\">\r\n          <Input\r\n            type={\"text\"}\r\n            placeholder={\"Логин\"}\r\n            onChange={(evt) => {\r\n              handleChange(evt);\r\n            }}\r\n            icon={\"EditIcon\"}\r\n            value={formvalue.useremail}\r\n            name={\"useremail\"}\r\n            error={false}\r\n            errorText=\"Ошибка\"\r\n            size={\"default\"}\r\n          />\r\n        </div>\r\n        <div>\r\n          <Input\r\n            type={\"password\"}\r\n            placeholder={\"Пароль\"}\r\n            onChange={(evt) => {\r\n              handleChange(evt);\r\n            }}\r\n            icon={\"EditIcon\"}\r\n            value={formvalue.userpassword}\r\n            name={\"userpassword\"}\r\n            error={false}\r\n            errorText={\"Ошибка\"}\r\n            size={\"default\"}\r\n          />\r\n        </div>\r\n        {isFormChanged && (\r\n          <div className=\"mt-6\">\r\n            <Button type=\"primary\" size=\"small\">\r\n              Сохранить\r\n            </Button>\r\n            <Button\r\n              type=\"secondary\"\r\n              size=\"small\"\r\n              onClick={() => {\r\n                handleCancel();\r\n              }}\r\n            >\r\n              Отмена\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n","import { Route, Redirect, RouteProps, useLocation } from \"react-router-dom\";\r\nimport { useAppSelector } from \"../../utils/types\";\r\n\r\nfunction ProtectedRoute(props: RouteProps) {\r\n  const { loggedIn } = useAppSelector((state) => ({\r\n    loggedIn: state.user.loggedIn,\r\n  }));\r\n\r\n  const location = useLocation();\r\n\r\n  return (\r\n    <Route\r\n      {...props}\r\n      children={\r\n        loggedIn ? (\r\n          props.children\r\n        ) : (\r\n          <Redirect to={{ pathname: \"/login\", state: { from: location } }} />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","import { TIngredient } from \"../../utils/types\";\r\nimport ingredientDetailsStyles from \"./ingredient-details.module.css\";\r\n\r\nexport function IngredientDetails({ ingredient }: { ingredient: TIngredient }) {\r\n  const {\r\n    image_large: image,\r\n    name,\r\n    calories,\r\n    proteins,\r\n    fat,\r\n    carbohydrates,\r\n  } = ingredient || {};\r\n  return (\r\n    <div className={`${ingredientDetailsStyles.details} pt-10 pb-15`}>\r\n      <div className={ingredientDetailsStyles.content}>\r\n        <img className={ingredientDetailsStyles.image} src={image} alt={name} />\r\n        <p className=\"text text_type_main-medium mt-4 mb-8\">{name}</p>\r\n        <ul className={ingredientDetailsStyles.list}>\r\n          <li>\r\n            <p className=\"text text_type_main-default text_color_inactive mb-2\">\r\n              Калории,ккал\r\n            </p>\r\n            <span className=\"text text_type_digits-default text_color_inactive\">\r\n              {calories}\r\n            </span>\r\n          </li>\r\n          <li>\r\n            <p className=\"text text_type_main-default text_color_inactive mb-2\">\r\n              Белки, г\r\n            </p>\r\n            <span className=\"text text_type_digits-default text_color_inactive\">\r\n              {proteins}\r\n            </span>\r\n          </li>\r\n          <li>\r\n            <p className=\"text text_type_main-default text_color_inactive mb-2\">\r\n              Жиры, г\r\n            </p>\r\n            <span className=\"text text_type_digits-default text_color_inactive\">\r\n              {fat}\r\n            </span>\r\n          </li>\r\n          <li>\r\n            <p className=\"text text_type_main-default text_color_inactive mb-2\">\r\n              Углеводы, г\r\n            </p>\r\n            <span className=\"text text_type_digits-default text_color_inactive\">\r\n              {carbohydrates}\r\n            </span>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useParams } from \"react-router-dom\";\r\nimport { useAppSelector } from \"../../utils/types\";\r\nimport { IngredientDetails } from \"./ingredient-details\";\r\n\r\nexport function IngredientDetailsPage() {\r\n  const { id } = useParams<{ id: string }>();\r\n\r\n  const { ingredients } = useAppSelector((state) => {\r\n    return {\r\n      ingredients: state.ingredients.ingredients,\r\n    };\r\n  });\r\n\r\n  const ingredient = ingredients.find((ingredient) => {\r\n    return ingredient._id === id;\r\n  });\r\n\r\n  return ingredient ? <IngredientDetails ingredient={ingredient} /> : null;\r\n}\r\n","import { useMemo } from \"react\";\r\nimport { useCallback } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { DELETE_SELECTED_INGREDIENT_DATA } from \"../../services/actions/ingredients-actions\";\r\nimport { useAppDispatch, useAppSelector } from \"../../utils/types\";\r\nimport { IngredientDetails } from \"../ingredient-details/ingredient-details\";\r\nimport { Modal } from \"../modal/modal\";\r\n\r\nexport function IngredientDetailsModal() {\r\n  const { id } = useParams<{ id: string }>();\r\n  const history = useHistory();\r\n  const dispatch = useAppDispatch();\r\n  const { selectedIngredient, ingredients } = useAppSelector(\r\n    ({ ingredients: { ingredients, selectedIngredient } }) => {\r\n      return {\r\n        ingredients,\r\n        selectedIngredient,\r\n      };\r\n    }\r\n  );\r\n  const ingredient = useMemo(() => {\r\n    if (selectedIngredient) {\r\n      return selectedIngredient;\r\n    }\r\n    return ingredients.find((ingredient) => ingredient._id === id);\r\n  }, [id, selectedIngredient, ingredients]);\r\n  const handleIngredientDetailsClose = useCallback(() => {\r\n    dispatch({\r\n      type: DELETE_SELECTED_INGREDIENT_DATA,\r\n    });\r\n    history.goBack();\r\n  }, [dispatch, history]);\r\n  return (\r\n    <Modal\r\n      isVisible={!!ingredient}\r\n      onClose={handleIngredientDetailsClose}\r\n      title=\"Детали ингредиента\"\r\n    >\r\n      {ingredient && <IngredientDetails ingredient={ingredient} />}\r\n    </Modal>\r\n  );\r\n}\r\n","import { Route, Redirect, RouteProps } from \"react-router-dom\";\r\nimport { useAppSelector } from \"../../utils/types\";\r\n\r\nfunction PublicRoute(props: RouteProps) {\r\n  const { loggedIn } = useAppSelector((state) => ({\r\n    loggedIn: state.user.loggedIn,\r\n  }));\r\n  return (\r\n    <Route\r\n      {...props}\r\n      children={!loggedIn ? props.children : <Redirect to=\"/login\" />}\r\n    />\r\n  );\r\n}\r\n\r\nexport default PublicRoute;\r\n","import {\r\n  BurgerIcon,\r\n  ListIcon,\r\n  Logo,\r\n  ProfileIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport header from \"./header.module.css\";\r\n\r\nfunction Header() {\r\n  return (\r\n    <header className={`${header.header} p-4`}>\r\n      <nav className={header.nav}>\r\n        <NavLink\r\n          exact\r\n          to=\"/\"\r\n          className={`${header.navLink} pr-5 pt-4 pb-4 mr-2`}\r\n          activeClassName={header.active_link}\r\n        >\r\n          <BurgerIcon type=\"primary\" />\r\n          <span className={`text text_type_main-default ml-2`}>\r\n            Конструктор\r\n          </span>\r\n        </NavLink>\r\n        <NavLink\r\n          to=\"/feed\"\r\n          className={`${header.navLink} pl-5 pr-5 pt-4 pb-4`}\r\n          activeClassName={header.active_link}\r\n        >\r\n          <ListIcon type=\"primary\" />\r\n          <span className={`text text_type_main-default ml-2`}>\r\n            Лента заказов\r\n          </span>\r\n        </NavLink>\r\n      </nav>\r\n      <Logo />\r\n      <div className={header.auth}>\r\n        <NavLink\r\n          exact\r\n          to=\"/profile\"\r\n          className={`${header.navLink} pl-5 pr-5 pt-4 pb-4`}\r\n          activeClassName={header.active_link}\r\n        >\r\n          <ProfileIcon type=\"primary\" />\r\n          <span className={`text text_type_main-default ml-2`}>\r\n            Личный кабинет\r\n          </span>\r\n        </NavLink>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import {\r\n  isToday,\r\n  isYesterday,\r\n  formatDistanceToNowStrict,\r\n  format,\r\n} from \"date-fns\";\r\nimport { ru } from \"date-fns/locale\";\r\n\r\nexport function formatOrderDate(date: string) {\r\n  const orderDate = new Date(date);\r\n  const pieces = [\r\n    isToday(orderDate)\r\n      ? \"Сегодня\"\r\n      : isYesterday(orderDate)\r\n      ? \"Вчера\"\r\n      : formatDistanceToNowStrict(orderDate, {\r\n          locale: ru,\r\n          addSuffix: true,\r\n        }),\r\n    format(orderDate, \"HH:mm 'i-'O\"),\r\n  ];\r\n  return pieces.join(\", \");\r\n}\r\n","import { TOrder } from \"./types\";\r\n\r\nexport function formatOrderStatus(status: TOrder[\"status\"]) {\r\n  switch (status) {\r\n    case \"created\":\r\n      return \"Создан\";\r\n    case \"pending\":\r\n      return \"Готовится\";\r\n    case \"done\":\r\n      return \"Выполнен\";\r\n    default:\r\n      return \"Неизвестный статус\";\r\n  }\r\n}\r\n","import { useMemo } from \"react\";\r\nimport { useAppSelector } from \"../../utils/types\";\r\n\r\nexport function useOrderData(orderId: string) {\r\n  const { order, ingredients } = useAppSelector(\r\n    ({ orders: { orders }, ingredients: { ingredients } }) => {\r\n      return {\r\n        ingredients,\r\n        order: orders[orderId],\r\n      };\r\n    }\r\n  );\r\n\r\n  const orderIngredients = useMemo(\r\n    () =>\r\n      ingredients.filter((ingredient) =>\r\n        order ? order.ingredients.includes(ingredient._id) : false\r\n      ),\r\n    [order, ingredients]\r\n  );\r\n\r\n  const { orderIngredientsSlice, orderIngredientsRest } = useMemo(() => {\r\n    return {\r\n      orderIngredientsSlice: orderIngredients.slice(0, 5),\r\n      orderIngredientsRest: orderIngredients.slice(5),\r\n    };\r\n  }, [orderIngredients]);\r\n\r\n  const orderIngredientCounts = useMemo(() => {\r\n    return order\r\n      ? order.ingredients.reduce<{ [key: string]: number }>(\r\n          (acc, ingredientId) => {\r\n            acc[ingredientId] = (acc[ingredientId] || 0) + 1;\r\n            return acc;\r\n          },\r\n          {}\r\n        )\r\n      : {};\r\n  }, [order]);\r\n\r\n  const orderTotal = useMemo(\r\n    () =>\r\n      orderIngredients.reduce((acc, ingredient) => {\r\n        return acc + ingredient.price * orderIngredientCounts[ingredient._id];\r\n      }, 0),\r\n    [orderIngredients, orderIngredientCounts]\r\n  );\r\n\r\n  return { order, orderIngredients, orderIngredientCounts, orderTotal, orderIngredientsSlice, orderIngredientsRest };\r\n}\r\n","import styles from \"./order-details.module.css\";\r\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { formatOrderDate } from \"../../utils/format-order-date\";\r\nimport { formatOrderStatus } from \"../../utils/format-order-status\";\r\nimport { useOrderData } from \"../../services/hooks/use-order-data\";\r\n\r\nexport const OrderDetails = ({ orderId }: { orderId: string }) => {\r\n  const { order, orderIngredients, orderIngredientCounts, orderTotal } =\r\n    useOrderData(orderId);\r\n\r\n  if (!order) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={`${styles.order_details} pb-6 pt-6`}>\r\n      <div className={styles.order_info}>\r\n        <div className={`${styles.order_number} mb-10`}>\r\n          <p className=\"text text_type_digits-default\">#{order.number}</p>\r\n        </div>\r\n        <div className={`mb-15`}>\r\n          <h1\r\n            className={`${styles.order_title} text text_type_main-medium mb-3`}\r\n          >\r\n            {order.name}\r\n          </h1>\r\n          <p\r\n            className={`${\r\n              order.status === \"done\"\r\n                ? styles.order_status_done\r\n                : styles.order_status_in_progress\r\n            } text text_type_main-default`}\r\n          >\r\n            {formatOrderStatus(order.status)}\r\n          </p>\r\n        </div>\r\n        <div className={`${styles.order_ingredients} pr-4`}>\r\n          <p className=\"text text_type_main-medium mb-6\">Состав:</p>\r\n          <ul className={styles.order_ingredients_list}>\r\n            {orderIngredients.map((ingredient, index) => (\r\n              <li\r\n                key={`${ingredient._id}${index}`}\r\n                className={`${styles.order_ingredients_listitem} mb-4`}\r\n              >\r\n                <div className={styles.ingredient_details}>\r\n                  <img src={ingredient.image_mobile} alt=\"Img\" />\r\n                  <p\r\n                    className={`${styles.ingredient_title} text text_type_main-default ml-4`}\r\n                  >\r\n                    {ingredient.name}\r\n                  </p>\r\n                </div>\r\n                <div className={styles.ingredient_cost}>\r\n                  <p className=\"text text_type_digits-default mr-2 ml-4\">\r\n                    <span>{orderIngredientCounts[ingredient._id]}</span> x{\" \"}\r\n                    <span>{ingredient.price}</span>\r\n                  </p>\r\n                  <CurrencyIcon type=\"primary\" />\r\n                </div>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n        <div className={styles.order_date}>\r\n          <p className=\"text text_type_main-default text_color_inactive\">\r\n            {formatOrderDate(order.createdAt)}\r\n          </p>\r\n          <div className={styles.order_sum}>\r\n            <p className=\"text text_type_digits-default mr-2\">{orderTotal}</p>\r\n            <CurrencyIcon type=\"primary\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","export const WS_CONNECTION_INIT = \"WS_CONNECTION_INIT\";\r\nexport const WS_SEND_MESSAGE = \"WS_SEND_MESSAGE\";\r\nexport const WS_CONNECTION_CLOSE = \"WS_CONNECTION_CLOSE\";\r\n\r\nexport const FEED_WS_CONNECTION_START = \"FEED_WS_CONNECTION_START\";\r\nexport const FEED_WS_CONNECTION_SUCCESS = \"FEED_WS_CONNECTION_SUCCESS\";\r\nexport const FEED_WS_CONNECTION_ERROR = \"FEED_WS_CONNECTION_ERROR\";\r\nexport const FEED_WS_CONNECTION_CLOSED = \"FEED_WS_CONNECTION_CLOSED\";\r\nexport const FEED_WS_GET_MESSAGE = \"FEED_WS_GET_MESSAGE\";\r\n\r\nexport const PROFILE_FEED_WS_CONNECTION_START =\r\n  \"PROFILE_FEED_WS_CONNECTION_START\";\r\nexport const PROFILE_FEED_WS_CONNECTION_SUCCESS =\r\n  \"PROFILE_FEED_WS_CONNECTION_SUCCESS\";\r\nexport const PROFILE_FEED_WS_CONNECTION_ERROR =\r\n  \"PROFILE_FEED_WS_CONNECTION_ERROR\";\r\nexport const PROFILE_FEED_WS_CONNECTION_CLOSED =\r\n  \"PROFILE_FEED_WS_CONNECTION_CLOSED\";\r\nexport const PROFILE_FEED_WS_GET_MESSAGE = \"PROFILE_FEED_WS_GET_MESSAGE\";\r\n","import { useEffect } from \"react\";\r\nimport { useAppDispatch } from \"../../utils/types\";\r\nimport {\r\n  WS_CONNECTION_INIT,\r\n  FEED_WS_CONNECTION_CLOSED,\r\n  FEED_WS_CONNECTION_ERROR,\r\n  FEED_WS_CONNECTION_START,\r\n  FEED_WS_CONNECTION_SUCCESS,\r\n  FEED_WS_GET_MESSAGE,\r\n} from \"../actions/ws-actions\";\r\n\r\nexport function useWsFeed() {\r\n  const dispatch = useAppDispatch();\r\n  useEffect(() => {\r\n    dispatch({\r\n      type: WS_CONNECTION_INIT,\r\n      payload: {\r\n        wsUrl: \"wss://norma.nomoreparties.space/orders/all\",\r\n        id: \"feed\",\r\n        actions: {\r\n          start: FEED_WS_CONNECTION_START,\r\n          open: FEED_WS_CONNECTION_SUCCESS,\r\n          error: FEED_WS_CONNECTION_ERROR,\r\n          message: FEED_WS_GET_MESSAGE,\r\n          close: FEED_WS_CONNECTION_CLOSED,\r\n        },\r\n      },\r\n    });\r\n  }, [dispatch]);\r\n}\r\n","import { useParams } from \"react-router-dom\";\r\nimport { OrderDetails } from \"../components/order-details/order-details\";\r\nimport { useWsFeed } from \"../services/hooks/use-ws-feed\";\r\n\r\nexport function FeedDetails() {\r\n  useWsFeed();\r\n  const { id } = useParams<{ id: string }>();\r\n  return <OrderDetails orderId={id} />;\r\n}\r\n","import { useEffect } from \"react\";\nimport { useAppDispatch } from \"../../utils/types\";\nimport { getCookie } from \"../../utils/utils\";\nimport {\n  WS_CONNECTION_INIT,\n  PROFILE_FEED_WS_CONNECTION_CLOSED,\n  PROFILE_FEED_WS_CONNECTION_ERROR,\n  PROFILE_FEED_WS_CONNECTION_START,\n  PROFILE_FEED_WS_CONNECTION_SUCCESS,\n  PROFILE_FEED_WS_GET_MESSAGE,\n} from \"../actions/ws-actions\";\n\nexport function useWsProfileFeed() {\n  const dispatch = useAppDispatch();\n  useEffect(() => {\n    const token = getCookie(\"authToken\");\n    if (!token) {\n      console.log(\"useWsProfileFeed\", \"missing token\");\n      return;\n    }\n    dispatch({\n      type: WS_CONNECTION_INIT,\n      payload: {\n        wsUrl: `wss://norma.nomoreparties.space/orders?token=${token}`,\n        id: \"profileFeed\",\n        actions: {\n          start: PROFILE_FEED_WS_CONNECTION_START,\n          open: PROFILE_FEED_WS_CONNECTION_SUCCESS,\n          error: PROFILE_FEED_WS_CONNECTION_ERROR,\n          message: PROFILE_FEED_WS_GET_MESSAGE,\n          close: PROFILE_FEED_WS_CONNECTION_CLOSED,\n        },\n      },\n    });\n  }, [dispatch]);\n}\n","import { useParams } from \"react-router-dom\";\nimport { OrderDetails } from \"../components/order-details/order-details\";\nimport { useUserInfo } from \"../services/hooks/use-user-info\";\nimport { useWsProfileFeed } from \"../services/hooks/use-ws-profile-feed\";\n\nexport function ProfileFeedDetails() {\n  useWsProfileFeed();\n  useUserInfo();\n  const { id } = useParams<{ id: string }>();\n  return <OrderDetails orderId={id} />;\n}\n","import { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport styles from \"./order-card.module.css\";\r\nimport { useOrderData } from \"../../services/hooks/use-order-data\";\r\nimport { formatOrderDate } from \"../../utils/format-order-date\";\r\n\r\nexport const OrderCard = ({ orderId }: { orderId: string }) => {\r\n  const { order, orderTotal, orderIngredientsSlice, orderIngredientsRest } =\r\n    useOrderData(orderId);\r\n\r\n  if (!order) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={`${styles.order_card} p-6`}>\r\n      <div className={`${styles.order_number} mb-6`}>\r\n        <p className=\"text text_type_digits-default\">#{order.number}</p>\r\n        <p className=\"text text_type_main-default text_color_inactive\">\r\n          {formatOrderDate(order.createdAt)}\r\n        </p>\r\n      </div>\r\n      <h1 className={`${styles.order_title} mb-6 text text_type_main-medium`}>\r\n        {order.name}\r\n      </h1>\r\n      <div className={styles.order_ingredients}>\r\n        <div className={styles.order_ingredients_images}>\r\n          {orderIngredientsSlice.map((orderIngredient, index) => (\r\n            <div\r\n              key={`${orderIngredient._id}${index}`}\r\n              className={styles.order_images_border}\r\n            >\r\n              <img\r\n                src={orderIngredient.image_mobile}\r\n                alt=\"img\"\r\n                className={styles.order_ingredient_image}\r\n              />\r\n            </div>\r\n          ))}\r\n          {orderIngredientsRest.length > 0 ? (\r\n            <div className={styles.order_images_border}>\r\n              <img\r\n                src={orderIngredientsRest[0].image_large}\r\n                alt=\"img\"\r\n                className={styles.order_ingredient_image}\r\n              />\r\n              <div className={styles.order_ingredient_count}>\r\n                +{orderIngredientsRest.length}\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n        <div className={styles.order_price}>\r\n          <p className=\"text text_type_digits-default\">\r\n            {orderTotal}\r\n            <span className={`${styles.order_icon} ml-2`}>\r\n              <CurrencyIcon type=\"primary\" />\r\n            </span>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import styles from \"./order-number-feed.module.css\";\r\n\r\nexport const OrderNumberFeed = ({\r\n  readyNumbers,\r\n  inProgressNumbers,\r\n  doneToday,\r\n  doneTotal,\r\n}: {\r\n  readyNumbers: number[];\r\n  inProgressNumbers: number[];\r\n  doneTotal: number;\r\n  doneToday: number;\r\n}) => {\r\n  return (\r\n    <div className={styles.order_numbers_feed}>\r\n      <div className={styles.order_numbers}>\r\n        <div className={styles.order_numbers_ready}>\r\n          <p className=\"text text_type_main-medium mb-6\">Готовы:</p>\r\n          <ul className={styles.order_numbers_ready_list}>\r\n            {readyNumbers.map((number) => (\r\n              <li\r\n                key={number}\r\n                className={`${styles.order_numbers_list_item} ${styles.list_item} text text_type_digits-default`}\r\n              >\r\n                {number}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n        <div className={styles.order_numbers_inprogress}>\r\n          <p className=\"text text_type_main-medium mb-6\">В работе:</p>\r\n          <ul className={styles.order_numbers_inprogress_list}>\r\n            {inProgressNumbers.map((number) => (\r\n              <li\r\n                key={number}\r\n                className={`${styles.order_numbers_list_item} text text_type_digits-default`}\r\n              >\r\n                {number}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div className={`${styles.orders_done_alltime} mt-15`}>\r\n        <p className=\"text text_type_main-medium\">Выполнено за все время:</p>\r\n        <p className={`text text_type_digits-large ${styles.text_glow}`}>\r\n          {doneTotal}\r\n        </p>\r\n      </div>\r\n      <div className={styles.orders_done_today}>\r\n        <p className=\"text text_type_main-medium\">Выполнено за сегодня:</p>\r\n        <p className={`text text_type_digits-large ${styles.text_glow}`}>\r\n          {doneToday}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { useMemo } from \"react\";\r\nimport { useLocation, Link } from \"react-router-dom\";\r\nimport { useWsFeed } from \"../../services/hooks/use-ws-feed\";\r\nimport { useAppSelector } from \"../../utils/types\";\r\nimport { OrderCard } from \"../order-card/order-card\";\r\nimport { OrderNumberFeed } from \"../order-number-feed/order-number-feed\";\r\nimport styles from \"./feed-page.module.css\";\r\n\r\nexport function FeedPage() {\r\n  useWsFeed();\r\n\r\n  const { orders, total, totalToday } = useAppSelector(\r\n    ({ feed: { orders, total, totalToday } }) => ({ orders, total, totalToday })\r\n  );\r\n\r\n  let location = useLocation();\r\n\r\n  const readyNumbers = useMemo(\r\n    () =>\r\n      orders\r\n        .filter((order) => order.status === \"done\")\r\n        .slice(0, 6)\r\n        .map((order) => order.number),\r\n    [orders]\r\n  );\r\n\r\n  const inProgressNumbers = useMemo(\r\n    () =>\r\n      orders\r\n        .filter((order) => order.status !== \"done\")\r\n        .slice(0, 6)\r\n        .map((order) => order.number),\r\n    [orders]\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <h1>Лента заказов</h1>\r\n      <div className={styles.feed_page_grid}>\r\n        <div className={`${styles.order_list} ${styles.scrollbar}`}>\r\n          {orders.map(({ _id }) => (\r\n            <Link\r\n              key={_id}\r\n              to={{ pathname: `/feed/${_id}`, state: { background: location } }}\r\n              className={styles.feed_item_link}\r\n            >\r\n              <OrderCard orderId={_id} />\r\n            </Link>\r\n          ))}\r\n        </div>\r\n        <OrderNumberFeed\r\n          doneToday={totalToday || 0}\r\n          doneTotal={total || 0}\r\n          readyNumbers={readyNumbers}\r\n          inProgressNumbers={inProgressNumbers}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { FeedPage } from \"../components/feed-page/feed-page\"\r\n\r\nexport const Feed = () => {\r\n  return <FeedPage />;\r\n};\r\n","import { useLocation, Link } from \"react-router-dom\";\nimport { useWsProfileFeed } from \"../../services/hooks/use-ws-profile-feed\";\nimport { useAppSelector } from \"../../utils/types\";\nimport styles from \"../feed-page/feed-page.module.css\";\nimport { OrderCard } from \"../order-card/order-card\";\n\nexport function ProfileFeedPage() {\n  useWsProfileFeed();\n  const orders = useAppSelector(({ profileFeed }) => profileFeed.orders);\n  let location = useLocation();\n  return (\n    <div>\n      <h1>Персональная лента заказов</h1>\n      <div className={styles.order_list}>\n        {orders.map(({ _id }) => (\n          <Link\n            key={_id}\n            to={{\n              pathname: `/profile/orders/${_id}`,\n              state: { background: location },\n            }}\n            className={styles.feed_item_link}\n          >\n            <OrderCard orderId={_id} />\n          </Link>\n        ))}\n      </div>\n    </div>\n  );\n}\n","import { ProfileFeedPage } from \"../components/profile-feed-page/profile-feed-page\";\r\nimport { useUserInfo } from \"../services/hooks/use-user-info\";\r\n\r\nexport function ProfileFeed() {\r\n  useUserInfo();\r\n  return <ProfileFeedPage />;\r\n}\r\n","import { useCallback } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { Modal } from \"../modal/modal\";\r\nimport { OrderDetails } from \"../order-details/order-details\";\r\n\r\nexport function OrderInfoModal() {\r\n  const history = useHistory();\r\n  const { id } = useParams<{ id: string }>();\r\n\r\n  const handleFeedDetailsClose = useCallback(() => {\r\n    history.goBack();\r\n  }, [history]);\r\n\r\n  return (\r\n    <Modal isVisible={!!id} onClose={handleFeedDetailsClose}>\r\n      <OrderDetails orderId={id} />\r\n    </Modal>\r\n  );\r\n}\r\n","import { OrderInfoModal } from \"../components/order-info-modal/order-info-modal\";\r\nimport { useUserInfo } from \"../services/hooks/use-user-info\";\r\n\r\nexport function ProfileFeedDetailsModal() {\r\n  useUserInfo();\r\n  return <OrderInfoModal />;\r\n}\r\n","import { OrderInfoModal } from \"../components/order-info-modal/order-info-modal\";\r\n\r\nexport function FeedDetailsModal() {\r\n  return <OrderInfoModal />;\r\n}\r\n","import appstyles from \"../app/app.module.css\";\r\nimport { Route, Switch, useLocation } from \"react-router-dom\";\r\nimport { Location } from \"history\";\r\nimport { Constructor } from \"../../pages/constructor\";\r\nimport { Register } from \"../../pages/register\";\r\nimport { Login } from \"../../pages/login\";\r\nimport { ForgotPassword } from \"../../pages/forgot-password\";\r\nimport { ResetPassword } from \"../../pages/reset-password\";\r\nimport { Profile } from \"../../pages/profile\";\r\nimport ProtectedRoute from \"../protected-route/protected-route\";\r\nimport { IngredientDetailsPage } from \"../ingredient-details/ingredient-details-page\";\r\nimport { IngredientDetailsModal } from \"../ingredient-details-modal/ingredient-details-modal\";\r\nimport PublicRoute from \"../public-route/public-route\";\r\nimport Header from \"../header/header\";\r\nimport { useAppDispatch } from \"../../utils/types\";\r\nimport React, { useEffect } from \"react\";\r\nimport { getIngredientsApi } from \"../../services/actions/ingredients-actions\";\r\nimport { FeedDetails } from \"../../pages/feed-details\";\r\nimport { ProfileFeedDetails } from \"../../pages/profile-feed-details\";\r\nimport { Feed } from \"../../pages/feed\";\r\nimport { ProfileFeed } from \"../../pages/profile-feed\";\r\nimport { ProfileFeedDetailsModal } from \"../../pages/profile-feed-details-modal\";\r\nimport { FeedDetailsModal } from \"../../pages/feed-details-modal\";\r\n\r\nexport function AppRoutes() {\r\n  const location = useLocation<{ background: Location }>();\r\n  const background = location.state && location.state.background;\r\n  const dispatch = useAppDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(getIngredientsApi());\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <div className={appstyles.page}>\r\n      <Header />\r\n      <Switch location={background || location}>\r\n        <Route exact path=\"/\">\r\n          <Constructor />\r\n        </Route>\r\n        <PublicRoute path=\"/register\">\r\n          <Register />\r\n        </PublicRoute>\r\n        <PublicRoute path=\"/login\">\r\n          <Login />\r\n        </PublicRoute>\r\n        <PublicRoute path=\"/forgot-password\">\r\n          <ForgotPassword />\r\n        </PublicRoute>\r\n        <PublicRoute path=\"/reset-password\">\r\n          <ResetPassword />\r\n        </PublicRoute>\r\n        <Route path=\"/ingredients/:id\">\r\n          <IngredientDetailsPage />\r\n        </Route>\r\n        <Route path=\"/feed\" exact>\r\n          <Feed />\r\n        </Route>\r\n        <Route path=\"/feed/:id\">\r\n          <FeedDetails />\r\n        </Route>\r\n        <ProtectedRoute path=\"/profile\" exact>\r\n          <Profile />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path=\"/profile/orders\" exact>\r\n          <ProfileFeed />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path=\"/profile/orders/:id\">\r\n          <ProfileFeedDetails />\r\n        </ProtectedRoute>\r\n      </Switch>\r\n\r\n      {background && (\r\n        <React.Fragment>\r\n          <Route\r\n            path=\"/ingredients/:id\"\r\n            children={<IngredientDetailsModal />}\r\n          />\r\n          <Route path=\"/feed/:id\" children={<FeedDetailsModal />} />\r\n          <ProtectedRoute path=\"/profile/orders/:id\">\r\n            <ProfileFeedDetailsModal />\r\n          </ProtectedRoute>\r\n        </React.Fragment>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { BrowserRouter } from \"react-router-dom\";\r\nimport { AppRoutes } from \"../app-routes/app-routes\";\r\n\r\nfunction App() {\r\n  return (\r\n    <BrowserRouter>\r\n      <AppRoutes />\r\n    </BrowserRouter>\r\n  );\r\n}\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { composeWithDevToolsDevelopmentOnly } from \"@redux-devtools/extension\";\r\n\r\nexport const composeEnhancers = composeWithDevToolsDevelopmentOnly;\r\n","import { Reducer } from \"redux\";\r\nimport { TActions } from \"../../utils/tactions\";\r\nimport { TSelectedIngredient } from \"../../utils/types\";\r\nimport {\r\n  DELETE_IGREDIENT,\r\n  DROP_INGREDIENT,\r\n  GET_ORDER_NUMBER_SUCCESS,\r\n  REORDER_CONSTRUCTOR_ITEM,\r\n} from \"../actions/burger-constructor-actions\";\r\n\r\ntype TBurgerConstructorState = {\r\n  selectedIngredients: TSelectedIngredient[];\r\n  selectedBun: TSelectedIngredient | null;\r\n};\r\n\r\nconst burgerConstructorInitialState: TBurgerConstructorState = {\r\n  selectedIngredients: [],\r\n  selectedBun: null,\r\n};\r\n\r\nexport const burgerConstructorReducer: Reducer<\r\n  TBurgerConstructorState,\r\n  TActions\r\n> = (state = burgerConstructorInitialState, action) => {\r\n  switch (action.type) {\r\n    case GET_ORDER_NUMBER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        selectedIngredients: [],\r\n        selectedBun: null,\r\n      };\r\n    }\r\n    case DROP_INGREDIENT: {\r\n      const { ingredient } = action.payload;\r\n      if (ingredient.type === \"bun\") {\r\n        return {\r\n          ...state,\r\n          selectedBun: ingredient,\r\n        };\r\n      }\r\n      return {\r\n        ...state,\r\n        selectedIngredients: [...state.selectedIngredients, ingredient],\r\n      };\r\n    }\r\n    case DELETE_IGREDIENT: {\r\n      return {\r\n        ...state,\r\n        selectedIngredients: state.selectedIngredients.filter(\r\n          (item, index) => index !== action.payload.deleteIndex\r\n        ),\r\n      };\r\n    }\r\n    case REORDER_CONSTRUCTOR_ITEM: {\r\n      const { dragIndex, itemIndex } = action.payload;\r\n      const constructorItems = [...state.selectedIngredients];\r\n      let draggingItemIndex = constructorItems[dragIndex];\r\n      constructorItems[dragIndex] = constructorItems[itemIndex];\r\n      constructorItems[itemIndex] = draggingItemIndex;\r\n      return {\r\n        ...state,\r\n        selectedIngredients: constructorItems,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { TIngredient } from \"../../utils/types\";\r\nimport { Reducer } from \"redux\";\r\nimport { TActions } from \"../../utils/tactions\";\r\nimport { GET_INGREDIENTS_REQUEST, GET_INGREDIENTS_SUCCESS, GET_INGREDIENTS_FAILED, SELECT_INGREDIENT, DELETE_SELECTED_INGREDIENT_DATA } from \"../actions/ingredients-actions\";\r\n\r\ntype TIngredientsState = {\r\n  ingredients: TIngredient[];\r\n  ingredientsRequest: boolean;\r\n  ingredientsFailed: boolean;\r\n  selectedIngredient: TIngredient | null;\r\n};\r\n\r\nconst ingredientsInitialState: TIngredientsState = {\r\n  ingredients: [],\r\n  ingredientsRequest: false,\r\n  ingredientsFailed: false,\r\n  selectedIngredient: null,\r\n};\r\n\r\nexport const ingredientsReducer: Reducer<TIngredientsState, TActions> = (\r\n  state = ingredientsInitialState,\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case GET_INGREDIENTS_REQUEST: {\r\n      return {\r\n        ...state,\r\n        ingredientsFailed: false,\r\n        ingredientsRequest: true,\r\n      };\r\n    }\r\n    case GET_INGREDIENTS_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        ingredientsFailed: false,\r\n        ingredientsRequest: false,\r\n        ingredients: action.payload.ingredients,\r\n      };\r\n    }\r\n    case GET_INGREDIENTS_FAILED: {\r\n      return {\r\n        ...ingredientsInitialState,\r\n        ingredientsFailed: true,\r\n      };\r\n    }\r\n    case SELECT_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        selectedIngredient: action.payload.ingredient,\r\n      };\r\n    }\r\n    case DELETE_SELECTED_INGREDIENT_DATA: {\r\n      return {\r\n        ...state,\r\n        selectedIngredient: null,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { Reducer } from \"redux\";\r\nimport { TOrder } from \"../../utils/types\";\r\nimport { GET_ORDER_NUMBER_SUCCESS } from \"../actions/burger-constructor-actions\";\r\nimport { GET_ORDER_NUMBER_REQUEST, GET_ORDER_NUMBER_FAILED, DELETE_ORDER_DATA } from \"../actions/order-actions\";\r\n\r\ntype TOrderState = {\r\n  order: TOrder | null;\r\n  orderNumberRequest: boolean;\r\n  orderNumberFailed: boolean;\r\n};\r\n\r\nconst orderInitialState: TOrderState = {\r\n  order: null,\r\n  orderNumberRequest: false,\r\n  orderNumberFailed: false,\r\n};\r\n\r\nexport const orderReducer: Reducer<TOrderState> = (\r\n  state = orderInitialState,\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case GET_ORDER_NUMBER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        orderNumberRequest: true,\r\n      };\r\n    }\r\n    case GET_ORDER_NUMBER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        orderNumberRequest: false,\r\n        orderNumberFailed: false,\r\n        order: action.payload.order,\r\n      };\r\n    }\r\n    case GET_ORDER_NUMBER_FAILED: {\r\n      return {\r\n        ...orderInitialState,\r\n        orderNumberFailed: true,\r\n      };\r\n    }\r\n    case DELETE_ORDER_DATA: {\r\n      return {\r\n        ...state,\r\n        order: null,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { Reducer } from \"redux\";\r\nimport { FORGOT_PASSWORD_SET_EMAIL, RESET_PASSWORD } from \"../actions/reset-password-actions\";\r\n\r\ntype TResetPasswordState = {\r\n  email: string;\r\n};\r\n\r\nconst resetPasswordInitialState: TResetPasswordState = {\r\n  email: \"\",\r\n};\r\n\r\nexport const resetPasswordReducer: Reducer<TResetPasswordState> = (\r\n  state = resetPasswordInitialState,\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case FORGOT_PASSWORD_SET_EMAIL: {\r\n      return {\r\n        ...state,\r\n        email: action.payload.email,\r\n      };\r\n    }\r\n    case RESET_PASSWORD: {\r\n      return {\r\n        ...state,\r\n        email: \"\",\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { Reducer } from \"redux\";\r\nimport {\r\n  USER_REGISTER,\r\n  USER_SET_DATA,\r\n  USER_LOGIN,\r\n  USER_LOGOUT,\r\n  GET_USER_INFO,\r\n  SET_USER_INFO,\r\n} from \"../actions/user-actions\";\r\n\r\ntype TUserState = {\r\n  email: string;\r\n  password: string;\r\n  name: string;\r\n  loggedIn: boolean;\r\n};\r\n\r\nconst userInitialState: TUserState = {\r\n  email: \"\",\r\n  password: \"\",\r\n  name: \"\",\r\n  loggedIn: !!localStorage.getItem(\"refreshToken\"),\r\n};\r\n\r\nexport const userReducer: Reducer<TUserState> = (\r\n  state = userInitialState,\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case USER_REGISTER: {\r\n      return {\r\n        ...state,\r\n        email: action.payload.email ?? state.email,\r\n        password: action.payload.password ?? state.password,\r\n        name: action.payload.name ?? state.name,\r\n      };\r\n    }\r\n    case USER_SET_DATA: {\r\n      return {\r\n        ...state,\r\n        email: action.payload.email ?? state.email,\r\n        password: action.payload.password ?? state.password,\r\n      };\r\n    }\r\n    case USER_LOGIN: {\r\n      return {\r\n        ...state,\r\n        loggedIn: true,\r\n      };\r\n    }\r\n    case USER_LOGOUT: {\r\n      return {\r\n        ...state,\r\n        email: \"\",\r\n        password: \"\",\r\n        loggedIn: false,\r\n      };\r\n    }\r\n    case GET_USER_INFO: {\r\n      return {\r\n        ...state,\r\n        email: action.payload.email ?? state.email,\r\n        name: action.payload.name ?? state.name,\r\n      };\r\n    }\r\n    case SET_USER_INFO: {\r\n      return {\r\n        ...state,\r\n        email: action.payload.email ?? state.email,\r\n        name: action.payload.name ?? state.name,\r\n        password: action.payload.password ?? state.password,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { Reducer } from \"redux\";\r\nimport {\r\n  FEED_WS_CONNECTION_ERROR,\r\n  FEED_WS_CONNECTION_START,\r\n  FEED_WS_CONNECTION_SUCCESS,\r\n  FEED_WS_GET_MESSAGE,\r\n} from \"../actions/ws-actions\";\r\nimport { TOrder } from \"../../utils/types\";\r\nimport { TActions } from \"../../utils/tactions\"\r\n\r\ntype TFeedState = {\r\n  isLoading: boolean;\r\n  isError: boolean;\r\n  orders: TOrder[];\r\n  total?: number;\r\n  totalToday?: number;\r\n};\r\n\r\nconst feedInitialState: TFeedState = {\r\n  isLoading: false,\r\n  isError: false,\r\n  orders: [],\r\n};\r\n\r\nexport const feedReducer: Reducer<TFeedState, TActions> = (\r\n  state = feedInitialState,\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case FEED_WS_CONNECTION_START:\r\n      return { ...state, isLoading: true, isError: false };\r\n    case FEED_WS_CONNECTION_ERROR:\r\n      return { ...state, isLoading: false, isError: true };\r\n    case FEED_WS_CONNECTION_SUCCESS:\r\n      return { ...state, isError: false };\r\n    case FEED_WS_GET_MESSAGE:\r\n      const { orders, total, totalToday } = action.payload.data;\r\n      return { ...state, orders, total, totalToday, isLoading: false };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { Reducer } from \"redux\";\r\nimport {\r\n  PROFILE_FEED_WS_CONNECTION_ERROR,\r\n  PROFILE_FEED_WS_CONNECTION_START,\r\n  PROFILE_FEED_WS_CONNECTION_SUCCESS,\r\n  PROFILE_FEED_WS_GET_MESSAGE,\r\n} from \"../actions/ws-actions\";\r\nimport { TOrder } from \"../../utils/types\";\r\nimport { TActions } from \"../../utils/tactions\"\r\n\r\ntype TProfileFeedState = {\r\n  isLoading: boolean;\r\n  isError: boolean;\r\n  orders: TOrder[];\r\n};\r\n\r\nconst feedInitialState: TProfileFeedState = {\r\n  isLoading: false,\r\n  isError: false,\r\n  orders: [],\r\n};\r\n\r\nexport const profileFeedReducer: Reducer<TProfileFeedState, TActions> = (\r\n  state = feedInitialState,\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case PROFILE_FEED_WS_CONNECTION_START:\r\n      return { ...state, isLoading: true, isError: false };\r\n    case PROFILE_FEED_WS_CONNECTION_ERROR:\r\n      return { ...state, isLoading: false, isError: true };\r\n    case PROFILE_FEED_WS_CONNECTION_SUCCESS:\r\n      return { ...state, isError: false };\r\n    case PROFILE_FEED_WS_GET_MESSAGE:\r\n      const { orders } = action.payload.data;\r\n      return { ...state, orders, isLoading: false };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { Reducer } from \"redux\";\r\nimport {\r\n  FEED_WS_GET_MESSAGE,\r\n  PROFILE_FEED_WS_GET_MESSAGE,\r\n} from \"../actions/ws-actions\";\r\nimport { TOrder } from \"../../utils/types\";\r\nimport { TActions } from \"../../utils/tactions\";\r\n\r\ntype TOrdersState = {\r\n  orders: { [key: string]: TOrder | undefined };\r\n};\r\n\r\nconst ordersInitialState: TOrdersState = {\r\n  orders: {},\r\n};\r\n\r\nexport const ordersReducer: Reducer<TOrdersState, TActions> = (\r\n  state = ordersInitialState,\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case FEED_WS_GET_MESSAGE:\r\n    case PROFILE_FEED_WS_GET_MESSAGE:\r\n      const { orders } = action.payload.data;\r\n      return {\r\n        ...state,\r\n        orders: {\r\n          ...state.orders,\r\n          ...orders.reduce<TOrdersState[\"orders\"]>(\r\n            (acc, order) => ({ ...acc, [order._id]: order }),\r\n            {}\r\n          ),\r\n        },\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from \"redux\";\r\nimport { burgerConstructorReducer } from \"./reducers/burger-constructor-reducer\";\r\nimport { ingredientsReducer } from \"./reducers/ingredients-reducer\";\r\nimport { orderReducer } from \"./reducers/order-reducer\";\r\nimport { resetPasswordReducer } from \"./reducers/reset-password-reducer\";\r\nimport { userReducer } from \"./reducers/user-reducer\";\r\nimport { feedReducer } from \"./reducers/feed-reducer\";\r\nimport { profileFeedReducer } from \"./reducers/profile-feed-reducer\";\r\nimport { ordersReducer } from \"./reducers/orders-reducer\";\r\n\r\nexport const rootReducer = combineReducers({\r\n  order: orderReducer,\r\n  ingredients: ingredientsReducer,\r\n  burgerConstructor: burgerConstructorReducer,\r\n  user: userReducer,\r\n  resetPassword: resetPasswordReducer,\r\n  feed: feedReducer,\r\n  profileFeed: profileFeedReducer,\r\n  orders: ordersReducer,\r\n});\r\n","import { composeEnhancers } from \"../redux-devtools\";\r\nimport thunk from \"redux-thunk\";\r\nimport { applyMiddleware, createStore } from \"redux\";\r\nimport { rootReducer } from \"../services/root-reducer\";\r\nimport { socketMiddleware } from \"../services/middleware/ws-middleware\"\r\n\r\nconst enhancer = composeEnhancers(applyMiddleware(thunk, socketMiddleware()));\r\nexport const store = createStore(rootReducer, enhancer);\r\n","import type { Middleware, Dispatch } from \"redux\";\r\nimport {\r\n  WS_CONNECTION_INIT,\r\n  WS_SEND_MESSAGE,\r\n  WS_CONNECTION_CLOSE,\r\n} from \"../actions/ws-actions\";\r\nimport { TActions } from \"../../utils/tactions\";\r\nimport { TFeedWsResponse } from \"../../utils/types\";\r\n\r\nexport const socketMiddleware: () => Middleware<\r\n  {},\r\n  {},\r\n  Dispatch<TActions>\r\n> = () => {\r\n  return (store) => {\r\n    const connections: {\r\n      [id: string]: {\r\n        socket: WebSocket;\r\n        wsUrl: string;\r\n        id: string;\r\n        actions: {\r\n          start: string;\r\n          open: string;\r\n          error: string;\r\n          message: string;\r\n          close: string;\r\n        };\r\n      };\r\n    } = {};\r\n    return (next: Dispatch<TActions>) => (action: TActions) => {\r\n      const { dispatch } = store;\r\n      const { type } = action;\r\n\r\n      if (type === WS_CONNECTION_INIT) {\r\n        const { wsUrl, id, actions } = action.payload;\r\n\r\n        if (connections[id]) {\r\n          return next(action);\r\n        }\r\n\r\n        // объект класса WebSocket\r\n        const socket = new WebSocket(wsUrl);\r\n        connections[id] = { socket, id, wsUrl, actions };\r\n        console.log(\"wsMiddleware\", \"socket created\", {\r\n          socket,\r\n          id,\r\n          wsUrl,\r\n          actions,\r\n        });\r\n\r\n        dispatch({ type: actions.start });\r\n\r\n        // функция, которая вызывается при открытии сокета\r\n        socket.onopen = (event) => {\r\n          console.log(\"wsMiddleware\", \"socket open event\", { id, event });\r\n          dispatch({\r\n            type: actions.open,\r\n          });\r\n        };\r\n\r\n        // функция, которая вызывается при ошибке соединения\r\n        socket.onerror = (event) => {\r\n          console.log(\"wsMiddleware\", \"socket error event\", id, event);\r\n          dispatch({\r\n            type: actions.error,\r\n          });\r\n          if (connections[id]) {\r\n            connections[id].socket.close();\r\n            delete connections[id];\r\n            console.log(\"wsMiddleware\", \"connection deleted\", { id });\r\n          }\r\n        };\r\n\r\n        // функция, которая вызывается при получении события от сервера\r\n        socket.onmessage = (event: MessageEvent<string>) => {\r\n          const data = JSON.parse(event.data) as TFeedWsResponse;\r\n          console.log(\"wsMiddleware\", \"message event\", { data });\r\n          if (!data.success) {\r\n            dispatch({\r\n              type: actions.error,\r\n            });\r\n            if (connections[id]) {\r\n              connections[id].socket.close();\r\n              delete connections[id];\r\n              console.log(\"wsMiddleware\", \"connection deleted\", { id });\r\n            }\r\n          } else {\r\n            dispatch({\r\n              type: actions.message,\r\n              payload: { data },\r\n            });\r\n          }\r\n        };\r\n\r\n        // функция, которая вызывается при закрытии соединения\r\n        socket.onclose = (event) => {\r\n          console.log(\"wsMiddleware\", \"close event\", { id, event });\r\n          dispatch({\r\n            type: actions.close,\r\n          });\r\n          if (connections[id]) {\r\n            delete connections[id];\r\n            console.log(\"wsMiddleware\", \"connection deleted\", { id });\r\n          }\r\n        };\r\n      }\r\n\r\n      if (type === WS_SEND_MESSAGE) {\r\n        const { message, id } = action.payload;\r\n        const connection = connections[id];\r\n        if (connection) {\r\n          // функция для отправки сообщения на сервер\r\n          connection.socket.send(JSON.stringify(message));\r\n        }\r\n      }\r\n\r\n      if (type === WS_CONNECTION_CLOSE) {\r\n        const { id } = action.payload;\r\n        const connection = connections[id];\r\n        if (connection) {\r\n          connection.socket.close();\r\n          delete connections[id];\r\n        }\r\n      }\r\n\r\n      next(action);\r\n    };\r\n  };\r\n};\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./components/app/app\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Provider } from \"react-redux\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport { store } from \"./utils/store\";\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <DndProvider backend={HTML5Backend}>\r\n        <App />\r\n      </DndProvider>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order_card\":\"order-card_order_card__2JN1n\",\"order_number\":\"order-card_order_number__2I4BD\",\"order_ingredients\":\"order-card_order_ingredients__Myu-h\",\"order_ingredients_images\":\"order-card_order_ingredients_images__2c3Y8\",\"order_images_border\":\"order-card_order_images_border__3RORT\",\"order_ingredient_image\":\"order-card_order_ingredient_image__14WKn\",\"order_icon\":\"order-card_order_icon__1Xnad\",\"order_ingredient_count\":\"order-card_order_ingredient_count__2cOB_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header_header__2PCJV\",\"nav\":\"header_nav__Yn7D9\",\"navLink\":\"header_navLink__2qrHS\",\"active_link\":\"header_active_link__1bgGB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"profile_main__242OX\",\"nav\":\"profile_nav__B_z69\",\"active_link\":\"profile_active_link__MU5sa\",\"navlink\":\"profile_navlink__1MZdx\",\"logout\":\"profile_logout__3chQM\",\"form\":\"profile_form__3ORnl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feed_page_grid\":\"feed-page_feed_page_grid__Vikiu\",\"feed_item_link\":\"feed-page_feed_item_link__1kl-d\",\"order_list\":\"feed-page_order_list__2I1AI\",\"scrollbar\":\"feed-page_scrollbar__mEWuG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"constructor_section\":\"burger-constructor_constructor_section__3FdfH\",\"constructor_list\":\"burger-constructor_constructor_list__2mBcy\",\"constructor_items\":\"burger-constructor_constructor_items__2t2yl\",\"order\":\"burger-constructor_order__SsnH4\",\"scrollbox\":\"burger-constructor_scrollbox__3Z23P\",\"scrollbar\":\"burger-constructor_scrollbar__-c9tN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients_section\":\"burger-ingredients_ingredients_section__l8mYY\",\"ingredients_tabs\":\"burger-ingredients_ingredients_tabs__1zFeW\",\"scrollbox\":\"burger-ingredients_scrollbox__2apTV\",\"scrollbar\":\"burger-ingredients_scrollbar__2rVSV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"details\":\"ingredient-details_details__28kCX\",\"content\":\"ingredient-details_content__1TZrm\",\"image\":\"ingredient-details_image__3EkJL\",\"list\":\"ingredient-details_list__3jN0U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__-GJUR\",\"header\":\"modal_header__2r55q\",\"close\":\"modal_close__VSo9S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients_list\":\"ingredients-section_ingredients_list__1mz_n\",\"ingredients_list_title\":\"ingredients-section_ingredients_list_title__2YZ9h\",\"cards_box\":\"ingredients-section_cards_box__1j8gA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"constructor_item\":\"burger-constructor-item_constructor_item__N6dYK\",\"ingredient_button\":\"burger-constructor-item_ingredient_button__1wYRz\",\"drag_button\":\"burger-constructor-item_drag_button__2w73P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"details\":\"order-details-modal_details__1AqgF\",\"checkmark\":\"order-details-modal_checkmark__27n_U\",\"digits\":\"order-details-modal_digits__30q67\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient_card\":\"ingredient-card_ingredient_card__1DunG\",\"price\":\"ingredient-card_price__zyJet\"};"],"sourceRoot":""}